var es=Object.defineProperty;var ns=(L,i,N)=>i in L?es(L,i,{enumerable:!0,configurable:!0,writable:!0,value:N}):L[i]=N;var ne=(L,i,N)=>(ns(L,typeof i!="symbol"?i+"":i,N),N),je=(L,i,N)=>{if(!i.has(L))throw TypeError("Cannot "+N)};var t=(L,i,N)=>(je(L,i,"read from private field"),N?N.call(L):i.get(L)),U=(L,i,N)=>{if(i.has(L))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(L):i.set(L,N)},rt=(L,i,N,a)=>(je(L,i,"write to private field"),a?a.call(L,N):i.set(L,N),N);var me=(L,i,N,a)=>({set _(p){rt(L,i,p,N)},get _(){return t(L,i,a)}}),Y=(L,i,N)=>(je(L,i,"access private method"),N);import{g as getAugmentedNamespace,a as getDefaultExportFromCjs,r as reactExports,j as jsxRuntimeExports,B as Button}from"./index-Bbi0E9RA.js";function _mergeNamespaces(L,i){for(var N=0;N<i.length;N++){const a=i[N];if(typeof a!="string"&&!Array.isArray(a)){for(const p in a)if(p!=="default"&&!(p in L)){const X=Object.getOwnPropertyDescriptor(a,p);X&&Object.defineProperty(L,p,X.get?X:{enumerable:!0,get:()=>a[p]})}}}return Object.freeze(Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}))}function commonjsRequire(L){throw new Error('Could not dynamically require "'+L+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(i,N){module.exports=i.pdfjsLib=N()})(globalThis,()=>(()=>{var __webpack_modules__=[,(L,i)=>{var Yt;Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.TextRenderingMode=i.RenderingIntentFlag=i.PromiseCapability=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.MAX_IMAGE_SIZE_TO_CACHE=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.BASELINE_FACTOR=i.AnnotationType=i.AnnotationReplyType=i.AnnotationPrefix=i.AnnotationMode=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.assert=ct,i.bytesToString=H,i.createValidAbsoluteUrl=St,i.getModificationDate=Ct,i.getUuid=zt,i.getVerbosityLevel=q,i.info=it,i.isArrayBuffer=pt,i.isArrayEqual=Tt,i.isNodeJS=void 0,i.normalizeUnicode=Gt,i.objectFromMap=ht,i.objectSize=ot,i.setVerbosityLevel=w,i.shadow=xt,i.string32=Q,i.stringToBytes=st,i.stringToPDFString=bt,i.stringToUTF8String=nt,i.unreachable=V,i.utf8StringToString=tt,i.warn=at;const N=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");i.isNodeJS=N;const a=[1,0,0,1,0,0];i.IDENTITY_MATRIX=a;const p=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=p;const X=1e7;i.MAX_IMAGE_SIZE_TO_CACHE=X;const G=1.35;i.LINE_FACTOR=G;const ft=.35;i.LINE_DESCENT_FACTOR=ft;const D=ft/G;i.BASELINE_FACTOR=D;const R={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=R;const m={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=m;const I="pdfjs_internal_editor_";i.AnnotationEditorPrefix=I;const O={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};i.AnnotationEditorType=O;const C={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};i.AnnotationEditorParamsType=C;const S={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=S;const v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=v;const f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=f;const A={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=A;const T={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=T;const x={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=x;const y={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=y;const l={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=l;const d={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=d;const F={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=F;const b={O:"PageOpen",C:"PageClose"};i.PageActionEventType=b;const c={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=c;const k={NONE:0,BINARY:1};i.CMapCompressionType=k;const g={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=g;const W={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=W;let $=c.WARNINGS;function w(ut){Number.isInteger(ut)&&($=ut)}function q(){return $}function it(ut){$>=c.INFOS&&console.log(`Info: ${ut}`)}function at(ut){$>=c.WARNINGS&&console.log(`Warning: ${ut}`)}function V(ut){throw new Error(ut)}function ct(ut,et){ut||V(et)}function mt(ut){switch(ut==null?void 0:ut.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function St(ut,et=null,K=null){if(!ut)return null;try{if(K&&typeof ut=="string"){if(K.addDefaultProtocol&&ut.startsWith("www.")){const vt=ut.match(/\./g);(vt==null?void 0:vt.length)>=2&&(ut=`http://${ut}`)}if(K.tryConvertEncoding)try{ut=nt(ut)}catch{}}const At=et?new URL(ut,et):new URL(ut);if(mt(At))return At}catch{}return null}function xt(ut,et,K,At=!1){return Object.defineProperty(ut,et,{value:K,enumerable:!At,configurable:!0,writable:!1}),K}const P=function(){function et(K,At){this.constructor===et&&V("Cannot initialize BaseException."),this.message=K,this.name=At}return et.prototype=new Error,et.constructor=et,et}();i.BaseException=P;class n extends P{constructor(et,K){super(et,"PasswordException"),this.code=K}}i.PasswordException=n;class o extends P{constructor(et,K){super(et,"UnknownErrorException"),this.details=K}}i.UnknownErrorException=o;class s extends P{constructor(et){super(et,"InvalidPDFException")}}i.InvalidPDFException=s;class h extends P{constructor(et){super(et,"MissingPDFException")}}i.MissingPDFException=h;class u extends P{constructor(et,K){super(et,"UnexpectedResponseException"),this.status=K}}i.UnexpectedResponseException=u;class E extends P{constructor(et){super(et,"FormatError")}}i.FormatError=E;class M extends P{constructor(et){super(et,"AbortException")}}i.AbortException=M;function H(ut){(typeof ut!="object"||(ut==null?void 0:ut.length)===void 0)&&V("Invalid argument for bytesToString");const et=ut.length,K=8192;if(et<K)return String.fromCharCode.apply(null,ut);const At=[];for(let vt=0;vt<et;vt+=K){const ee=Math.min(vt+K,et),te=ut.subarray(vt,ee);At.push(String.fromCharCode.apply(null,te))}return At.join("")}function st(ut){typeof ut!="string"&&V("Invalid argument for stringToBytes");const et=ut.length,K=new Uint8Array(et);for(let At=0;At<et;++At)K[At]=ut.charCodeAt(At)&255;return K}function Q(ut){return String.fromCharCode(ut>>24&255,ut>>16&255,ut>>8&255,ut&255)}function ot(ut){return Object.keys(ut).length}function ht(ut){const et=Object.create(null);for(const[K,At]of ut)et[K]=At;return et}function gt(){const ut=new Uint8Array(4);return ut[0]=1,new Uint32Array(ut.buffer,0,1)[0]===1}function dt(){try{return new Function(""),!0}catch{return!1}}class Pt{static get isLittleEndian(){return xt(this,"isLittleEndian",gt())}static get isEvalSupported(){return xt(this,"isEvalSupported",dt())}static get isOffscreenCanvasSupported(){return xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?xt(this,"platform",{isWin:!1,isMac:!1}):xt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var et,K;return xt(this,"isCSSRoundSupported",(K=(et=globalThis.CSS)==null?void 0:et.supports)==null?void 0:K.call(et,"width: round(1.5px, 1px)"))}}i.FeatureTest=Pt;const It=[...Array(256).keys()].map(ut=>ut.toString(16).padStart(2,"0"));class Et{static makeHexColor(et,K,At){return`#${It[et]}${It[K]}${It[At]}`}static scaleMinMax(et,K){let At;et[0]?(et[0]<0&&(At=K[0],K[0]=K[1],K[1]=At),K[0]*=et[0],K[1]*=et[0],et[3]<0&&(At=K[2],K[2]=K[3],K[3]=At),K[2]*=et[3],K[3]*=et[3]):(At=K[0],K[0]=K[2],K[2]=At,At=K[1],K[1]=K[3],K[3]=At,et[1]<0&&(At=K[2],K[2]=K[3],K[3]=At),K[2]*=et[1],K[3]*=et[1],et[2]<0&&(At=K[0],K[0]=K[1],K[1]=At),K[0]*=et[2],K[1]*=et[2]),K[0]+=et[4],K[1]+=et[4],K[2]+=et[5],K[3]+=et[5]}static transform(et,K){return[et[0]*K[0]+et[2]*K[1],et[1]*K[0]+et[3]*K[1],et[0]*K[2]+et[2]*K[3],et[1]*K[2]+et[3]*K[3],et[0]*K[4]+et[2]*K[5]+et[4],et[1]*K[4]+et[3]*K[5]+et[5]]}static applyTransform(et,K){const At=et[0]*K[0]+et[1]*K[2]+K[4],vt=et[0]*K[1]+et[1]*K[3]+K[5];return[At,vt]}static applyInverseTransform(et,K){const At=K[0]*K[3]-K[1]*K[2],vt=(et[0]*K[3]-et[1]*K[2]+K[2]*K[5]-K[4]*K[3])/At,ee=(-et[0]*K[1]+et[1]*K[0]+K[4]*K[1]-K[5]*K[0])/At;return[vt,ee]}static getAxialAlignedBoundingBox(et,K){const At=this.applyTransform(et,K),vt=this.applyTransform(et.slice(2,4),K),ee=this.applyTransform([et[0],et[3]],K),te=this.applyTransform([et[2],et[1]],K);return[Math.min(At[0],vt[0],ee[0],te[0]),Math.min(At[1],vt[1],ee[1],te[1]),Math.max(At[0],vt[0],ee[0],te[0]),Math.max(At[1],vt[1],ee[1],te[1])]}static inverseTransform(et){const K=et[0]*et[3]-et[1]*et[2];return[et[3]/K,-et[1]/K,-et[2]/K,et[0]/K,(et[2]*et[5]-et[4]*et[3])/K,(et[4]*et[1]-et[5]*et[0])/K]}static singularValueDecompose2dScale(et){const K=[et[0],et[2],et[1],et[3]],At=et[0]*K[0]+et[1]*K[2],vt=et[0]*K[1]+et[1]*K[3],ee=et[2]*K[0]+et[3]*K[2],te=et[2]*K[1]+et[3]*K[3],Z=(At+te)/2,wt=Math.sqrt((At+te)**2-4*(At*te-ee*vt))/2,Nt=Z+wt||1,Rt=Z-wt||1;return[Math.sqrt(Nt),Math.sqrt(Rt)]}static normalizeRect(et){const K=et.slice(0);return et[0]>et[2]&&(K[0]=et[2],K[2]=et[0]),et[1]>et[3]&&(K[1]=et[3],K[3]=et[1]),K}static intersect(et,K){const At=Math.max(Math.min(et[0],et[2]),Math.min(K[0],K[2])),vt=Math.min(Math.max(et[0],et[2]),Math.max(K[0],K[2]));if(At>vt)return null;const ee=Math.max(Math.min(et[1],et[3]),Math.min(K[1],K[3])),te=Math.min(Math.max(et[1],et[3]),Math.max(K[1],K[3]));return ee>te?null:[At,ee,vt,te]}static bezierBoundingBox(et,K,At,vt,ee,te,Z,wt){const Nt=[],Rt=[[],[]];let jt,Bt,Qt,yt,Kt,Ot,j,e;for(let J=0;J<2;++J){if(J===0?(Bt=6*et-12*At+6*ee,jt=-3*et+9*At-9*ee+3*Z,Qt=3*At-3*et):(Bt=6*K-12*vt+6*te,jt=-3*K+9*vt-9*te+3*wt,Qt=3*vt-3*K),Math.abs(jt)<1e-12){if(Math.abs(Bt)<1e-12)continue;yt=-Qt/Bt,0<yt&&yt<1&&Nt.push(yt);continue}j=Bt*Bt-4*Qt*jt,e=Math.sqrt(j),!(j<0)&&(Kt=(-Bt+e)/(2*jt),0<Kt&&Kt<1&&Nt.push(Kt),Ot=(-Bt-e)/(2*jt),0<Ot&&Ot<1&&Nt.push(Ot))}let _=Nt.length,B;const z=_;for(;_--;)yt=Nt[_],B=1-yt,Rt[0][_]=B*B*B*et+3*B*B*yt*At+3*B*yt*yt*ee+yt*yt*yt*Z,Rt[1][_]=B*B*B*K+3*B*B*yt*vt+3*B*yt*yt*te+yt*yt*yt*wt;return Rt[0][z]=et,Rt[1][z]=K,Rt[0][z+1]=Z,Rt[1][z+1]=wt,Rt[0].length=Rt[1].length=z+2,[Math.min(...Rt[0]),Math.min(...Rt[1]),Math.max(...Rt[0]),Math.max(...Rt[1])]}}i.Util=Et;const Lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function bt(ut){if(ut[0]>="ï"){let K;if(ut[0]==="þ"&&ut[1]==="ÿ"?K="utf-16be":ut[0]==="ÿ"&&ut[1]==="þ"?K="utf-16le":ut[0]==="ï"&&ut[1]==="»"&&ut[2]==="¿"&&(K="utf-8"),K)try{const At=new TextDecoder(K,{fatal:!0}),vt=st(ut);return At.decode(vt)}catch(At){at(`stringToPDFString: "${At}".`)}}const et=[];for(let K=0,At=ut.length;K<At;K++){const vt=Lt[ut.charCodeAt(K)];et.push(vt?String.fromCharCode(vt):ut.charAt(K))}return et.join("")}function nt(ut){return decodeURIComponent(escape(ut))}function tt(ut){return unescape(encodeURIComponent(ut))}function pt(ut){return typeof ut=="object"&&(ut==null?void 0:ut.byteLength)!==void 0}function Tt(ut,et){if(ut.length!==et.length)return!1;for(let K=0,At=ut.length;K<At;K++)if(ut[K]!==et[K])return!1;return!0}function Ct(ut=new Date){return[ut.getUTCFullYear().toString(),(ut.getUTCMonth()+1).toString().padStart(2,"0"),ut.getUTCDate().toString().padStart(2,"0"),ut.getUTCHours().toString().padStart(2,"0"),ut.getUTCMinutes().toString().padStart(2,"0"),ut.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ht{constructor(){U(this,Yt,!1);this.promise=new Promise((et,K)=>{this.resolve=At=>{rt(this,Yt,!0),et(At)},this.reject=At=>{rt(this,Yt,!0),K(At)}})}get settled(){return t(this,Yt)}}Yt=new WeakMap,i.PromiseCapability=Ht;let $t=null,Wt=null;function Gt(ut){return $t||($t=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Wt=new Map([["ﬅ","ſt"]])),ut.replaceAll($t,(et,K,At)=>K?K.normalize("NFKC"):Wt.get(At))}function zt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ut=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ut);else for(let et=0;et<32;et++)ut[et]=Math.floor(Math.random()*255);return H(ut)}const Ut="pdfjs_internal_id_";i.AnnotationPrefix=Ut},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var L,N,a,p,de,G,we,D,R,m,I,O,C,S,v,f,xe,T,x,Be,l,d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(b){if(typeof b=="string"||b instanceof URL?b={url:b}:(0,_util.isArrayBuffer)(b)&&(b={data:b}),typeof b!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!b.url&&!b.data&&!b.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const c=new PDFDocumentLoadingTask,{docId:k}=c,g=b.url?getUrlProp(b.url):null,W=b.data?getDataProp(b.data):null,$=b.httpHeaders||null,w=b.withCredentials===!0,q=b.password??null,it=b.range instanceof PDFDataRangeTransport?b.range:null,at=Number.isInteger(b.rangeChunkSize)&&b.rangeChunkSize>0?b.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let V=b.worker instanceof PDFWorker?b.worker:null;const ct=b.verbosity,mt=typeof b.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(b.docBaseUrl)?b.docBaseUrl:null,St=typeof b.cMapUrl=="string"?b.cMapUrl:null,xt=b.cMapPacked!==!1,P=b.CMapReaderFactory||DefaultCMapReaderFactory,n=typeof b.standardFontDataUrl=="string"?b.standardFontDataUrl:null,o=b.StandardFontDataFactory||DefaultStandardFontDataFactory,s=b.stopAtErrors!==!0,h=Number.isInteger(b.maxImageSize)&&b.maxImageSize>-1?b.maxImageSize:-1,u=b.isEvalSupported!==!1,E=typeof b.isOffscreenCanvasSupported=="boolean"?b.isOffscreenCanvasSupported:!_util.isNodeJS,M=Number.isInteger(b.canvasMaxAreaInBytes)?b.canvasMaxAreaInBytes:-1,H=typeof b.disableFontFace=="boolean"?b.disableFontFace:_util.isNodeJS,st=b.fontExtraProperties===!0,Q=b.enableXfa===!0,ot=b.ownerDocument||globalThis.document,ht=b.disableRange===!0,gt=b.disableStream===!0,dt=b.disableAutoFetch===!0,Pt=b.pdfBug===!0,It=it?it.length:b.length??NaN,Et=typeof b.useSystemFonts=="boolean"?b.useSystemFonts:!_util.isNodeJS&&!H,Lt=typeof b.useWorkerFetch=="boolean"?b.useWorkerFetch:P===_display_utils.DOMCMapReaderFactory&&o===_display_utils.DOMStandardFontDataFactory&&St&&n&&(0,_display_utils.isValidFetchUrl)(St,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(n,document.baseURI),bt=b.canvasFactory||new DefaultCanvasFactory({ownerDocument:ot}),nt=b.filterFactory||new DefaultFilterFactory({docId:k,ownerDocument:ot}),tt=null;(0,_util.setVerbosityLevel)(ct);const pt={canvasFactory:bt,filterFactory:nt};if(Lt||(pt.cMapReaderFactory=new P({baseUrl:St,isCompressed:xt}),pt.standardFontDataFactory=new o({baseUrl:n})),!V){const Ht={verbosity:ct,port:_worker_options.GlobalWorkerOptions.workerPort};V=Ht.port?PDFWorker.fromPort(Ht):new PDFWorker(Ht),c._worker=V}const Tt={docId:k,apiVersion:"3.11.174",data:W,password:q,disableAutoFetch:dt,rangeChunkSize:at,length:It,docBaseUrl:mt,enableXfa:Q,evaluatorOptions:{maxImageSize:h,disableFontFace:H,ignoreErrors:s,isEvalSupported:u,isOffscreenCanvasSupported:E,canvasMaxAreaInBytes:M,fontExtraProperties:st,useSystemFonts:Et,cMapUrl:Lt?St:null,standardFontDataUrl:Lt?n:null}},Ct={ignoreErrors:s,isEvalSupported:u,disableFontFace:H,fontExtraProperties:st,enableXfa:Q,ownerDocument:ot,disableAutoFetch:dt,pdfBug:Pt,styleElement:tt};return V.promise.then(function(){if(c.destroyed)throw new Error("Loading aborted");const Ht=_fetchDocument(V,Tt),$t=new Promise(function(Wt){let Gt;it?Gt=new _transport_stream.PDFDataTransportStream({length:It,initialData:it.initialData,progressiveDone:it.progressiveDone,contentDispositionFilename:it.contentDispositionFilename,disableRange:ht,disableStream:gt},it):W||(Gt=(Ut=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ut):(0,_display_utils.isValidFetchUrl)(Ut.url)?new _displayFetch_stream.PDFFetchStream(Ut):new _displayNetwork.PDFNetworkStream(Ut))({url:g,length:It,httpHeaders:$,withCredentials:w,rangeChunkSize:at,disableRange:ht,disableStream:gt})),Wt(Gt)});return Promise.all([Ht,$t]).then(function([Wt,Gt]){if(c.destroyed)throw new Error("Loading aborted");const zt=new _message_handler.MessageHandler(k,Wt,V.port),Ut=new WorkerTransport(zt,c,Gt,Ct,pt);c._transport=Ut,zt.send("Ready",null)})}).catch(c._capability.reject),c}async function _fetchDocument(b,c){if(b.destroyed)throw new Error("Worker was destroyed");const k=await b.messageHandler.sendWithPromise("GetDocRequest",c,c.data?[c.data.buffer]:null);if(b.destroyed)throw new Error("Worker was destroyed");return k}function getUrlProp(b){if(b instanceof URL)return b.href;try{return new URL(b,window.location).href}catch{if(_util.isNodeJS&&typeof b=="string")return b}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(b){if(_util.isNodeJS&&typeof Buffer<"u"&&b instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength)return b;if(typeof b=="string")return(0,_util.stringToBytes)(b);if(typeof b=="object"&&!isNaN(b==null?void 0:b.length)||(0,_util.isArrayBuffer)(b))return new Uint8Array(b);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const i=class i{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${me(i,L)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var c,k,g;this.destroyed=!0;try{(c=this._worker)!=null&&c.port&&(this._worker._pendingDestroy=!0),await((k=this._transport)==null?void 0:k.destroy())}catch(W){throw(g=this._worker)!=null&&g.port&&delete this._worker._pendingDestroy,W}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};L=new WeakMap,U(i,L,0);let PDFDocumentLoadingTask=i;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(c,k,g=!1,W=null){this.length=c,this.initialData=k,this.progressiveDone=g,this.contentDispositionFilename=W,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(c){this._rangeListeners.push(c)}addProgressListener(c){this._progressListeners.push(c)}addProgressiveReadListener(c){this._progressiveReadListeners.push(c)}addProgressiveDoneListener(c){this._progressiveDoneListeners.push(c)}onDataRange(c,k){for(const g of this._rangeListeners)g(c,k)}onDataProgress(c,k){this._readyCapability.promise.then(()=>{for(const g of this._progressListeners)g(c,k)})}onDataProgressiveRead(c){this._readyCapability.promise.then(()=>{for(const k of this._progressiveReadListeners)k(c)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const c of this._progressiveDoneListeners)c()})}transportReady(){this._readyCapability.resolve()}requestDataRange(c,k){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(c,k){this._pdfInfo=c,this._transport=k,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(g=>{if(!g)return g;const W=[];for(const $ in g)W.push(...g[$]);return W}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(c){return this._transport.getPage(c)}getPageIndex(c){return this._transport.getPageIndex(c)}getDestinations(){return this._transport.getDestinations()}getDestination(c){return this._transport.getDestination(c)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(c=!1){return this._transport.startCleanup(c||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(c,k,g,W=!1){U(this,p);U(this,G);U(this,N,null);U(this,a,!1);this._pageIndex=c,this._pageInfo=k,this._transport=g,this._stats=W?new _display_utils.StatTimer:null,this._pdfBug=W,this.commonObjs=g.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:c,rotation:k=this.rotate,offsetX:g=0,offsetY:W=0,dontFlip:$=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:c,rotation:k,offsetX:g,offsetY:W,dontFlip:$})}getAnnotations({intent:c="display"}={}){const k=this._transport.getRenderingIntent(c);return this._transport.getAnnotations(this._pageIndex,k.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var c;return((c=this._transport._htmlForXfa)==null?void 0:c.children[this._pageIndex])||null}render({canvasContext:c,viewport:k,intent:g="display",annotationMode:W=_util.AnnotationMode.ENABLE,transform:$=null,background:w=null,optionalContentConfigPromise:q=null,annotationCanvasMap:it=null,pageColors:at=null,printAnnotationStorage:V=null}){var o,s;(o=this._stats)==null||o.time("Overall");const ct=this._transport.getRenderingIntent(g,W,V);rt(this,a,!1),Y(this,G,we).call(this),q||(q=this._transport.getOptionalContentConfig());let mt=this._intentStates.get(ct.cacheKey);mt||(mt=Object.create(null),this._intentStates.set(ct.cacheKey,mt)),mt.streamReaderCancelTimeout&&(clearTimeout(mt.streamReaderCancelTimeout),mt.streamReaderCancelTimeout=null);const St=!!(ct.renderingIntent&_util.RenderingIntentFlag.PRINT);mt.displayReadyCapability||(mt.displayReadyCapability=new _util.PromiseCapability,mt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(s=this._stats)==null||s.time("Page Request"),this._pumpOperatorList(ct));const xt=h=>{var u,E;mt.renderTasks.delete(P),(this._maybeCleanupAfterRender||St)&&rt(this,a,!0),Y(this,p,de).call(this,!St),h?(P.capability.reject(h),this._abortOperatorList({intentState:mt,reason:h instanceof Error?h:new Error(h)})):P.capability.resolve(),(u=this._stats)==null||u.timeEnd("Rendering"),(E=this._stats)==null||E.timeEnd("Overall")},P=new InternalRenderTask({callback:xt,params:{canvasContext:c,viewport:k,transform:$,background:w},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:it,operatorList:mt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!St,pdfBug:this._pdfBug,pageColors:at});(mt.renderTasks||(mt.renderTasks=new Set)).add(P);const n=P.task;return Promise.all([mt.displayReadyCapability.promise,q]).then(([h,u])=>{var E;if(this.destroyed){xt();return}(E=this._stats)==null||E.time("Rendering"),P.initializeGraphics({transparency:h,optionalContentConfig:u}),P.operatorListChanged()}).catch(xt),n}getOperatorList({intent:c="display",annotationMode:k=_util.AnnotationMode.ENABLE,printAnnotationStorage:g=null}={}){var it;function W(){w.operatorList.lastChunk&&(w.opListReadCapability.resolve(w.operatorList),w.renderTasks.delete(q))}const $=this._transport.getRenderingIntent(c,k,g,!0);let w=this._intentStates.get($.cacheKey);w||(w=Object.create(null),this._intentStates.set($.cacheKey,w));let q;return w.opListReadCapability||(q=Object.create(null),q.operatorListChanged=W,w.opListReadCapability=new _util.PromiseCapability,(w.renderTasks||(w.renderTasks=new Set)).add(q),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(it=this._stats)==null||it.time("Page Request"),this._pumpOperatorList($)),w.opListReadCapability.promise}streamTextContent({includeMarkedContent:c=!1,disableNormalization:k=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:c===!0,disableNormalization:k===!0},{highWaterMark:100,size(W){return W.items.length}})}getTextContent(c={}){if(this._transport._htmlForXfa)return this.getXfa().then(g=>_xfa_text.XfaText.textContent(g));const k=this.streamTextContent(c);return new Promise(function(g,W){function $(){w.read().then(function({value:it,done:at}){if(at){g(q);return}Object.assign(q.styles,it.styles),q.items.push(...it.items),$()},W)}const w=k.getReader(),q={items:[],styles:Object.create(null)};$()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const c=[];for(const k of this._intentStates.values())if(this._abortOperatorList({intentState:k,reason:new Error("Page was destroyed."),force:!0}),!k.opListReadCapability)for(const g of k.renderTasks)c.push(g.completed),g.cancel();return this.objs.clear(),rt(this,a,!1),Y(this,G,we).call(this),Promise.all(c)}cleanup(c=!1){rt(this,a,!0);const k=Y(this,p,de).call(this,!1);return c&&k&&this._stats&&(this._stats=new _display_utils.StatTimer),k}_startRenderPage(c,k){var W,$;const g=this._intentStates.get(k);g&&((W=this._stats)==null||W.timeEnd("Page Request"),($=g.displayReadyCapability)==null||$.resolve(c))}_renderPageChunk(c,k){for(let g=0,W=c.length;g<W;g++)k.operatorList.fnArray.push(c.fnArray[g]),k.operatorList.argsArray.push(c.argsArray[g]);k.operatorList.lastChunk=c.lastChunk,k.operatorList.separateAnnots=c.separateAnnots;for(const g of k.renderTasks)g.operatorListChanged();c.lastChunk&&Y(this,p,de).call(this,!0)}_pumpOperatorList({renderingIntent:c,cacheKey:k,annotationStorageSerializable:g}){const{map:W,transfers:$}=g,q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:c,cacheKey:k,annotationStorage:W},$).getReader(),it=this._intentStates.get(k);it.streamReader=q;const at=()=>{q.read().then(({value:V,done:ct})=>{if(ct){it.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(V,it),at())},V=>{if(it.streamReader=null,!this._transport.destroyed){if(it.operatorList){it.operatorList.lastChunk=!0;for(const ct of it.renderTasks)ct.operatorListChanged();Y(this,p,de).call(this,!0)}if(it.displayReadyCapability)it.displayReadyCapability.reject(V);else if(it.opListReadCapability)it.opListReadCapability.reject(V);else throw V}})};at()}_abortOperatorList({intentState:c,reason:k,force:g=!1}){if(c.streamReader){if(c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null),!g){if(c.renderTasks.size>0)return;if(k instanceof _display_utils.RenderingCancelledException){let W=RENDERING_CANCELLED_TIMEOUT;k.extraDelay>0&&k.extraDelay<1e3&&(W+=k.extraDelay),c.streamReaderCancelTimeout=setTimeout(()=>{c.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:c,reason:k,force:!0})},W);return}}if(c.streamReader.cancel(new _util.AbortException(k.message)).catch(()=>{}),c.streamReader=null,!this._transport.destroyed){for(const[W,$]of this._intentStates)if($===c){this._intentStates.delete(W);break}this.cleanup()}}}get stats(){return this._stats}}N=new WeakMap,a=new WeakMap,p=new WeakSet,de=function(c=!1){if(Y(this,G,we).call(this),!t(this,a)||this.destroyed)return!1;if(c)return rt(this,N,setTimeout(()=>{rt(this,N,null),Y(this,p,de).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:k,operatorList:g}of this._intentStates.values())if(k.size>0||!g.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),rt(this,a,!1),!0},G=new WeakSet,we=function(){t(this,N)&&(clearTimeout(t(this,N)),rt(this,N,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){U(this,D,new Set);U(this,R,Promise.resolve())}postMessage(c,k){const g={data:structuredClone(c,k?{transfer:k}:null)};t(this,R).then(()=>{for(const W of t(this,D))W.call(this,g)})}addEventListener(c,k){t(this,D).add(k)}removeEventListener(c,k){t(this,D).delete(k)}terminate(){t(this,D).clear()}}D=new WeakMap,R=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const b=(m=document==null?void 0:document.currentScript)==null?void 0:m.src;b&&(PDFWorkerUtil.fallbackWorkerSrc=b.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(b,c){let k;try{if(k=new URL(b),!k.origin||k.origin==="null")return!1}catch{return!1}const g=new URL(c,k);return k.origin===g.origin},PDFWorkerUtil.createCDNWrapper=function(b){const c=`importScripts("${b}");`;return URL.createObjectURL(new Blob([c]))}}const _PDFWorker=class _PDFWorker{constructor({name:b=null,port:c=null,verbosity:k=(0,_util.getVerbosityLevel)()}={}){var g;if(this.name=b,this.destroyed=!1,this.verbosity=k,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,c){if((g=t(_PDFWorker,I))!=null&&g.has(c))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,I)||rt(_PDFWorker,I,new WeakMap)).set(c,this),this._initializeFromPort(c);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(b){this._port=b,this._messageHandler=new _message_handler.MessageHandler("main","worker",b),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:b}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,b)||(b=PDFWorkerUtil.createCDNWrapper(new URL(b,window.location).href));const c=new Worker(b),k=new _message_handler.MessageHandler("main","worker",c),g=()=>{c.removeEventListener("error",W),k.destroy(),c.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},W=()=>{this._webWorker||g()};c.addEventListener("error",W),k.on("test",w=>{if(c.removeEventListener("error",W),this.destroyed){g();return}w?(this._messageHandler=k,this._port=c,this._webWorker=c,this._readyCapability.resolve(),k.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),k.destroy(),c.terminate())}),k.on("ready",w=>{if(c.removeEventListener("error",W),this.destroyed){g();return}try{$()}catch{this._setupFakeWorker()}});const $=()=>{const w=new Uint8Array;k.send("test",w,[w.buffer])};$();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(b=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const c=new LoopbackPort;this._port=c;const k=`fake${PDFWorkerUtil.fakeWorkerId++}`,g=new _message_handler.MessageHandler(k+"_worker",k,c);b.setup(g,c);const W=new _message_handler.MessageHandler(k,k+"_worker",c);this._messageHandler=W,this._readyCapability.resolve(),W.send("configure",{verbosity:this.verbosity})}).catch(b=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${b.message}".`))})}destroy(){var b;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(b=t(_PDFWorker,I))==null||b.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(b){var k;if(!(b!=null&&b.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const c=(k=t(this,I))==null?void 0:k.get(b.port);if(c){if(c._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return c}return new _PDFWorker(b)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var b;try{return((b=globalThis.pdfjsWorker)==null?void 0:b.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};I=new WeakMap,U(_PDFWorker,I,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(c,k,g,W,$){U(this,f);U(this,O,new Map);U(this,C,new Map);U(this,S,new Map);U(this,v,null);this.messageHandler=c,this.loadingTask=k,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:W.ownerDocument,styleElement:W.styleElement}),this._params=W,this.canvasFactory=$.canvasFactory,this.filterFactory=$.filterFactory,this.cMapReaderFactory=$.cMapReaderFactory,this.standardFontDataFactory=$.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=g,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(c,k=_util.AnnotationMode.ENABLE,g=null,W=!1){let $=_util.RenderingIntentFlag.DISPLAY,w=_annotation_storage.SerializableEmpty;switch(c){case"any":$=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":$=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${c}`)}switch(k){case _util.AnnotationMode.DISABLE:$+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:$+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:$+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,w=($&_util.RenderingIntentFlag.PRINT&&g instanceof _annotation_storage.PrintAnnotationStorage?g:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${k}`)}return W&&($+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:$,cacheKey:`${$}_${w.hash}`,annotationStorageSerializable:w}}destroy(){var g;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(g=t(this,v))==null||g.reject(new Error("Worker was destroyed during onPassword callback"));const c=[];for(const W of t(this,C).values())c.push(W._destroy());t(this,C).clear(),t(this,S).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const k=this.messageHandler.sendWithPromise("Terminate",null);return c.push(k),Promise.all(c).then(()=>{var W;this.commonObjs.clear(),this.fontLoader.clear(),t(this,O).clear(),this.filterFactory.destroy(),(W=this._networkStream)==null||W.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:c,loadingTask:k}=this;c.on("GetReader",(g,W)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=$=>{this._lastProgress={loaded:$.loaded,total:$.total}},W.onPull=()=>{this._fullReader.read().then(function({value:$,done:w}){if(w){W.close();return}(0,_util.assert)($ instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),W.enqueue(new Uint8Array($),1,[$])}).catch($=>{W.error($)})},W.onCancel=$=>{this._fullReader.cancel($),W.ready.catch(w=>{if(!this.destroyed)throw w})}}),c.on("ReaderHeadersReady",g=>{const W=new _util.PromiseCapability,$=this._fullReader;return $.headersReady.then(()=>{var w;(!$.isStreamingSupported||!$.isRangeSupported)&&(this._lastProgress&&((w=k.onProgress)==null||w.call(k,this._lastProgress)),$.onProgress=q=>{var it;(it=k.onProgress)==null||it.call(k,{loaded:q.loaded,total:q.total})}),W.resolve({isStreamingSupported:$.isStreamingSupported,isRangeSupported:$.isRangeSupported,contentLength:$.contentLength})},W.reject),W.promise}),c.on("GetRangeReader",(g,W)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const $=this._networkStream.getRangeReader(g.begin,g.end);if(!$){W.close();return}W.onPull=()=>{$.read().then(function({value:w,done:q}){if(q){W.close();return}(0,_util.assert)(w instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),W.enqueue(new Uint8Array(w),1,[w])}).catch(w=>{W.error(w)})},W.onCancel=w=>{$.cancel(w),W.ready.catch(q=>{if(!this.destroyed)throw q})}}),c.on("GetDoc",({pdfInfo:g})=>{this._numPages=g.numPages,this._htmlForXfa=g.htmlForXfa,delete g.htmlForXfa,k._capability.resolve(new PDFDocumentProxy(g,this))}),c.on("DocException",function(g){let W;switch(g.name){case"PasswordException":W=new _util.PasswordException(g.message,g.code);break;case"InvalidPDFException":W=new _util.InvalidPDFException(g.message);break;case"MissingPDFException":W=new _util.MissingPDFException(g.message);break;case"UnexpectedResponseException":W=new _util.UnexpectedResponseException(g.message,g.status);break;case"UnknownErrorException":W=new _util.UnknownErrorException(g.message,g.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}k._capability.reject(W)}),c.on("PasswordRequest",g=>{if(rt(this,v,new _util.PromiseCapability),k.onPassword){const W=$=>{$ instanceof Error?t(this,v).reject($):t(this,v).resolve({password:$})};try{k.onPassword(W,g.code)}catch($){t(this,v).reject($)}}else t(this,v).reject(new _util.PasswordException(g.message,g.code));return t(this,v).promise}),c.on("DataLoaded",g=>{var W;(W=k.onProgress)==null||W.call(k,{loaded:g.length,total:g.length}),this.downloadInfoCapability.resolve(g)}),c.on("StartRenderPage",g=>{if(this.destroyed)return;t(this,C).get(g.pageIndex)._startRenderPage(g.transparency,g.cacheKey)}),c.on("commonobj",([g,W,$])=>{var w;if(!this.destroyed&&!this.commonObjs.has(g))switch(W){case"Font":const q=this._params;if("error"in $){const V=$.error;(0,_util.warn)(`Error during font loading: ${V}`),this.commonObjs.resolve(g,V);break}const it=q.pdfBug&&((w=globalThis.FontInspector)!=null&&w.enabled)?(V,ct)=>globalThis.FontInspector.fontAdded(V,ct):null,at=new _font_loader.FontFaceObject($,{isEvalSupported:q.isEvalSupported,disableFontFace:q.disableFontFace,ignoreErrors:q.ignoreErrors,inspectFont:it});this.fontLoader.bind(at).catch(V=>c.sendWithPromise("FontFallback",{id:g})).finally(()=>{!q.fontExtraProperties&&at.data&&(at.data=null),this.commonObjs.resolve(g,at)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(g,$);break;default:throw new Error(`Got unknown common object type ${W}`)}}),c.on("obj",([g,W,$,w])=>{var it;if(this.destroyed)return;const q=t(this,C).get(W);if(!q.objs.has(g))switch($){case"Image":if(q.objs.resolve(g,w),w){let at;if(w.bitmap){const{width:V,height:ct}=w;at=V*ct*4}else at=((it=w.data)==null?void 0:it.length)||0;at>_util.MAX_IMAGE_SIZE_TO_CACHE&&(q._maybeCleanupAfterRender=!0)}break;case"Pattern":q.objs.resolve(g,w);break;default:throw new Error(`Got unknown object type ${$}`)}}),c.on("DocProgress",g=>{var W;this.destroyed||(W=k.onProgress)==null||W.call(k,{loaded:g.loaded,total:g.total})}),c.on("FetchBuiltInCMap",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(g):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),c.on("FetchStandardFontData",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(g):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var g;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:c,transfers:k}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:c,filename:((g=this._fullReader)==null?void 0:g.filename)??null},k).finally(()=>{this.annotationStorage.resetModified()})}getPage(c){if(!Number.isInteger(c)||c<=0||c>this._numPages)return Promise.reject(new Error("Invalid page request."));const k=c-1,g=t(this,S).get(k);if(g)return g;const W=this.messageHandler.sendWithPromise("GetPage",{pageIndex:k}).then($=>{if(this.destroyed)throw new Error("Transport destroyed");const w=new PDFPageProxy(k,$,this,this._params.pdfBug);return t(this,C).set(k,w),w});return t(this,S).set(k,W),W}getPageIndex(c){return typeof c!="object"||c===null||!Number.isInteger(c.num)||c.num<0||!Number.isInteger(c.gen)||c.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:c.num,gen:c.gen})}getAnnotations(c,k){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c,intent:k})}getFieldObjects(){return Y(this,f,xe).call(this,"GetFieldObjects")}hasJSActions(){return Y(this,f,xe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(c){return typeof c!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:c})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Y(this,f,xe).call(this,"GetDocJSActions")}getPageJSActions(c){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c})}getStructTree(c){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(c=>new _optional_content_config.OptionalContentConfig(c))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const c="GetMetadata",k=t(this,O).get(c);if(k)return k;const g=this.messageHandler.sendWithPromise(c,null).then(W=>{var $,w;return{info:W[0],metadata:W[1]?new _metadata.Metadata(W[1]):null,contentDispositionFilename:(($=this._fullReader)==null?void 0:$.filename)??null,contentLength:((w=this._fullReader)==null?void 0:w.contentLength)??null}});return t(this,O).set(c,g),g}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(c=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const k of t(this,C).values())if(!k.cleanup())throw new Error(`startCleanup: Page ${k.pageNumber} is currently rendering.`);this.commonObjs.clear(),c||this.fontLoader.clear(),t(this,O).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:c,enableXfa:k}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:c,enableXfa:k})}}O=new WeakMap,C=new WeakMap,S=new WeakMap,v=new WeakMap,f=new WeakSet,xe=function(c,k=null){const g=t(this,O).get(c);if(g)return g;const W=this.messageHandler.sendWithPromise(c,k);return t(this,O).set(c,W),W};class PDFObjects{constructor(){U(this,x);U(this,T,Object.create(null))}get(c,k=null){if(k){const W=Y(this,x,Be).call(this,c);return W.capability.promise.then(()=>k(W.data)),null}const g=t(this,T)[c];if(!(g!=null&&g.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${c}.`);return g.data}has(c){const k=t(this,T)[c];return(k==null?void 0:k.capability.settled)||!1}resolve(c,k=null){const g=Y(this,x,Be).call(this,c);g.data=k,g.capability.resolve()}clear(){var c;for(const k in t(this,T)){const{data:g}=t(this,T)[k];(c=g==null?void 0:g.bitmap)==null||c.close()}rt(this,T,Object.create(null))}}T=new WeakMap,x=new WeakSet,Be=function(c){var k;return(k=t(this,T))[c]||(k[c]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(c){U(this,l,null);rt(this,l,c),this.onContinue=null}get promise(){return t(this,l).capability.promise}cancel(c=0){t(this,l).cancel(null,c)}get separateAnnots(){const{separateAnnots:c}=t(this,l).operatorList;if(!c)return!1;const{annotationCanvasMap:k}=t(this,l);return c.form||c.canvas&&(k==null?void 0:k.size)>0}}l=new WeakMap,exports.RenderTask=RenderTask;const F=class F{constructor({callback:c,params:k,objs:g,commonObjs:W,annotationCanvasMap:$,operatorList:w,pageIndex:q,canvasFactory:it,filterFactory:at,useRequestAnimationFrame:V=!1,pdfBug:ct=!1,pageColors:mt=null}){this.callback=c,this.params=k,this.objs=g,this.commonObjs=W,this.annotationCanvasMap=$,this.operatorListIdx=null,this.operatorList=w,this._pageIndex=q,this.canvasFactory=it,this.filterFactory=at,this._pdfBug=ct,this.pageColors=mt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=V===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=k.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:c=!1,optionalContentConfig:k}){var q,it;if(this.cancelled)return;if(this._canvas){if(t(F,d).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(F,d).add(this._canvas)}this._pdfBug&&((q=globalThis.StepperManager)!=null&&q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:W,transform:$,background:w}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:k},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:$,viewport:W,transparency:c,background:w}),this.operatorListIdx=0,this.graphicsReady=!0,(it=this.graphicsReadyCallback)==null||it.call(this)}cancel(c=null,k=0){var g;this.running=!1,this.cancelled=!0,(g=this.gfx)==null||g.endDrawing(),t(F,d).delete(this._canvas),this.callback(c||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,k))}operatorListChanged(){var c;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(c=this.stepper)==null||c.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(F,d).delete(this._canvas),this.callback())))}};d=new WeakMap,U(F,d,new WeakSet);let InternalRenderTask=F;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(L,i,N)=>{var R,m,I,vn,C;Object.defineProperty(i,"__esModule",{value:!0}),i.SerializableEmpty=i.PrintAnnotationStorage=i.AnnotationStorage=void 0;var a=N(1),p=N(4),X=N(8);const G=Object.freeze({map:null,hash:"",transfers:void 0});i.SerializableEmpty=G;class ft{constructor(){U(this,I);U(this,R,!1);U(this,m,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(v,f){const A=t(this,m).get(v);return A===void 0?f:Object.assign(f,A)}getRawValue(v){return t(this,m).get(v)}remove(v){if(t(this,m).delete(v),t(this,m).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of t(this,m).values())if(f instanceof p.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(v,f){const A=t(this,m).get(v);let T=!1;if(A!==void 0)for(const[x,y]of Object.entries(f))A[x]!==y&&(T=!0,A[x]=y);else T=!0,t(this,m).set(v,f);T&&Y(this,I,vn).call(this),f instanceof p.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(v){return t(this,m).has(v)}getAll(){return t(this,m).size>0?(0,a.objectFromMap)(t(this,m)):null}setAll(v){for(const[f,A]of Object.entries(v))this.setValue(f,A)}get size(){return t(this,m).size}resetModified(){t(this,R)&&(rt(this,R,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new D(this)}get serializable(){if(t(this,m).size===0)return G;const v=new Map,f=new X.MurmurHash3_64,A=[],T=Object.create(null);let x=!1;for(const[y,l]of t(this,m)){const d=l instanceof p.AnnotationEditor?l.serialize(!1,T):l;d&&(v.set(y,d),f.update(`${y}:${JSON.stringify(d)}`),x||(x=!!d.bitmap))}if(x)for(const y of v.values())y.bitmap&&A.push(y.bitmap);return v.size>0?{map:v,hash:f.hexdigest(),transfers:A}:G}}R=new WeakMap,m=new WeakMap,I=new WeakSet,vn=function(){t(this,R)||(rt(this,R,!0),typeof this.onSetModified=="function"&&this.onSetModified())},i.AnnotationStorage=ft;class D extends ft{constructor(f){super();U(this,C,void 0);const{map:A,hash:T,transfers:x}=f.serializable,y=structuredClone(A,x?{transfer:x}:null);rt(this,C,{map:y,hash:T,transfers:x})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,C)}}C=new WeakMap,i.PrintAnnotationStorage=D},(L,i,N)=>{var D,R,m,I,O,C,S,v,f,A,T,x,y,l,d,Ue,b,He,k,We,W,Ge,w,En,it,Sn,V,wn,mt,Ve,xt,xn;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0;var a=N(5),p=N(1),X=N(6);const n=class n{constructor(s){U(this,d);U(this,b);U(this,W);U(this,w);U(this,it);U(this,V);U(this,mt);U(this,xt);U(this,D,"");U(this,R,!1);U(this,m,null);U(this,I,null);U(this,O,null);U(this,C,!1);U(this,S,null);U(this,v,this.focusin.bind(this));U(this,f,this.focusout.bind(this));U(this,A,!1);U(this,T,!1);U(this,x,!1);ne(this,"_initialOptions",Object.create(null));ne(this,"_uiManager",null);ne(this,"_focusEventsAllowed",!0);ne(this,"_l10nPromise",null);U(this,y,!1);U(this,l,n._zIndex++);this.constructor===n&&(0,p.unreachable)("Cannot initialize AnnotationEditor."),this.parent=s.parent,this.id=s.id,this.width=this.height=null,this.pageIndex=s.parent.pageIndex,this.name=s.name,this.div=null,this._uiManager=s.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=s.isCentered,this._structTreeParentId=null;const{rotation:h,rawDims:{pageWidth:u,pageHeight:E,pageX:M,pageY:H}}=this.parent.viewport;this.rotation=h,this.pageRotation=(360+h-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[u,E],this.pageTranslation=[M,H];const[st,Q]=this.parentDimensions;this.x=s.x/st,this.y=s.y/Q,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,p.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(s){const h=new ft({id:s.parent.getNextId(),parent:s.parent,uiManager:s._uiManager});h.annotationElementId=s.annotationElementId,h.deleted=!0,h._uiManager.addToAnnotationStorage(h)}static initialize(s,h=null){if(n._l10nPromise||(n._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(E=>[E,s.get(E)]))),h!=null&&h.strings)for(const E of h.strings)n._l10nPromise.set(E,s.get(E));if(n._borderLineWidth!==-1)return;const u=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(u.getPropertyValue("--outline-width"))||0}static updateDefaultParams(s,h){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(s){return!1}static paste(s,h){(0,p.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,y)}set _isDraggable(s){var h;rt(this,y,s),(h=this.div)==null||h.classList.toggle("draggable",s)}center(){const[s,h]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*h/(s*2),this.y+=this.width*s/(h*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*h/(s*2),this.y-=this.width*s/(h*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(s){this._uiManager.addCommands(s)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,l)}setParent(s){s!==null&&(this.pageIndex=s.pageIndex,this.pageDimensions=s.pageDimensions),this.parent=s}focusin(s){this._focusEventsAllowed&&(t(this,A)?rt(this,A,!1):this.parent.setSelected(this))}focusout(s){var u;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const h=s.relatedTarget;h!=null&&h.closest(`#${this.id}`)||(s.preventDefault(),(u=this.parent)!=null&&u.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(s,h,u,E){const[M,H]=this.parentDimensions;[u,E]=this.screenToPageTranslation(u,E),this.x=(s+u)/M,this.y=(h+E)/H,this.fixAndSetPosition()}translate(s,h){Y(this,d,Ue).call(this,this.parentDimensions,s,h)}translateInPage(s,h){Y(this,d,Ue).call(this,this.pageDimensions,s,h),this.div.scrollIntoView({block:"nearest"})}drag(s,h){const[u,E]=this.parentDimensions;if(this.x+=s/u,this.y+=h/E,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ot,y:ht}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ot,ht)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:M,y:H}=this;const[st,Q]=Y(this,b,He).call(this);M+=st,H+=Q,this.div.style.left=`${(100*M).toFixed(2)}%`,this.div.style.top=`${(100*H).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[s,h]=this.pageDimensions;let{x:u,y:E,width:M,height:H}=this;switch(M*=s,H*=h,u*=s,E*=h,this.rotation){case 0:u=Math.max(0,Math.min(s-M,u)),E=Math.max(0,Math.min(h-H,E));break;case 90:u=Math.max(0,Math.min(s-H,u)),E=Math.min(h,Math.max(M,E));break;case 180:u=Math.min(s,Math.max(M,u)),E=Math.min(h,Math.max(H,E));break;case 270:u=Math.min(s,Math.max(H,u)),E=Math.max(0,Math.min(h-M,E));break}this.x=u/=s,this.y=E/=h;const[st,Q]=Y(this,b,He).call(this);u+=st,E+=Q;const{style:ot}=this.div;ot.left=`${(100*u).toFixed(2)}%`,ot.top=`${(100*E).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(s,h){var u;return Y(u=n,k,We).call(u,s,h,this.parentRotation)}pageTranslationToScreen(s,h){var u;return Y(u=n,k,We).call(u,s,h,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:s,pageDimensions:[h,u]}=this,E=h*s,M=u*s;return p.FeatureTest.isCSSRoundSupported?[Math.round(E),Math.round(M)]:[E,M]}setDims(s,h){var M;const[u,E]=this.parentDimensions;this.div.style.width=`${(100*s/u).toFixed(2)}%`,t(this,C)||(this.div.style.height=`${(100*h/E).toFixed(2)}%`),(M=t(this,m))==null||M.classList.toggle("small",s<n.SMALL_EDITOR_SIZE||h<n.SMALL_EDITOR_SIZE)}fixDims(){const{style:s}=this.div,{height:h,width:u}=s,E=u.endsWith("%"),M=!t(this,C)&&h.endsWith("%");if(E&&M)return;const[H,st]=this.parentDimensions;E||(s.width=`${(100*parseFloat(u)/H).toFixed(2)}%`),!t(this,C)&&!M&&(s.height=`${(100*parseFloat(h)/st).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,m))return;const s=rt(this,m,document.createElement("button"));s.className="altText";const h=await n._l10nPromise.get("editor_alt_text_button_label");s.textContent=h,s.setAttribute("aria-label",h),s.tabIndex="0",s.addEventListener("contextmenu",X.noContextMenu),s.addEventListener("pointerdown",u=>u.stopPropagation()),s.addEventListener("click",u=>{u.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),s.addEventListener("keydown",u=>{u.target===s&&u.key==="Enter"&&(u.preventDefault(),this._uiManager.editAltText(this))}),Y(this,mt,Ve).call(this),this.div.append(s),n.SMALL_EDITOR_SIZE||(n.SMALL_EDITOR_SIZE=Math.min(128,Math.round(s.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,D),decorative:t(this,R)}}set altTextData({altText:s,decorative:h}){t(this,D)===s&&t(this,R)===h||(rt(this,D,s),rt(this,R,h),Y(this,mt,Ve).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,v)),this.div.addEventListener("focusout",t(this,f));const[s,h]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*h/s).toFixed(2)}%`,this.div.style.maxHeight=`${(100*s/h).toFixed(2)}%`);const[u,E]=this.getInitialTranslation();return this.translate(u,E),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(s){const{isMac:h}=p.FeatureTest.platform;if(s.button!==0||s.ctrlKey&&h){s.preventDefault();return}rt(this,A,!0),Y(this,xt,xn).call(this,s)}moveInDOM(){var s;(s=this.parent)==null||s.moveEditorInDOM(this)}_setParentAndPosition(s,h,u){s.changeParent(this),this.x=h,this.y=u,this.fixAndSetPosition()}getRect(s,h){const u=this.parentScale,[E,M]=this.pageDimensions,[H,st]=this.pageTranslation,Q=s/u,ot=h/u,ht=this.x*E,gt=this.y*M,dt=this.width*E,Pt=this.height*M;switch(this.rotation){case 0:return[ht+Q+H,M-gt-ot-Pt+st,ht+Q+dt+H,M-gt-ot+st];case 90:return[ht+ot+H,M-gt+Q+st,ht+ot+Pt+H,M-gt+Q+dt+st];case 180:return[ht-Q-dt+H,M-gt+ot+st,ht-Q+H,M-gt+ot+Pt+st];case 270:return[ht-ot-Pt+H,M-gt-Q-dt+st,ht-ot+H,M-gt-Q+st];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(s,h){const[u,E,M,H]=s,st=M-u,Q=H-E;switch(this.rotation){case 0:return[u,h-H,st,Q];case 90:return[u,h-E,Q,st];case 180:return[M,h-E,st,Q];case 270:return[M,h-H,Q,st];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){rt(this,x,!0)}disableEditMode(){rt(this,x,!1)}isInEditMode(){return t(this,x)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var s,h;(s=this.div)==null||s.addEventListener("focusin",t(this,v)),(h=this.div)==null||h.addEventListener("focusout",t(this,f))}serialize(s=!1,h=null){(0,p.unreachable)("An editor must be serializable")}static deserialize(s,h,u){const E=new this.prototype.constructor({parent:h,id:h.getNextId(),uiManager:u});E.rotation=s.rotation;const[M,H]=E.pageDimensions,[st,Q,ot,ht]=E.getRectInCurrentCoords(s.rect,H);return E.x=st/M,E.y=Q/H,E.width=ot/M,E.height=ht/H,E}remove(){var s;this.div.removeEventListener("focusin",t(this,v)),this.div.removeEventListener("focusout",t(this,f)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(s=t(this,m))==null||s.remove(),rt(this,m,null),rt(this,I,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Y(this,w,En).call(this),t(this,S).classList.remove("hidden"))}select(){var s;this.makeResizable(),(s=this.div)==null||s.classList.add("selectedEditor")}unselect(){var s,h,u;(s=t(this,S))==null||s.classList.add("hidden"),(h=this.div)==null||h.classList.remove("selectedEditor"),(u=this.div)!=null&&u.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(s,h){}disableEditing(){t(this,m)&&(t(this,m).hidden=!0)}enableEditing(){t(this,m)&&(t(this,m).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,T)}set isEditing(s){rt(this,T,s),this.parent&&(s?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(s,h){rt(this,C,!0);const u=s/h,{style:E}=this.div;E.aspectRatio=u,E.height="auto"}static get MIN_SIZE(){return 16}};D=new WeakMap,R=new WeakMap,m=new WeakMap,I=new WeakMap,O=new WeakMap,C=new WeakMap,S=new WeakMap,v=new WeakMap,f=new WeakMap,A=new WeakMap,T=new WeakMap,x=new WeakMap,y=new WeakMap,l=new WeakMap,d=new WeakSet,Ue=function([s,h],u,E){[u,E]=this.screenToPageTranslation(u,E),this.x+=u/s,this.y+=E/h,this.fixAndSetPosition()},b=new WeakSet,He=function(){const[s,h]=this.parentDimensions,{_borderLineWidth:u}=n,E=u/s,M=u/h;switch(this.rotation){case 90:return[-E,M];case 180:return[E,M];case 270:return[E,-M];default:return[-E,-M]}},k=new WeakSet,We=function(s,h,u){switch(u){case 90:return[h,-s];case 180:return[-s,-h];case 270:return[-h,s];default:return[s,h]}},W=new WeakSet,Ge=function(s){switch(s){case 90:{const[h,u]=this.pageDimensions;return[0,-h/u,u/h,0]}case 180:return[-1,0,0,-1];case 270:{const[h,u]=this.pageDimensions;return[0,h/u,-u/h,0]}default:return[1,0,0,1]}},w=new WeakSet,En=function(){if(t(this,S))return;rt(this,S,document.createElement("div")),t(this,S).classList.add("resizers");const s=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||s.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const h of s){const u=document.createElement("div");t(this,S).append(u),u.classList.add("resizer",h),u.addEventListener("pointerdown",Y(this,it,Sn).bind(this,h)),u.addEventListener("contextmenu",X.noContextMenu)}this.div.prepend(t(this,S))},it=new WeakSet,Sn=function(s,h){h.preventDefault();const{isMac:u}=p.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&u)return;const E=Y(this,V,wn).bind(this,s),M=this._isDraggable;this._isDraggable=!1;const H={passive:!0,capture:!0};window.addEventListener("pointermove",E,H);const st=this.x,Q=this.y,ot=this.width,ht=this.height,gt=this.parent.div.style.cursor,dt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(h.target).cursor;const Pt=()=>{this._isDraggable=M,window.removeEventListener("pointerup",Pt),window.removeEventListener("blur",Pt),window.removeEventListener("pointermove",E,H),this.parent.div.style.cursor=gt,this.div.style.cursor=dt;const It=this.x,Et=this.y,Lt=this.width,bt=this.height;It===st&&Et===Q&&Lt===ot&&bt===ht||this.addCommands({cmd:()=>{this.width=Lt,this.height=bt,this.x=It,this.y=Et;const[nt,tt]=this.parentDimensions;this.setDims(nt*Lt,tt*bt),this.fixAndSetPosition()},undo:()=>{this.width=ot,this.height=ht,this.x=st,this.y=Q;const[nt,tt]=this.parentDimensions;this.setDims(nt*ot,tt*ht),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Pt),window.addEventListener("blur",Pt)},V=new WeakSet,wn=function(s,h){const[u,E]=this.parentDimensions,M=this.x,H=this.y,st=this.width,Q=this.height,ot=n.MIN_SIZE/u,ht=n.MIN_SIZE/E,gt=At=>Math.round(At*1e4)/1e4,dt=Y(this,W,Ge).call(this,this.rotation),Pt=(At,vt)=>[dt[0]*At+dt[2]*vt,dt[1]*At+dt[3]*vt],It=Y(this,W,Ge).call(this,360-this.rotation),Et=(At,vt)=>[It[0]*At+It[2]*vt,It[1]*At+It[3]*vt];let Lt,bt,nt=!1,tt=!1;switch(s){case"topLeft":nt=!0,Lt=(At,vt)=>[0,0],bt=(At,vt)=>[At,vt];break;case"topMiddle":Lt=(At,vt)=>[At/2,0],bt=(At,vt)=>[At/2,vt];break;case"topRight":nt=!0,Lt=(At,vt)=>[At,0],bt=(At,vt)=>[0,vt];break;case"middleRight":tt=!0,Lt=(At,vt)=>[At,vt/2],bt=(At,vt)=>[0,vt/2];break;case"bottomRight":nt=!0,Lt=(At,vt)=>[At,vt],bt=(At,vt)=>[0,0];break;case"bottomMiddle":Lt=(At,vt)=>[At/2,vt],bt=(At,vt)=>[At/2,0];break;case"bottomLeft":nt=!0,Lt=(At,vt)=>[0,vt],bt=(At,vt)=>[At,0];break;case"middleLeft":tt=!0,Lt=(At,vt)=>[0,vt/2],bt=(At,vt)=>[At,vt/2];break}const pt=Lt(st,Q),Tt=bt(st,Q);let Ct=Pt(...Tt);const Ht=gt(M+Ct[0]),$t=gt(H+Ct[1]);let Wt=1,Gt=1,[zt,Ut]=this.screenToPageTranslation(h.movementX,h.movementY);if([zt,Ut]=Et(zt/u,Ut/E),nt){const At=Math.hypot(st,Q);Wt=Gt=Math.max(Math.min(Math.hypot(Tt[0]-pt[0]-zt,Tt[1]-pt[1]-Ut)/At,1/st,1/Q),ot/st,ht/Q)}else tt?Wt=Math.max(ot,Math.min(1,Math.abs(Tt[0]-pt[0]-zt)))/st:Gt=Math.max(ht,Math.min(1,Math.abs(Tt[1]-pt[1]-Ut)))/Q;const Yt=gt(st*Wt),ut=gt(Q*Gt);Ct=Pt(...bt(Yt,ut));const et=Ht-Ct[0],K=$t-Ct[1];this.width=Yt,this.height=ut,this.x=et,this.y=K,this.setDims(u*Yt,E*ut),this.fixAndSetPosition()},mt=new WeakSet,Ve=async function(){var u;const s=t(this,m);if(!s)return;if(!t(this,D)&&!t(this,R)){s.classList.remove("done"),(u=t(this,I))==null||u.remove();return}n._l10nPromise.get("editor_alt_text_edit_button_label").then(E=>{s.setAttribute("aria-label",E)});let h=t(this,I);if(!h){rt(this,I,h=document.createElement("span")),h.className="tooltip",h.setAttribute("role","tooltip");const E=h.id=`alt-text-tooltip-${this.id}`;s.setAttribute("aria-describedby",E);const M=100;s.addEventListener("mouseenter",()=>{rt(this,O,setTimeout(()=>{rt(this,O,null),t(this,I).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},M))}),s.addEventListener("mouseleave",()=>{var H;clearTimeout(t(this,O)),rt(this,O,null),(H=t(this,I))==null||H.classList.remove("show")})}s.classList.add("done"),h.innerText=t(this,R)?await n._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,D),h.parentNode||s.append(h)},xt=new WeakSet,xn=function(s){if(!this._isDraggable)return;const h=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let u,E;h&&(u={passive:!0,capture:!0},E=H=>{const[st,Q]=this.screenToPageTranslation(H.movementX,H.movementY);this._uiManager.dragSelectedEditors(st,Q)},window.addEventListener("pointermove",E,u));const M=()=>{if(window.removeEventListener("pointerup",M),window.removeEventListener("blur",M),h&&window.removeEventListener("pointermove",E,u),rt(this,A,!1),!this._uiManager.endDragSession()){const{isMac:H}=p.FeatureTest.platform;s.ctrlKey&&!H||s.shiftKey||s.metaKey&&H?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",M),window.addEventListener("blur",M)},U(n,k),ne(n,"_borderLineWidth",-1),ne(n,"_colorManager",new a.ColorManager),ne(n,"_zIndex",1),ne(n,"SMALL_EDITOR_SIZE",0);let G=n;i.AnnotationEditor=G;class ft extends G{constructor(s){super(s),this.annotationElementId=s.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(L,i,N)=>{var C,S,v,f,A,$e,y,l,d,F,b,Tn,g,W,$,w,q,it,at,V,ct,mt,St,xt,P,n,o,s,h,u,E,M,H,st,Q,ot,ht,gt,dt,Pt,It,Et,Lt,bt,nt,tt,pt,Cn,Ct,ze,$t,Xe,Gt,Te,Ut,qe,ut,Ye,K,ae,vt,be,te,Pn,wt,Rn,Rt,Ke,Bt,_e,yt,Je;Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=X,i.opacityToHex=G;var a=N(1),p=N(6);function X(j,e,_){for(const B of _)e.addEventListener(B,j[B].bind(j))}function G(j){return Math.round(Math.min(255,Math.max(1,255*j))).toString(16).padStart(2,"0")}class ft{constructor(){U(this,C,0)}getId(){return`${a.AnnotationEditorPrefix}${me(this,C)._++}`}}C=new WeakMap;const x=class x{constructor(){U(this,A);U(this,S,(0,a.getUuid)());U(this,v,0);U(this,f,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',B=new OffscreenCanvas(1,3).getContext("2d"),z=new Image;z.src=e;const J=z.decode().then(()=>(B.drawImage(z,0,0,1,1,0,0,1,3),new Uint32Array(B.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",J)}async getFromFile(e){const{lastModified:_,name:B,size:z,type:J}=e;return Y(this,A,$e).call(this,`${_}_${B}_${z}_${J}`,e)}async getFromUrl(e){return Y(this,A,$e).call(this,e,e)}async getFromId(e){t(this,f)||rt(this,f,new Map);const _=t(this,f).get(e);return _?_.bitmap?(_.refCounter+=1,_):_.file?this.getFromFile(_.file):this.getFromUrl(_.url):null}getSvgUrl(e){const _=t(this,f).get(e);return _!=null&&_.isSvg?_.svgUrl:null}deleteId(e){t(this,f)||rt(this,f,new Map);const _=t(this,f).get(e);_&&(_.refCounter-=1,_.refCounter===0&&(_.bitmap=null))}isValidId(e){return e.startsWith(`image_${t(this,S)}_`)}};S=new WeakMap,v=new WeakMap,f=new WeakMap,A=new WeakSet,$e=async function(e,_){t(this,f)||rt(this,f,new Map);let B=t(this,f).get(e);if(B===null)return null;if(B!=null&&B.bitmap)return B.refCounter+=1,B;try{B||(B={bitmap:null,id:`image_${t(this,S)}_${me(this,v)._++}`,refCounter:0,isSvg:!1});let z;if(typeof _=="string"){B.url=_;const J=await fetch(_);if(!J.ok)throw new Error(J.statusText);z=await J.blob()}else z=B.file=_;if(z.type==="image/svg+xml"){const J=x._isSVGFittingCanvas,lt=new FileReader,_t=new Image,Mt=new Promise((kt,Xt)=>{_t.onload=()=>{B.bitmap=_t,B.isSvg=!0,kt()},lt.onload=async()=>{const Ft=B.svgUrl=lt.result;_t.src=await J?`${Ft}#svgView(preserveAspectRatio(none))`:Ft},_t.onerror=lt.onerror=Xt});lt.readAsDataURL(z),await Mt}else B.bitmap=await createImageBitmap(z);B.refCounter=1}catch(z){console.error(z),B=null}return t(this,f).set(e,B),B&&t(this,f).set(B.id,B),B};let D=x;class R{constructor(e=128){U(this,y,[]);U(this,l,!1);U(this,d,void 0);U(this,F,-1);rt(this,d,e)}add({cmd:e,undo:_,mustExec:B,type:z=NaN,overwriteIfSameType:J=!1,keepUndo:lt=!1}){if(B&&e(),t(this,l))return;const _t={cmd:e,undo:_,type:z};if(t(this,F)===-1){t(this,y).length>0&&(t(this,y).length=0),rt(this,F,0),t(this,y).push(_t);return}if(J&&t(this,y)[t(this,F)].type===z){lt&&(_t.undo=t(this,y)[t(this,F)].undo),t(this,y)[t(this,F)]=_t;return}const Mt=t(this,F)+1;Mt===t(this,d)?t(this,y).splice(0,1):(rt(this,F,Mt),Mt<t(this,y).length&&t(this,y).splice(Mt)),t(this,y).push(_t)}undo(){t(this,F)!==-1&&(rt(this,l,!0),t(this,y)[t(this,F)].undo(),rt(this,l,!1),rt(this,F,t(this,F)-1))}redo(){t(this,F)<t(this,y).length-1&&(rt(this,F,t(this,F)+1),rt(this,l,!0),t(this,y)[t(this,F)].cmd(),rt(this,l,!1))}hasSomethingToUndo(){return t(this,F)!==-1}hasSomethingToRedo(){return t(this,F)<t(this,y).length-1}destroy(){rt(this,y,null)}}y=new WeakMap,l=new WeakMap,d=new WeakMap,F=new WeakMap,i.CommandManager=R;class m{constructor(e){U(this,b);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:_}=a.FeatureTest.platform;for(const[B,z,J={}]of e)for(const lt of B){const _t=lt.startsWith("mac+");_&&_t?(this.callbacks.set(lt.slice(4),{callback:z,options:J}),this.allKeys.add(lt.split("+").at(-1))):!_&&!_t&&(this.callbacks.set(lt,{callback:z,options:J}),this.allKeys.add(lt.split("+").at(-1)))}}exec(e,_){if(!this.allKeys.has(_.key))return;const B=this.callbacks.get(Y(this,b,Tn).call(this,_));if(!B)return;const{callback:z,options:{bubbles:J=!1,args:lt=[],checker:_t=null}}=B;_t&&!_t(e,_)||(z.bind(e,...lt)(),J||(_.stopPropagation(),_.preventDefault()))}}b=new WeakSet,Tn=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const _=this.buffer.join("+");return this.buffer.length=0,_},i.KeyboardManager=m;const k=class k{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,p.getColorValues)(e),(0,a.shadow)(this,"_colors",e)}convert(e){const _=(0,p.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return _;for(const[B,z]of this._colors)if(z.every((J,lt)=>J===_[lt]))return k._colorsMapping.get(B);return _}getHexCode(e){const _=this._colors.get(e);return _?a.Util.makeHexColor(..._):e}};ne(k,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let I=k;i.ColorManager=I;const Ot=class Ot{constructor(e,_,B,z,J,lt){U(this,pt);U(this,Ct);U(this,$t);U(this,Gt);U(this,Ut);U(this,ut);U(this,K);U(this,vt);U(this,te);U(this,wt);U(this,Rt);U(this,Bt);U(this,yt);U(this,g,null);U(this,W,new Map);U(this,$,new Map);U(this,w,null);U(this,q,null);U(this,it,new R);U(this,at,0);U(this,V,new Set);U(this,ct,null);U(this,mt,null);U(this,St,new Set);U(this,xt,null);U(this,P,new ft);U(this,n,!1);U(this,o,!1);U(this,s,null);U(this,h,a.AnnotationEditorType.NONE);U(this,u,new Set);U(this,E,null);U(this,M,this.blur.bind(this));U(this,H,this.focus.bind(this));U(this,st,this.copy.bind(this));U(this,Q,this.cut.bind(this));U(this,ot,this.paste.bind(this));U(this,ht,this.keydown.bind(this));U(this,gt,this.onEditingAction.bind(this));U(this,dt,this.onPageChanging.bind(this));U(this,Pt,this.onScaleChanging.bind(this));U(this,It,this.onRotationChanging.bind(this));U(this,Et,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});U(this,Lt,[0,0]);U(this,bt,null);U(this,nt,null);U(this,tt,null);rt(this,nt,e),rt(this,tt,_),rt(this,w,B),this._eventBus=z,this._eventBus._on("editingaction",t(this,gt)),this._eventBus._on("pagechanging",t(this,dt)),this._eventBus._on("scalechanging",t(this,Pt)),this._eventBus._on("rotationchanging",t(this,It)),rt(this,q,J.annotationStorage),rt(this,xt,J.filterFactory),rt(this,E,lt),this.viewParameters={realScale:p.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const e=Ot.prototype,_=J=>{const{activeElement:lt}=document;return lt&&t(J,nt).contains(lt)&&J.hasSomethingToControl()},B=this.TRANSLATE_SMALL,z=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new m([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-B,0],checker:_}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-z,0],checker:_}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[B,0],checker:_}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[z,0],checker:_}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-B],checker:_}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-z],checker:_}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,B],checker:_}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,z],checker:_}]]))}destroy(){Y(this,Gt,Te).call(this),Y(this,Ct,ze).call(this),this._eventBus._off("editingaction",t(this,gt)),this._eventBus._off("pagechanging",t(this,dt)),this._eventBus._off("scalechanging",t(this,Pt)),this._eventBus._off("rotationchanging",t(this,It));for(const e of t(this,$).values())e.destroy();t(this,$).clear(),t(this,W).clear(),t(this,St).clear(),rt(this,g,null),t(this,u).clear(),t(this,it).destroy(),t(this,w).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",t(this,E)?t(this,xt).addHCMFilter(t(this,E).foreground,t(this,E).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(t(this,nt)).direction)}editAltText(e){var _;(_=t(this,w))==null||_.editAltText(this,e)}onPageChanging({pageNumber:e}){rt(this,at,e-1)}focusMainContainer(){t(this,nt).focus()}findParent(e,_){for(const B of t(this,$).values()){const{x:z,y:J,width:lt,height:_t}=B.div.getBoundingClientRect();if(e>=z&&e<=z+lt&&_>=J&&_<=J+_t)return B}return null}disableUserSelect(e=!1){t(this,tt).classList.toggle("noUserSelect",e)}addShouldRescale(e){t(this,St).add(e)}removeShouldRescale(e){t(this,St).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*p.PixelsPerInch.PDF_TO_CSS_UNITS;for(const _ of t(this,St))_.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&t(this,q)&&!t(this,q).has(e.id)&&t(this,q).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const _ of t(this,u))if(_.div.contains(e)){rt(this,s,[_,e]),_._focusEventsAllowed=!1;break}}focus(){if(!t(this,s))return;const[e,_]=t(this,s);rt(this,s,null),_.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),_.focus()}addEditListeners(){Y(this,$t,Xe).call(this),Y(this,Ut,qe).call(this)}removeEditListeners(){Y(this,Gt,Te).call(this),Y(this,ut,Ye).call(this)}copy(e){var B;if(e.preventDefault(),(B=t(this,g))==null||B.commitOrRemove(),!this.hasSelection)return;const _=[];for(const z of t(this,u)){const J=z.serialize(!0);J&&_.push(J)}_.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(_))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:_}=e;for(const J of _.items)for(const lt of t(this,mt))if(lt.isHandlingMimeForPasting(J.type)){lt.paste(J,this.currentLayer);return}let B=_.getData("application/pdfjs");if(!B)return;try{B=JSON.parse(B)}catch(J){(0,a.warn)(`paste: "${J.message}".`);return}if(!Array.isArray(B))return;this.unselectAll();const z=this.currentLayer;try{const J=[];for(const Mt of B){const kt=z.deserialize(Mt);if(!kt)return;J.push(kt)}const lt=()=>{for(const Mt of J)Y(this,Rt,Ke).call(this,Mt);Y(this,yt,Je).call(this,J)},_t=()=>{for(const Mt of J)Mt.remove()};this.addCommands({cmd:lt,undo:_t,mustExec:!0})}catch(J){(0,a.warn)(`paste: "${J.message}".`)}}keydown(e){var _;(_=this.getActive())!=null&&_.shouldGetKeyboardEvents()||Ot._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(Y(this,pt,Cn).call(this),Y(this,$t,Xe).call(this),Y(this,Ut,qe).call(this),Y(this,K,ae).call(this,{isEditing:t(this,h)!==a.AnnotationEditorType.NONE,isEmpty:Y(this,Bt,_e).call(this),hasSomethingToUndo:t(this,it).hasSomethingToUndo(),hasSomethingToRedo:t(this,it).hasSomethingToRedo(),hasSelectedEditor:!1})):(Y(this,Ct,ze).call(this),Y(this,Gt,Te).call(this),Y(this,ut,Ye).call(this),Y(this,K,ae).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!t(this,mt)){rt(this,mt,e);for(const _ of t(this,mt))Y(this,vt,be).call(this,_.defaultPropertiesToUpdate)}}getId(){return t(this,P).getId()}get currentLayer(){return t(this,$).get(t(this,at))}getLayer(e){return t(this,$).get(e)}get currentPageIndex(){return t(this,at)}addLayer(e){t(this,$).set(e.pageIndex,e),t(this,n)?e.enable():e.disable()}removeLayer(e){t(this,$).delete(e.pageIndex)}updateMode(e,_=null){if(t(this,h)!==e){if(rt(this,h,e),e===a.AnnotationEditorType.NONE){this.setEditingState(!1),Y(this,wt,Rn).call(this);return}this.setEditingState(!0),Y(this,te,Pn).call(this),this.unselectAll();for(const B of t(this,$).values())B.updateMode(e);if(_){for(const B of t(this,W).values())if(B.annotationElementId===_){this.setSelected(B),B.enterInEditMode();break}}}}updateToolbar(e){e!==t(this,h)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,_){if(t(this,mt)){if(e===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(e);return}for(const B of t(this,u))B.updateParams(e,_);for(const B of t(this,mt))B.updateDefaultParams(e,_)}}enableWaiting(e=!1){if(t(this,o)!==e){rt(this,o,e);for(const _ of t(this,$).values())e?_.disableClick():_.enableClick(),_.div.classList.toggle("waiting",e)}}getEditors(e){const _=[];for(const B of t(this,W).values())B.pageIndex===e&&_.push(B);return _}getEditor(e){return t(this,W).get(e)}addEditor(e){t(this,W).set(e.id,e)}removeEditor(e){var _;t(this,W).delete(e.id),this.unselect(e),(!e.annotationElementId||!t(this,V).has(e.annotationElementId))&&((_=t(this,q))==null||_.remove(e.id))}addDeletedAnnotationElement(e){t(this,V).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return t(this,V).has(e)}removeDeletedAnnotationElement(e){t(this,V).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){t(this,g)!==e&&(rt(this,g,e),e&&Y(this,vt,be).call(this,e.propertiesToUpdate))}toggleSelected(e){if(t(this,u).has(e)){t(this,u).delete(e),e.unselect(),Y(this,K,ae).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,u).add(e),e.select(),Y(this,vt,be).call(this,e.propertiesToUpdate),Y(this,K,ae).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const _ of t(this,u))_!==e&&_.unselect();t(this,u).clear(),t(this,u).add(e),e.select(),Y(this,vt,be).call(this,e.propertiesToUpdate),Y(this,K,ae).call(this,{hasSelectedEditor:!0})}isSelected(e){return t(this,u).has(e)}unselect(e){e.unselect(),t(this,u).delete(e),Y(this,K,ae).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,u).size!==0}undo(){t(this,it).undo(),Y(this,K,ae).call(this,{hasSomethingToUndo:t(this,it).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Y(this,Bt,_e).call(this)})}redo(){t(this,it).redo(),Y(this,K,ae).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,it).hasSomethingToRedo(),isEmpty:Y(this,Bt,_e).call(this)})}addCommands(e){t(this,it).add(e),Y(this,K,ae).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Y(this,Bt,_e).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...t(this,u)],_=()=>{for(const z of e)z.remove()},B=()=>{for(const z of e)Y(this,Rt,Ke).call(this,z)};this.addCommands({cmd:_,undo:B,mustExec:!0})}commitOrRemove(){var e;(e=t(this,g))==null||e.commitOrRemove()}hasSomethingToControl(){return t(this,g)||this.hasSelection}selectAll(){for(const e of t(this,u))e.commit();Y(this,yt,Je).call(this,t(this,W).values())}unselectAll(){if(t(this,g)){t(this,g).commitOrRemove();return}if(this.hasSelection){for(const e of t(this,u))e.unselect();t(this,u).clear(),Y(this,K,ae).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,_,B=!1){if(B||this.commitOrRemove(),!this.hasSelection)return;t(this,Lt)[0]+=e,t(this,Lt)[1]+=_;const[z,J]=t(this,Lt),lt=[...t(this,u)],_t=1e3;t(this,bt)&&clearTimeout(t(this,bt)),rt(this,bt,setTimeout(()=>{rt(this,bt,null),t(this,Lt)[0]=t(this,Lt)[1]=0,this.addCommands({cmd:()=>{for(const Mt of lt)t(this,W).has(Mt.id)&&Mt.translateInPage(z,J)},undo:()=>{for(const Mt of lt)t(this,W).has(Mt.id)&&Mt.translateInPage(-z,-J)},mustExec:!1})},_t));for(const Mt of lt)Mt.translateInPage(e,_)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),rt(this,ct,new Map);for(const e of t(this,u))t(this,ct).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,ct))return!1;this.disableUserSelect(!1);const e=t(this,ct);rt(this,ct,null);let _=!1;for(const[{x:z,y:J,pageIndex:lt},_t]of e)_t.newX=z,_t.newY=J,_t.newPageIndex=lt,_||(_=z!==_t.savedX||J!==_t.savedY||lt!==_t.savedPageIndex);if(!_)return!1;const B=(z,J,lt,_t)=>{if(t(this,W).has(z.id)){const Mt=t(this,$).get(_t);Mt?z._setParentAndPosition(Mt,J,lt):(z.pageIndex=_t,z.x=J,z.y=lt)}};return this.addCommands({cmd:()=>{for(const[z,{newX:J,newY:lt,newPageIndex:_t}]of e)B(z,J,lt,_t)},undo:()=>{for(const[z,{savedX:J,savedY:lt,savedPageIndex:_t}]of e)B(z,J,lt,_t)},mustExec:!0}),!0}dragSelectedEditors(e,_){if(t(this,ct))for(const B of t(this,ct).keys())B.drag(e,_)}rebuild(e){if(e.parent===null){const _=this.getLayer(e.pageIndex);_?(_.changeParent(e),_.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return t(this,g)===e}getActive(){return t(this,g)}getMode(){return t(this,h)}get imageManager(){return(0,a.shadow)(this,"imageManager",new D)}};g=new WeakMap,W=new WeakMap,$=new WeakMap,w=new WeakMap,q=new WeakMap,it=new WeakMap,at=new WeakMap,V=new WeakMap,ct=new WeakMap,mt=new WeakMap,St=new WeakMap,xt=new WeakMap,P=new WeakMap,n=new WeakMap,o=new WeakMap,s=new WeakMap,h=new WeakMap,u=new WeakMap,E=new WeakMap,M=new WeakMap,H=new WeakMap,st=new WeakMap,Q=new WeakMap,ot=new WeakMap,ht=new WeakMap,gt=new WeakMap,dt=new WeakMap,Pt=new WeakMap,It=new WeakMap,Et=new WeakMap,Lt=new WeakMap,bt=new WeakMap,nt=new WeakMap,tt=new WeakMap,pt=new WeakSet,Cn=function(){window.addEventListener("focus",t(this,H)),window.addEventListener("blur",t(this,M))},Ct=new WeakSet,ze=function(){window.removeEventListener("focus",t(this,H)),window.removeEventListener("blur",t(this,M))},$t=new WeakSet,Xe=function(){window.addEventListener("keydown",t(this,ht),{capture:!0})},Gt=new WeakSet,Te=function(){window.removeEventListener("keydown",t(this,ht),{capture:!0})},Ut=new WeakSet,qe=function(){document.addEventListener("copy",t(this,st)),document.addEventListener("cut",t(this,Q)),document.addEventListener("paste",t(this,ot))},ut=new WeakSet,Ye=function(){document.removeEventListener("copy",t(this,st)),document.removeEventListener("cut",t(this,Q)),document.removeEventListener("paste",t(this,ot))},K=new WeakSet,ae=function(e){Object.entries(e).some(([B,z])=>t(this,Et)[B]!==z)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,Et),e)})},vt=new WeakSet,be=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},te=new WeakSet,Pn=function(){if(!t(this,n)){rt(this,n,!0);for(const e of t(this,$).values())e.enable()}},wt=new WeakSet,Rn=function(){if(this.unselectAll(),t(this,n)){rt(this,n,!1);for(const e of t(this,$).values())e.disable()}},Rt=new WeakSet,Ke=function(e){const _=t(this,$).get(e.pageIndex);_?_.addOrRebuild(e):this.addEditor(e)},Bt=new WeakSet,_e=function(){if(t(this,W).size===0)return!0;if(t(this,W).size===1)for(const e of t(this,W).values())return e.isEmpty();return!1},yt=new WeakSet,Je=function(e){t(this,u).clear();for(const _ of e)_.isEmpty()||(t(this,u).add(_),_.select());Y(this,K,ae).call(this,{hasSelectedEditor:!0})},ne(Ot,"TRANSLATE_SMALL",1),ne(Ot,"TRANSLATE_BIG",10);let O=Ot;i.AnnotationEditorUIManager=O},(L,i,N)=>{var at,V,ct,mt,St,xt,P,n,o,s,h,u,ue,M,fe,st,Qe,ot,Ce,gt,Pe,Pt,Ae,Et,ye;Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMFilterFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=void 0,i.deprecated=F,i.getColorValues=W,i.getCurrentTransform=$,i.getCurrentTransformInverse=w,i.getFilenameFromUrl=A,i.getPdfFilenameFromUrl=T,i.getRGB=g,i.getXfaPageViewport=k,i.isDataScheme=v,i.isPdfFile=f,i.isValidFetchUrl=y,i.loadScript=d,i.noContextMenu=l,i.setLayerDimensions=q;var a=N(7),p=N(1);const X="http://www.w3.org/2000/svg",it=class it{};ne(it,"CSS",96),ne(it,"PDF",72),ne(it,"PDF_TO_CSS_UNITS",it.CSS/it.PDF);let G=it;i.PixelsPerInch=G;class ft extends a.BaseFilterFactory{constructor({docId:tt,ownerDocument:pt=globalThis.document}={}){super();U(this,u);U(this,M);U(this,st);U(this,ot);U(this,gt);U(this,Pt);U(this,Et);U(this,at,void 0);U(this,V,void 0);U(this,ct,void 0);U(this,mt,void 0);U(this,St,void 0);U(this,xt,void 0);U(this,P,void 0);U(this,n,void 0);U(this,o,void 0);U(this,s,void 0);U(this,h,0);rt(this,ct,tt),rt(this,mt,pt)}addFilter(tt){if(!tt)return"none";let pt=t(this,u,ue).get(tt);if(pt)return pt;let Tt,Ct,Ht,$t;if(tt.length===1){const Ut=tt[0],Yt=new Array(256);for(let ut=0;ut<256;ut++)Yt[ut]=Ut[ut]/255;$t=Tt=Ct=Ht=Yt.join(",")}else{const[Ut,Yt,ut]=tt,et=new Array(256),K=new Array(256),At=new Array(256);for(let vt=0;vt<256;vt++)et[vt]=Ut[vt]/255,K[vt]=Yt[vt]/255,At[vt]=ut[vt]/255;Tt=et.join(","),Ct=K.join(","),Ht=At.join(","),$t=`${Tt}${Ct}${Ht}`}if(pt=t(this,u,ue).get($t),pt)return t(this,u,ue).set(tt,pt),pt;const Wt=`g_${t(this,ct)}_transfer_map_${me(this,h)._++}`,Gt=`url(#${Wt})`;t(this,u,ue).set(tt,Gt),t(this,u,ue).set($t,Gt);const zt=Y(this,ot,Ce).call(this,Wt);return Y(this,Pt,Ae).call(this,Tt,Ct,Ht,zt),Gt}addHCMFilter(tt,pt){var Yt;const Tt=`${tt}-${pt}`;if(t(this,xt)===Tt)return t(this,P);if(rt(this,xt,Tt),rt(this,P,"none"),(Yt=t(this,St))==null||Yt.remove(),!tt||!pt)return t(this,P);const Ct=Y(this,Et,ye).call(this,tt);tt=p.Util.makeHexColor(...Ct);const Ht=Y(this,Et,ye).call(this,pt);if(pt=p.Util.makeHexColor(...Ht),t(this,M,fe).style.color="",tt==="#000000"&&pt==="#ffffff"||tt===pt)return t(this,P);const $t=new Array(256);for(let ut=0;ut<=255;ut++){const et=ut/255;$t[ut]=et<=.03928?et/12.92:((et+.055)/1.055)**2.4}const Wt=$t.join(","),Gt=`g_${t(this,ct)}_hcm_filter`,zt=rt(this,n,Y(this,ot,Ce).call(this,Gt));Y(this,Pt,Ae).call(this,Wt,Wt,Wt,zt),Y(this,st,Qe).call(this,zt);const Ut=(ut,et)=>{const K=Ct[ut]/255,At=Ht[ut]/255,vt=new Array(et+1);for(let ee=0;ee<=et;ee++)vt[ee]=K+ee/et*(At-K);return vt.join(",")};return Y(this,Pt,Ae).call(this,Ut(0,5),Ut(1,5),Ut(2,5),zt),rt(this,P,`url(#${Gt})`),t(this,P)}addHighlightHCMFilter(tt,pt,Tt,Ct){var At;const Ht=`${tt}-${pt}-${Tt}-${Ct}`;if(t(this,o)===Ht)return t(this,s);if(rt(this,o,Ht),rt(this,s,"none"),(At=t(this,n))==null||At.remove(),!tt||!pt)return t(this,s);const[$t,Wt]=[tt,pt].map(Y(this,Et,ye).bind(this));let Gt=Math.round(.2126*$t[0]+.7152*$t[1]+.0722*$t[2]),zt=Math.round(.2126*Wt[0]+.7152*Wt[1]+.0722*Wt[2]),[Ut,Yt]=[Tt,Ct].map(Y(this,Et,ye).bind(this));zt<Gt&&([Gt,zt,Ut,Yt]=[zt,Gt,Yt,Ut]),t(this,M,fe).style.color="";const ut=(vt,ee,te)=>{const Z=new Array(256),wt=(zt-Gt)/te,Nt=vt/255,Rt=(ee-vt)/(255*te);let jt=0;for(let Bt=0;Bt<=te;Bt++){const Qt=Math.round(Gt+Bt*wt),yt=Nt+Bt*Rt;for(let Kt=jt;Kt<=Qt;Kt++)Z[Kt]=yt;jt=Qt+1}for(let Bt=jt;Bt<256;Bt++)Z[Bt]=Z[jt-1];return Z.join(",")},et=`g_${t(this,ct)}_hcm_highlight_filter`,K=rt(this,n,Y(this,ot,Ce).call(this,et));return Y(this,st,Qe).call(this,K),Y(this,Pt,Ae).call(this,ut(Ut[0],Yt[0],5),ut(Ut[1],Yt[1],5),ut(Ut[2],Yt[2],5),K),rt(this,s,`url(#${et})`),t(this,s)}destroy(tt=!1){tt&&(t(this,P)||t(this,s))||(t(this,V)&&(t(this,V).parentNode.parentNode.remove(),rt(this,V,null)),t(this,at)&&(t(this,at).clear(),rt(this,at,null)),rt(this,h,0))}}at=new WeakMap,V=new WeakMap,ct=new WeakMap,mt=new WeakMap,St=new WeakMap,xt=new WeakMap,P=new WeakMap,n=new WeakMap,o=new WeakMap,s=new WeakMap,h=new WeakMap,u=new WeakSet,ue=function(){return t(this,at)||rt(this,at,new Map)},M=new WeakSet,fe=function(){if(!t(this,V)){const tt=t(this,mt).createElement("div"),{style:pt}=tt;pt.visibility="hidden",pt.contain="strict",pt.width=pt.height=0,pt.position="absolute",pt.top=pt.left=0,pt.zIndex=-1;const Tt=t(this,mt).createElementNS(X,"svg");Tt.setAttribute("width",0),Tt.setAttribute("height",0),rt(this,V,t(this,mt).createElementNS(X,"defs")),tt.append(Tt),Tt.append(t(this,V)),t(this,mt).body.append(tt)}return t(this,V)},st=new WeakSet,Qe=function(tt){const pt=t(this,mt).createElementNS(X,"feColorMatrix");pt.setAttribute("type","matrix"),pt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),tt.append(pt)},ot=new WeakSet,Ce=function(tt){const pt=t(this,mt).createElementNS(X,"filter");return pt.setAttribute("color-interpolation-filters","sRGB"),pt.setAttribute("id",tt),t(this,M,fe).append(pt),pt},gt=new WeakSet,Pe=function(tt,pt,Tt){const Ct=t(this,mt).createElementNS(X,pt);Ct.setAttribute("type","discrete"),Ct.setAttribute("tableValues",Tt),tt.append(Ct)},Pt=new WeakSet,Ae=function(tt,pt,Tt,Ct){const Ht=t(this,mt).createElementNS(X,"feComponentTransfer");Ct.append(Ht),Y(this,gt,Pe).call(this,Ht,"feFuncR",tt),Y(this,gt,Pe).call(this,Ht,"feFuncG",pt),Y(this,gt,Pe).call(this,Ht,"feFuncB",Tt)},Et=new WeakSet,ye=function(tt){return t(this,M,fe).style.color=tt,g(getComputedStyle(t(this,M,fe)).getPropertyValue("color"))},i.DOMFilterFactory=ft;class D extends a.BaseCanvasFactory{constructor({ownerDocument:nt=globalThis.document}={}){super(),this._document=nt}_createCanvas(nt,tt){const pt=this._document.createElement("canvas");return pt.width=nt,pt.height=tt,pt}}i.DOMCanvasFactory=D;async function R(bt,nt=!1){if(y(bt,document.baseURI)){const tt=await fetch(bt);if(!tt.ok)throw new Error(tt.statusText);return nt?new Uint8Array(await tt.arrayBuffer()):(0,p.stringToBytes)(await tt.text())}return new Promise((tt,pt)=>{const Tt=new XMLHttpRequest;Tt.open("GET",bt,!0),nt&&(Tt.responseType="arraybuffer"),Tt.onreadystatechange=()=>{if(Tt.readyState===XMLHttpRequest.DONE){if(Tt.status===200||Tt.status===0){let Ct;if(nt&&Tt.response?Ct=new Uint8Array(Tt.response):!nt&&Tt.responseText&&(Ct=(0,p.stringToBytes)(Tt.responseText)),Ct){tt(Ct);return}}pt(new Error(Tt.statusText))}},Tt.send(null)})}class m extends a.BaseCMapReaderFactory{_fetchData(nt,tt){return R(nt,this.isCompressed).then(pt=>({cMapData:pt,compressionType:tt}))}}i.DOMCMapReaderFactory=m;class I extends a.BaseStandardFontDataFactory{_fetchData(nt){return R(nt,!0)}}i.DOMStandardFontDataFactory=I;class O extends a.BaseSVGFactory{_createSVG(nt){return document.createElementNS(X,nt)}}i.DOMSVGFactory=O;class C{constructor({viewBox:nt,scale:tt,rotation:pt,offsetX:Tt=0,offsetY:Ct=0,dontFlip:Ht=!1}){this.viewBox=nt,this.scale=tt,this.rotation=pt,this.offsetX=Tt,this.offsetY=Ct;const $t=(nt[2]+nt[0])/2,Wt=(nt[3]+nt[1])/2;let Gt,zt,Ut,Yt;switch(pt%=360,pt<0&&(pt+=360),pt){case 180:Gt=-1,zt=0,Ut=0,Yt=1;break;case 90:Gt=0,zt=1,Ut=1,Yt=0;break;case 270:Gt=0,zt=-1,Ut=-1,Yt=0;break;case 0:Gt=1,zt=0,Ut=0,Yt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ht&&(Ut=-Ut,Yt=-Yt);let ut,et,K,At;Gt===0?(ut=Math.abs(Wt-nt[1])*tt+Tt,et=Math.abs($t-nt[0])*tt+Ct,K=(nt[3]-nt[1])*tt,At=(nt[2]-nt[0])*tt):(ut=Math.abs($t-nt[0])*tt+Tt,et=Math.abs(Wt-nt[1])*tt+Ct,K=(nt[2]-nt[0])*tt,At=(nt[3]-nt[1])*tt),this.transform=[Gt*tt,zt*tt,Ut*tt,Yt*tt,ut-Gt*tt*$t-Ut*tt*Wt,et-zt*tt*$t-Yt*tt*Wt],this.width=K,this.height=At}get rawDims(){const{viewBox:nt}=this;return(0,p.shadow)(this,"rawDims",{pageWidth:nt[2]-nt[0],pageHeight:nt[3]-nt[1],pageX:nt[0],pageY:nt[1]})}clone({scale:nt=this.scale,rotation:tt=this.rotation,offsetX:pt=this.offsetX,offsetY:Tt=this.offsetY,dontFlip:Ct=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:nt,rotation:tt,offsetX:pt,offsetY:Tt,dontFlip:Ct})}convertToViewportPoint(nt,tt){return p.Util.applyTransform([nt,tt],this.transform)}convertToViewportRectangle(nt){const tt=p.Util.applyTransform([nt[0],nt[1]],this.transform),pt=p.Util.applyTransform([nt[2],nt[3]],this.transform);return[tt[0],tt[1],pt[0],pt[1]]}convertToPdfPoint(nt,tt){return p.Util.applyInverseTransform([nt,tt],this.transform)}}i.PageViewport=C;class S extends p.BaseException{constructor(nt,tt=0){super(nt,"RenderingCancelledException"),this.extraDelay=tt}}i.RenderingCancelledException=S;function v(bt){const nt=bt.length;let tt=0;for(;tt<nt&&bt[tt].trim()==="";)tt++;return bt.substring(tt,tt+5).toLowerCase()==="data:"}function f(bt){return typeof bt=="string"&&/\.pdf$/i.test(bt)}function A(bt,nt=!1){return nt||([bt]=bt.split(/[#?]/,1)),bt.substring(bt.lastIndexOf("/")+1)}function T(bt,nt="document.pdf"){if(typeof bt!="string")return nt;if(v(bt))return(0,p.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),nt;const tt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,pt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Tt=tt.exec(bt);let Ct=pt.exec(Tt[1])||pt.exec(Tt[2])||pt.exec(Tt[3]);if(Ct&&(Ct=Ct[0],Ct.includes("%")))try{Ct=pt.exec(decodeURIComponent(Ct))[0]}catch{}return Ct||nt}class x{constructor(){ne(this,"started",Object.create(null));ne(this,"times",[])}time(nt){nt in this.started&&(0,p.warn)(`Timer is already running for ${nt}`),this.started[nt]=Date.now()}timeEnd(nt){nt in this.started||(0,p.warn)(`Timer has not been started for ${nt}`),this.times.push({name:nt,start:this.started[nt],end:Date.now()}),delete this.started[nt]}toString(){const nt=[];let tt=0;for(const{name:pt}of this.times)tt=Math.max(pt.length,tt);for(const{name:pt,start:Tt,end:Ct}of this.times)nt.push(`${pt.padEnd(tt)} ${Ct-Tt}ms
`);return nt.join("")}}i.StatTimer=x;function y(bt,nt){try{const{protocol:tt}=nt?new URL(bt,nt):new URL(bt);return tt==="http:"||tt==="https:"}catch{return!1}}function l(bt){bt.preventDefault()}function d(bt,nt=!1){return new Promise((tt,pt)=>{const Tt=document.createElement("script");Tt.src=bt,Tt.onload=function(Ct){nt&&Tt.remove(),tt(Ct)},Tt.onerror=function(){pt(new Error(`Cannot load script at: ${Tt.src}`))},(document.head||document.documentElement).append(Tt)})}function F(bt){console.log("Deprecated API usage: "+bt)}let b;class c{static toDateObject(nt){if(!nt||typeof nt!="string")return null;b||(b=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const tt=b.exec(nt);if(!tt)return null;const pt=parseInt(tt[1],10);let Tt=parseInt(tt[2],10);Tt=Tt>=1&&Tt<=12?Tt-1:0;let Ct=parseInt(tt[3],10);Ct=Ct>=1&&Ct<=31?Ct:1;let Ht=parseInt(tt[4],10);Ht=Ht>=0&&Ht<=23?Ht:0;let $t=parseInt(tt[5],10);$t=$t>=0&&$t<=59?$t:0;let Wt=parseInt(tt[6],10);Wt=Wt>=0&&Wt<=59?Wt:0;const Gt=tt[7]||"Z";let zt=parseInt(tt[8],10);zt=zt>=0&&zt<=23?zt:0;let Ut=parseInt(tt[9],10)||0;return Ut=Ut>=0&&Ut<=59?Ut:0,Gt==="-"?(Ht+=zt,$t+=Ut):Gt==="+"&&(Ht-=zt,$t-=Ut),new Date(Date.UTC(pt,Tt,Ct,Ht,$t,Wt))}}i.PDFDateString=c;function k(bt,{scale:nt=1,rotation:tt=0}){const{width:pt,height:Tt}=bt.attributes.style,Ct=[0,0,parseInt(pt),parseInt(Tt)];return new C({viewBox:Ct,scale:nt,rotation:tt})}function g(bt){if(bt.startsWith("#")){const nt=parseInt(bt.slice(1),16);return[(nt&16711680)>>16,(nt&65280)>>8,nt&255]}return bt.startsWith("rgb(")?bt.slice(4,-1).split(",").map(nt=>parseInt(nt)):bt.startsWith("rgba(")?bt.slice(5,-1).split(",").map(nt=>parseInt(nt)).slice(0,3):((0,p.warn)(`Not a valid color format: "${bt}"`),[0,0,0])}function W(bt){const nt=document.createElement("span");nt.style.visibility="hidden",document.body.append(nt);for(const tt of bt.keys()){nt.style.color=tt;const pt=window.getComputedStyle(nt).color;bt.set(tt,g(pt))}nt.remove()}function $(bt){const{a:nt,b:tt,c:pt,d:Tt,e:Ct,f:Ht}=bt.getTransform();return[nt,tt,pt,Tt,Ct,Ht]}function w(bt){const{a:nt,b:tt,c:pt,d:Tt,e:Ct,f:Ht}=bt.getTransform().invertSelf();return[nt,tt,pt,Tt,Ct,Ht]}function q(bt,nt,tt=!1,pt=!0){if(nt instanceof C){const{pageWidth:Tt,pageHeight:Ct}=nt.rawDims,{style:Ht}=bt,$t=p.FeatureTest.isCSSRoundSupported,Wt=`var(--scale-factor) * ${Tt}px`,Gt=`var(--scale-factor) * ${Ct}px`,zt=$t?`round(${Wt}, 1px)`:`calc(${Wt})`,Ut=$t?`round(${Gt}, 1px)`:`calc(${Gt})`;!tt||nt.rotation%180===0?(Ht.width=zt,Ht.height=Ut):(Ht.width=Ut,Ht.height=zt)}pt&&bt.setAttribute("data-main-rotation",nt.rotation)}},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseFilterFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0;var a=N(1);class p{constructor(){this.constructor===p&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(m){return"none"}addHCMFilter(m,I){return"none"}addHighlightHCMFilter(m,I,O,C){return"none"}destroy(m=!1){}}i.BaseFilterFactory=p;class X{constructor(){this.constructor===X&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(m,I){if(m<=0||I<=0)throw new Error("Invalid canvas size");const O=this._createCanvas(m,I);return{canvas:O,context:O.getContext("2d")}}reset(m,I,O){if(!m.canvas)throw new Error("Canvas is not specified");if(I<=0||O<=0)throw new Error("Invalid canvas size");m.canvas.width=I,m.canvas.height=O}destroy(m){if(!m.canvas)throw new Error("Canvas is not specified");m.canvas.width=0,m.canvas.height=0,m.canvas=null,m.context=null}_createCanvas(m,I){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=X;class G{constructor({baseUrl:m=null,isCompressed:I=!0}){this.constructor===G&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=m,this.isCompressed=I}async fetch({name:m}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!m)throw new Error("CMap name must be specified.");const I=this.baseUrl+m+(this.isCompressed?".bcmap":""),O=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(I,O).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${I}`)})}_fetchData(m,I){(0,a.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=G;class ft{constructor({baseUrl:m=null}){this.constructor===ft&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=m}async fetch({filename:m}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!m)throw new Error("Font filename must be specified.");const I=`${this.baseUrl}${m}`;return this._fetchData(I).catch(O=>{throw new Error(`Unable to load font data at: ${I}`)})}_fetchData(m){(0,a.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=ft;class D{constructor(){this.constructor===D&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(m,I,O=!1){if(m<=0||I<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),O||(C.setAttribute("width",`${m}px`),C.setAttribute("height",`${I}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${m} ${I}`),C}createElement(m){if(typeof m!="string")throw new Error("Invalid SVG element type");return this._createSVG(m)}_createSVG(m){(0,a.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=D},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0;var a=N(1);const p=3285377520,X=4294901760,G=65535;class ft{constructor(R){this.h1=R?R&4294967295:p,this.h2=R?R&4294967295:p}update(R){let m,I;if(typeof R=="string"){m=new Uint8Array(R.length*2),I=0;for(let F=0,b=R.length;F<b;F++){const c=R.charCodeAt(F);c<=255?m[I++]=c:(m[I++]=c>>>8,m[I++]=c&255)}}else if((0,a.isArrayBuffer)(R))m=R.slice(),I=m.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const O=I>>2,C=I-O*4,S=new Uint32Array(m.buffer,0,O);let v=0,f=0,A=this.h1,T=this.h2;const x=3432918353,y=461845907,l=x&G,d=y&G;for(let F=0;F<O;F++)F&1?(v=S[F],v=v*x&X|v*l&G,v=v<<15|v>>>17,v=v*y&X|v*d&G,A^=v,A=A<<13|A>>>19,A=A*5+3864292196):(f=S[F],f=f*x&X|f*l&G,f=f<<15|f>>>17,f=f*y&X|f*d&G,T^=f,T=T<<13|T>>>19,T=T*5+3864292196);switch(v=0,C){case 3:v^=m[O*4+2]<<16;case 2:v^=m[O*4+1]<<8;case 1:v^=m[O*4],v=v*x&X|v*l&G,v=v<<15|v>>>17,v=v*y&X|v*d&G,O&1?A^=v:T^=v}this.h1=A,this.h2=T}hexdigest(){let R=this.h1,m=this.h2;return R^=m>>>1,R=R*3981806797&X|R*36045&G,m=m*4283543511&X|((m<<16|R>>>16)*2950163797&X)>>>16,R^=m>>>1,R=R*444984403&X|R*60499&G,m=m*3301882366&X|((m<<16|R>>>16)*3120437893&X)>>>16,R^=m>>>1,(R>>>0).toString(16).padStart(8,"0")+(m>>>0).toString(16).padStart(8,"0")}}i.MurmurHash3_64=ft},(L,i,N)=>{var G;Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0;var a=N(1);class p{constructor({ownerDocument:D=globalThis.document,styleElement:R=null}){U(this,G,new Set);this._document=D,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(D){this.nativeFontFaces.add(D),this._document.fonts.add(D)}removeNativeFontFace(D){this.nativeFontFaces.delete(D),this._document.fonts.delete(D)}insertRule(D){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const R=this.styleElement.sheet;R.insertRule(D,R.cssRules.length)}clear(){for(const D of this.nativeFontFaces)this._document.fonts.delete(D);this.nativeFontFaces.clear(),t(this,G).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(D){if(!(!D||t(this,G).has(D.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:R,src:m,style:I}=D,O=new FontFace(R,m,I);this.addNativeFontFace(O);try{await O.load(),t(this,G).add(R)}catch{(0,a.warn)(`Cannot load system font: ${D.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(O)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(D){if(D.attached||D.missingFile&&!D.systemFontInfo)return;if(D.attached=!0,D.systemFontInfo){await this.loadSystemFont(D.systemFontInfo);return}if(this.isFontLoadingAPISupported){const m=D.createNativeFontFace();if(m){this.addNativeFontFace(m);try{await m.loaded}catch(I){throw(0,a.warn)(`Failed to load font '${m.family}': '${I}'.`),D.disableFontFace=!0,I}}return}const R=D.createFontFaceRule();if(R){if(this.insertRule(R),this.isSyncFontLoadingSupported)return;await new Promise(m=>{const I=this._queueLoadingCallback(m);this._prepareFontLoadEvent(D,I)})}}get isFontLoadingAPISupported(){var R;const D=!!((R=this._document)!=null&&R.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",D)}get isSyncFontLoadingSupported(){let D=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(D=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",D)}_queueLoadingCallback(D){function R(){for((0,a.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;m.length>0&&m[0].done;){const O=m.shift();setTimeout(O.callback,0)}}const{loadingRequests:m}=this,I={done:!1,complete:R,callback:D};return m.push(I),I}get _loadTestFont(){const D=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",D)}_prepareFontLoadEvent(D,R){function m(g,W){return g.charCodeAt(W)<<24|g.charCodeAt(W+1)<<16|g.charCodeAt(W+2)<<8|g.charCodeAt(W+3)&255}function I(g,W,$,w){const q=g.substring(0,W),it=g.substring(W+$);return q+w+it}let O,C;const S=this._document.createElement("canvas");S.width=1,S.height=1;const v=S.getContext("2d");let f=0;function A(g,W){if(++f>30){(0,a.warn)("Load test font never loaded."),W();return}if(v.font="30px "+g,v.fillText(".",0,20),v.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(A.bind(null,g,W))}const T=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=I(x,976,T.length,T);const l=16,d=1482184792;let F=m(x,l);for(O=0,C=T.length-3;O<C;O+=4)F=F-d+m(T,O)|0;O<T.length&&(F=F-d+m(T+"XXX",O)|0),x=I(x,l,4,(0,a.string32)(F));const b=`url(data:font/opentype;base64,${btoa(x)});`,c=`@font-face {font-family:"${T}";src:${b}}`;this.insertRule(c);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const g of[D.loadedName,T]){const W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=g,k.append(W)}this._document.body.append(k),A(T,()=>{k.remove(),R.complete()})}}G=new WeakMap,i.FontLoader=p;class X{constructor(D,{isEvalSupported:R=!0,disableFontFace:m=!1,ignoreErrors:I=!1,inspectFont:O=null}){this.compiledGlyphs=Object.create(null);for(const C in D)this[C]=D[C];this.isEvalSupported=R!==!1,this.disableFontFace=m===!0,this.ignoreErrors=I===!0,this._inspectFont=O}createNativeFontFace(){var R;if(!this.data||this.disableFontFace)return null;let D;if(!this.cssFontInfo)D=new FontFace(this.loadedName,this.data,{});else{const m={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(m.style=`oblique ${this.cssFontInfo.italicAngle}deg`),D=new FontFace(this.cssFontInfo.fontFamily,this.data,m)}return(R=this._inspectFont)==null||R.call(this,this),D}createFontFaceRule(){var I;if(!this.data||this.disableFontFace)return null;const D=(0,a.bytesToString)(this.data),R=`url(data:${this.mimetype};base64,${btoa(D)});`;let m;if(!this.cssFontInfo)m=`@font-face {font-family:"${this.loadedName}";src:${R}}`;else{let O=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(O+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),m=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${O}src:${R}}`}return(I=this._inspectFont)==null||I.call(this,this,R),m}getPathGenerator(D,R){if(this.compiledGlyphs[R]!==void 0)return this.compiledGlyphs[R];let m;try{m=D.get(this.loadedName+"_path_"+R)}catch(I){if(!this.ignoreErrors)throw I;return(0,a.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[R]=function(O,C){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const I=[];for(const O of m){const C=O.args!==void 0?O.args.join(","):"";I.push("c.",O.cmd,"(",C,`);
`)}return this.compiledGlyphs[R]=new Function("c","size",I.join(""))}return this.compiledGlyphs[R]=function(I,O){for(const C of m)C.cmd==="scale"&&(C.args=[O,-O]),I[C.cmd].apply(I,C.args)}}}i.FontFaceObject=X},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeFilterFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0;var a=N(7);N(1);const p=function(R){return new Promise((m,I)=>{require$$5.readFile(R,(C,S)=>{if(C||!S){I(new Error(C));return}m(new Uint8Array(S))})})};class X extends a.BaseFilterFactory{}i.NodeFilterFactory=X;class G extends a.BaseCanvasFactory{_createCanvas(m,I){return require$$5.createCanvas(m,I)}}i.NodeCanvasFactory=G;class ft extends a.BaseCMapReaderFactory{_fetchData(m,I){return p(m).then(O=>({cMapData:O,compressionType:I}))}}i.NodeCMapReaderFactory=ft;class D extends a.BaseStandardFontDataFactory{_fetchData(m){return p(m)}}i.NodeStandardFontDataFactory=D},(L,i,N)=>{var V,Ze,mt,tn;Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0;var a=N(1),p=N(6),X=N(12),G=N(13);const ft=16,D=100,R=4096,m=15,I=10,O=1e3,C=16;function S(P,n){if(P._removeMirroring)throw new Error("Context is already forwarding operations.");P.__originalSave=P.save,P.__originalRestore=P.restore,P.__originalRotate=P.rotate,P.__originalScale=P.scale,P.__originalTranslate=P.translate,P.__originalTransform=P.transform,P.__originalSetTransform=P.setTransform,P.__originalResetTransform=P.resetTransform,P.__originalClip=P.clip,P.__originalMoveTo=P.moveTo,P.__originalLineTo=P.lineTo,P.__originalBezierCurveTo=P.bezierCurveTo,P.__originalRect=P.rect,P.__originalClosePath=P.closePath,P.__originalBeginPath=P.beginPath,P._removeMirroring=()=>{P.save=P.__originalSave,P.restore=P.__originalRestore,P.rotate=P.__originalRotate,P.scale=P.__originalScale,P.translate=P.__originalTranslate,P.transform=P.__originalTransform,P.setTransform=P.__originalSetTransform,P.resetTransform=P.__originalResetTransform,P.clip=P.__originalClip,P.moveTo=P.__originalMoveTo,P.lineTo=P.__originalLineTo,P.bezierCurveTo=P.__originalBezierCurveTo,P.rect=P.__originalRect,P.closePath=P.__originalClosePath,P.beginPath=P.__originalBeginPath,delete P._removeMirroring},P.save=function(){n.save(),this.__originalSave()},P.restore=function(){n.restore(),this.__originalRestore()},P.translate=function(s,h){n.translate(s,h),this.__originalTranslate(s,h)},P.scale=function(s,h){n.scale(s,h),this.__originalScale(s,h)},P.transform=function(s,h,u,E,M,H){n.transform(s,h,u,E,M,H),this.__originalTransform(s,h,u,E,M,H)},P.setTransform=function(s,h,u,E,M,H){n.setTransform(s,h,u,E,M,H),this.__originalSetTransform(s,h,u,E,M,H)},P.resetTransform=function(){n.resetTransform(),this.__originalResetTransform()},P.rotate=function(s){n.rotate(s),this.__originalRotate(s)},P.clip=function(s){n.clip(s),this.__originalClip(s)},P.moveTo=function(o,s){n.moveTo(o,s),this.__originalMoveTo(o,s)},P.lineTo=function(o,s){n.lineTo(o,s),this.__originalLineTo(o,s)},P.bezierCurveTo=function(o,s,h,u,E,M){n.bezierCurveTo(o,s,h,u,E,M),this.__originalBezierCurveTo(o,s,h,u,E,M)},P.rect=function(o,s,h,u){n.rect(o,s,h,u),this.__originalRect(o,s,h,u)},P.closePath=function(){n.closePath(),this.__originalClosePath()},P.beginPath=function(){n.beginPath(),this.__originalBeginPath()}}class v{constructor(n){this.canvasFactory=n,this.cache=Object.create(null)}getCanvas(n,o,s){let h;return this.cache[n]!==void 0?(h=this.cache[n],this.canvasFactory.reset(h,o,s)):(h=this.canvasFactory.create(o,s),this.cache[n]=h),h}delete(n){delete this.cache[n]}clear(){for(const n in this.cache){const o=this.cache[n];this.canvasFactory.destroy(o),delete this.cache[n]}}}function f(P,n,o,s,h,u,E,M,H,st){const[Q,ot,ht,gt,dt,Pt]=(0,p.getCurrentTransform)(P);if(ot===0&&ht===0){const Lt=E*Q+dt,bt=Math.round(Lt),nt=M*gt+Pt,tt=Math.round(nt),pt=(E+H)*Q+dt,Tt=Math.abs(Math.round(pt)-bt)||1,Ct=(M+st)*gt+Pt,Ht=Math.abs(Math.round(Ct)-tt)||1;return P.setTransform(Math.sign(Q),0,0,Math.sign(gt),bt,tt),P.drawImage(n,o,s,h,u,0,0,Tt,Ht),P.setTransform(Q,ot,ht,gt,dt,Pt),[Tt,Ht]}if(Q===0&&gt===0){const Lt=M*ht+dt,bt=Math.round(Lt),nt=E*ot+Pt,tt=Math.round(nt),pt=(M+st)*ht+dt,Tt=Math.abs(Math.round(pt)-bt)||1,Ct=(E+H)*ot+Pt,Ht=Math.abs(Math.round(Ct)-tt)||1;return P.setTransform(0,Math.sign(ot),Math.sign(ht),0,bt,tt),P.drawImage(n,o,s,h,u,0,0,Ht,Tt),P.setTransform(Q,ot,ht,gt,dt,Pt),[Ht,Tt]}P.drawImage(n,o,s,h,u,E,M,H,st);const It=Math.hypot(Q,ot),Et=Math.hypot(ht,gt);return[It*H,Et*st]}function A(P){const{width:n,height:o}=P;if(n>O||o>O)return null;const s=1e3,h=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=n+1;let E=new Uint8Array(u*(o+1)),M,H,st;const Q=n+7&-8;let ot=new Uint8Array(Q*o),ht=0;for(const Et of P.data){let Lt=128;for(;Lt>0;)ot[ht++]=Et&Lt?0:255,Lt>>=1}let gt=0;for(ht=0,ot[ht]!==0&&(E[0]=1,++gt),H=1;H<n;H++)ot[ht]!==ot[ht+1]&&(E[H]=ot[ht]?2:1,++gt),ht++;for(ot[ht]!==0&&(E[H]=2,++gt),M=1;M<o;M++){ht=M*Q,st=M*u,ot[ht-Q]!==ot[ht]&&(E[st]=ot[ht]?1:8,++gt);let Et=(ot[ht]?4:0)+(ot[ht-Q]?8:0);for(H=1;H<n;H++)Et=(Et>>2)+(ot[ht+1]?4:0)+(ot[ht-Q+1]?8:0),h[Et]&&(E[st+H]=h[Et],++gt),ht++;if(ot[ht-Q]!==ot[ht]&&(E[st+H]=ot[ht]?2:4,++gt),gt>s)return null}for(ht=Q*(o-1),st=M*u,ot[ht]!==0&&(E[st]=8,++gt),H=1;H<n;H++)ot[ht]!==ot[ht+1]&&(E[st+H]=ot[ht]?4:8,++gt),ht++;if(ot[ht]!==0&&(E[st+H]=4,++gt),gt>s)return null;const dt=new Int32Array([0,u,-1,0,-u,0,0,0,1]),Pt=new Path2D;for(M=0;gt&&M<=o;M++){let Et=M*u;const Lt=Et+n;for(;Et<Lt&&!E[Et];)Et++;if(Et===Lt)continue;Pt.moveTo(Et%u,M);const bt=Et;let nt=E[Et];do{const tt=dt[nt];do Et+=tt;while(!E[Et]);const pt=E[Et];pt!==5&&pt!==10?(nt=pt,E[Et]=0):(nt=pt&51*nt>>4,E[Et]&=nt>>2|nt<<2),Pt.lineTo(Et%u,Et/u|0),E[Et]||--gt}while(bt!==Et);--M}return ot=null,E=null,function(Et){Et.save(),Et.scale(1/n,-1/o),Et.translate(0,-o),Et.fill(Pt),Et.beginPath(),Et.restore()}}class T{constructor(n,o){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,n,o])}clone(){const n=Object.create(this);return n.clipBox=this.clipBox.slice(),n}setCurrentPoint(n,o){this.x=n,this.y=o}updatePathMinMax(n,o,s){[o,s]=a.Util.applyTransform([o,s],n),this.minX=Math.min(this.minX,o),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,o),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(n,o){const s=a.Util.applyTransform(o,n),h=a.Util.applyTransform(o.slice(2),n);this.minX=Math.min(this.minX,s[0],h[0]),this.minY=Math.min(this.minY,s[1],h[1]),this.maxX=Math.max(this.maxX,s[0],h[0]),this.maxY=Math.max(this.maxY,s[1],h[1])}updateScalingPathMinMax(n,o){a.Util.scaleMinMax(n,o),this.minX=Math.min(this.minX,o[0]),this.maxX=Math.max(this.maxX,o[1]),this.minY=Math.min(this.minY,o[2]),this.maxY=Math.max(this.maxY,o[3])}updateCurvePathMinMax(n,o,s,h,u,E,M,H,st,Q){const ot=a.Util.bezierBoundingBox(o,s,h,u,E,M,H,st);if(Q){Q[0]=Math.min(Q[0],ot[0],ot[2]),Q[1]=Math.max(Q[1],ot[0],ot[2]),Q[2]=Math.min(Q[2],ot[1],ot[3]),Q[3]=Math.max(Q[3],ot[1],ot[3]);return}this.updateRectMinMax(n,ot)}getPathBoundingBox(n=X.PathType.FILL,o=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(n===X.PathType.STROKE){o||(0,a.unreachable)("Stroke bounding box must include transform.");const h=a.Util.singularValueDecompose2dScale(o),u=h[0]*this.lineWidth/2,E=h[1]*this.lineWidth/2;s[0]-=u,s[1]-=E,s[2]+=u,s[3]+=E}return s}updateClipFromPath(){const n=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(n||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(n){this.clipBox=n,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(n=X.PathType.FILL,o=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(n,o))}}function x(P,n){if(typeof ImageData<"u"&&n instanceof ImageData){P.putImageData(n,0,0);return}const o=n.height,s=n.width,h=o%C,u=(o-h)/C,E=h===0?u:u+1,M=P.createImageData(s,C);let H=0,st;const Q=n.data,ot=M.data;let ht,gt,dt,Pt;if(n.kind===a.ImageKind.GRAYSCALE_1BPP){const It=Q.byteLength,Et=new Uint32Array(ot.buffer,0,ot.byteLength>>2),Lt=Et.length,bt=s+7>>3,nt=4294967295,tt=a.FeatureTest.isLittleEndian?4278190080:255;for(ht=0;ht<E;ht++){for(dt=ht<u?C:h,st=0,gt=0;gt<dt;gt++){const pt=It-H;let Tt=0;const Ct=pt>bt?s:pt*8-7,Ht=Ct&-8;let $t=0,Wt=0;for(;Tt<Ht;Tt+=8)Wt=Q[H++],Et[st++]=Wt&128?nt:tt,Et[st++]=Wt&64?nt:tt,Et[st++]=Wt&32?nt:tt,Et[st++]=Wt&16?nt:tt,Et[st++]=Wt&8?nt:tt,Et[st++]=Wt&4?nt:tt,Et[st++]=Wt&2?nt:tt,Et[st++]=Wt&1?nt:tt;for(;Tt<Ct;Tt++)$t===0&&(Wt=Q[H++],$t=128),Et[st++]=Wt&$t?nt:tt,$t>>=1}for(;st<Lt;)Et[st++]=0;P.putImageData(M,0,ht*C)}}else if(n.kind===a.ImageKind.RGBA_32BPP){for(gt=0,Pt=s*C*4,ht=0;ht<u;ht++)ot.set(Q.subarray(H,H+Pt)),H+=Pt,P.putImageData(M,0,gt),gt+=C;ht<E&&(Pt=s*h*4,ot.set(Q.subarray(H,H+Pt)),P.putImageData(M,0,gt))}else if(n.kind===a.ImageKind.RGB_24BPP)for(dt=C,Pt=s*dt,ht=0;ht<E;ht++){for(ht>=u&&(dt=h,Pt=s*dt),st=0,gt=Pt;gt--;)ot[st++]=Q[H++],ot[st++]=Q[H++],ot[st++]=Q[H++],ot[st++]=255;P.putImageData(M,0,ht*C)}else throw new Error(`bad image kind: ${n.kind}`)}function y(P,n){if(n.bitmap){P.drawImage(n.bitmap,0,0);return}const o=n.height,s=n.width,h=o%C,u=(o-h)/C,E=h===0?u:u+1,M=P.createImageData(s,C);let H=0;const st=n.data,Q=M.data;for(let ot=0;ot<E;ot++){const ht=ot<u?C:h;({srcPos:H}=(0,G.convertBlackAndWhiteToRGBA)({src:st,srcPos:H,dest:Q,width:s,height:ht,nonBlackColor:0})),P.putImageData(M,0,ot*C)}}function l(P,n){const o=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of o)P[s]!==void 0&&(n[s]=P[s]);P.setLineDash!==void 0&&(n.setLineDash(P.getLineDash()),n.lineDashOffset=P.lineDashOffset)}function d(P){if(P.strokeStyle=P.fillStyle="#000000",P.fillRule="nonzero",P.globalAlpha=1,P.lineWidth=1,P.lineCap="butt",P.lineJoin="miter",P.miterLimit=10,P.globalCompositeOperation="source-over",P.font="10px sans-serif",P.setLineDash!==void 0&&(P.setLineDash([]),P.lineDashOffset=0),!a.isNodeJS){const{filter:n}=P;n!=="none"&&n!==""&&(P.filter="none")}}function F(P,n,o,s){const h=P.length;for(let u=3;u<h;u+=4){const E=P[u];if(E===0)P[u-3]=n,P[u-2]=o,P[u-1]=s;else if(E<255){const M=255-E;P[u-3]=P[u-3]*E+n*M>>8,P[u-2]=P[u-2]*E+o*M>>8,P[u-1]=P[u-1]*E+s*M>>8}}}function b(P,n,o){const s=P.length,h=1/255;for(let u=3;u<s;u+=4){const E=o?o[P[u]]:P[u];n[u]=n[u]*E*h|0}}function c(P,n,o){const s=P.length;for(let h=3;h<s;h+=4){const u=P[h-3]*77+P[h-2]*152+P[h-1]*28;n[h]=o?n[h]*o[u>>8]>>8:n[h]*u>>16}}function k(P,n,o,s,h,u,E,M,H,st,Q){const ot=!!u,ht=ot?u[0]:0,gt=ot?u[1]:0,dt=ot?u[2]:0,Pt=h==="Luminosity"?c:b,Et=Math.min(s,Math.ceil(1048576/o));for(let Lt=0;Lt<s;Lt+=Et){const bt=Math.min(Et,s-Lt),nt=P.getImageData(M-st,Lt+(H-Q),o,bt),tt=n.getImageData(M,Lt+H,o,bt);ot&&F(nt.data,ht,gt,dt),Pt(nt.data,tt.data,E),n.putImageData(tt,M,Lt+H)}}function g(P,n,o,s){const h=s[0],u=s[1],E=s[2]-h,M=s[3]-u;E===0||M===0||(k(n.context,o,E,M,n.subtype,n.backdrop,n.transferMap,h,u,n.offsetX,n.offsetY),P.save(),P.globalAlpha=1,P.globalCompositeOperation="source-over",P.setTransform(1,0,0,1,0,0),P.drawImage(o.canvas,0,0),P.restore())}function W(P,n){const o=a.Util.singularValueDecompose2dScale(P);o[0]=Math.fround(o[0]),o[1]=Math.fround(o[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*p.PixelsPerInch.PDF_TO_CSS_UNITS);return n!==void 0?n:o[0]<=s||o[1]<=s}const $=["butt","round","square"],w=["miter","round","bevel"],q={},it={},xt=class xt{constructor(n,o,s,h,u,{optionalContentConfig:E,markedContentStack:M=null},H,st){U(this,V);U(this,mt);this.ctx=n,this.current=new T(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=s,this.canvasFactory=h,this.filterFactory=u,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=M||[],this.optionalContentConfig=E,this.cachedCanvases=new v(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=H,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=st,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(n,o=null){return typeof n=="string"?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):o}beginDrawing({transform:n,viewport:o,transparency:s=!1,background:h=null}){const u=this.ctx.canvas.width,E=this.ctx.canvas.height,M=this.ctx.fillStyle;if(this.ctx.fillStyle=h||"#ffffff",this.ctx.fillRect(0,0,u,E),this.ctx.fillStyle=M,s){const H=this.cachedCanvases.getCanvas("transparent",u,E);this.compositeCtx=this.ctx,this.transparentCanvas=H.canvas,this.ctx=H.context,this.ctx.save(),this.ctx.transform(...(0,p.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),d(this.ctx),n&&(this.ctx.transform(...n),this.outputScaleX=n[0],this.outputScaleY=n[0]),this.ctx.transform(...o.transform),this.viewportScale=o.scale,this.baseTransform=(0,p.getCurrentTransform)(this.ctx)}executeOperatorList(n,o,s,h){const u=n.argsArray,E=n.fnArray;let M=o||0;const H=u.length;if(H===M)return M;const st=H-M>I&&typeof s=="function",Q=st?Date.now()+m:0;let ot=0;const ht=this.commonObjs,gt=this.objs;let dt;for(;;){if(h!==void 0&&M===h.nextBreakPoint)return h.breakIt(M,s),M;if(dt=E[M],dt!==a.OPS.dependency)this[dt].apply(this,u[M]);else for(const Pt of u[M]){const It=Pt.startsWith("g_")?ht:gt;if(!It.has(Pt))return It.get(Pt,s),M}if(M++,M===H)return M;if(st&&++ot>I){if(Date.now()>Q)return s(),M;ot=0}}}endDrawing(){Y(this,V,Ze).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const n of this._cachedBitmapsMap.values()){for(const o of n.values())typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement&&(o.width=o.height=0);n.clear()}this._cachedBitmapsMap.clear(),Y(this,mt,tn).call(this)}_scaleImage(n,o){const s=n.width,h=n.height;let u=Math.max(Math.hypot(o[0],o[1]),1),E=Math.max(Math.hypot(o[2],o[3]),1),M=s,H=h,st="prescale1",Q,ot;for(;u>2&&M>1||E>2&&H>1;){let ht=M,gt=H;u>2&&M>1&&(ht=M>=16384?Math.floor(M/2)-1||1:Math.ceil(M/2),u/=M/ht),E>2&&H>1&&(gt=H>=16384?Math.floor(H/2)-1||1:Math.ceil(H)/2,E/=H/gt),Q=this.cachedCanvases.getCanvas(st,ht,gt),ot=Q.context,ot.clearRect(0,0,ht,gt),ot.drawImage(n,0,0,M,H,0,0,ht,gt),n=Q.canvas,M=ht,H=gt,st=st==="prescale1"?"prescale2":"prescale1"}return{img:n,paintWidth:M,paintHeight:H}}_createMaskCanvas(n){const o=this.ctx,{width:s,height:h}=n,u=this.current.fillColor,E=this.current.patternFill,M=(0,p.getCurrentTransform)(o);let H,st,Q,ot;if((n.bitmap||n.data)&&n.count>1){const Tt=n.bitmap||n.data.buffer;st=JSON.stringify(E?M:[M.slice(0,4),u]),H=this._cachedBitmapsMap.get(Tt),H||(H=new Map,this._cachedBitmapsMap.set(Tt,H));const Ct=H.get(st);if(Ct&&!E){const Ht=Math.round(Math.min(M[0],M[2])+M[4]),$t=Math.round(Math.min(M[1],M[3])+M[5]);return{canvas:Ct,offsetX:Ht,offsetY:$t}}Q=Ct}Q||(ot=this.cachedCanvases.getCanvas("maskCanvas",s,h),y(ot.context,n));let ht=a.Util.transform(M,[1/s,0,0,-1/h,0,0]);ht=a.Util.transform(ht,[1,0,0,1,0,-h]);const gt=a.Util.applyTransform([0,0],ht),dt=a.Util.applyTransform([s,h],ht),Pt=a.Util.normalizeRect([gt[0],gt[1],dt[0],dt[1]]),It=Math.round(Pt[2]-Pt[0])||1,Et=Math.round(Pt[3]-Pt[1])||1,Lt=this.cachedCanvases.getCanvas("fillCanvas",It,Et),bt=Lt.context,nt=Math.min(gt[0],dt[0]),tt=Math.min(gt[1],dt[1]);bt.translate(-nt,-tt),bt.transform(...ht),Q||(Q=this._scaleImage(ot.canvas,(0,p.getCurrentTransformInverse)(bt)),Q=Q.img,H&&E&&H.set(st,Q)),bt.imageSmoothingEnabled=W((0,p.getCurrentTransform)(bt),n.interpolate),f(bt,Q,0,0,Q.width,Q.height,0,0,s,h),bt.globalCompositeOperation="source-in";const pt=a.Util.transform((0,p.getCurrentTransformInverse)(bt),[1,0,0,1,-nt,-tt]);return bt.fillStyle=E?u.getPattern(o,this,pt,X.PathType.FILL):u,bt.fillRect(0,0,s,h),H&&!E&&(this.cachedCanvases.delete("fillCanvas"),H.set(st,Lt.canvas)),{canvas:Lt.canvas,offsetX:Math.round(nt),offsetY:Math.round(tt)}}setLineWidth(n){n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(n){this.ctx.lineCap=$[n]}setLineJoin(n){this.ctx.lineJoin=w[n]}setMiterLimit(n){this.ctx.miterLimit=n}setDash(n,o){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(n),s.lineDashOffset=o)}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[o,s]of n)switch(o){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const n=this.inSMaskMode;this.current.activeSMask&&!n?this.beginSMaskMode():!this.current.activeSMask&&n&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,o=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,h=this.cachedCanvases.getCanvas(s,n,o);this.suspendedCtx=this.ctx,this.ctx=h.context;const u=this.ctx;u.setTransform(...(0,p.getCurrentTransform)(this.suspendedCtx)),l(this.suspendedCtx,u),S(u,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(n){if(!this.current.activeSMask)return;n?(n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.ceil(n[2]),n[3]=Math.ceil(n[3])):n=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const o=this.current.activeSMask,s=this.suspendedCtx;g(s,o,this.ctx,n),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(l(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(n,o,s,h,u,E){this.ctx.transform(n,o,s,h,u,E),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(n,o,s){const h=this.ctx,u=this.current;let E=u.x,M=u.y,H,st;const Q=(0,p.getCurrentTransform)(h),ot=Q[0]===0&&Q[3]===0||Q[1]===0&&Q[2]===0,ht=ot?s.slice(0):null;for(let gt=0,dt=0,Pt=n.length;gt<Pt;gt++)switch(n[gt]|0){case a.OPS.rectangle:E=o[dt++],M=o[dt++];const It=o[dt++],Et=o[dt++],Lt=E+It,bt=M+Et;h.moveTo(E,M),It===0||Et===0?h.lineTo(Lt,bt):(h.lineTo(Lt,M),h.lineTo(Lt,bt),h.lineTo(E,bt)),ot||u.updateRectMinMax(Q,[E,M,Lt,bt]),h.closePath();break;case a.OPS.moveTo:E=o[dt++],M=o[dt++],h.moveTo(E,M),ot||u.updatePathMinMax(Q,E,M);break;case a.OPS.lineTo:E=o[dt++],M=o[dt++],h.lineTo(E,M),ot||u.updatePathMinMax(Q,E,M);break;case a.OPS.curveTo:H=E,st=M,E=o[dt+4],M=o[dt+5],h.bezierCurveTo(o[dt],o[dt+1],o[dt+2],o[dt+3],E,M),u.updateCurvePathMinMax(Q,H,st,o[dt],o[dt+1],o[dt+2],o[dt+3],E,M,ht),dt+=6;break;case a.OPS.curveTo2:H=E,st=M,h.bezierCurveTo(E,M,o[dt],o[dt+1],o[dt+2],o[dt+3]),u.updateCurvePathMinMax(Q,H,st,E,M,o[dt],o[dt+1],o[dt+2],o[dt+3],ht),E=o[dt+2],M=o[dt+3],dt+=4;break;case a.OPS.curveTo3:H=E,st=M,E=o[dt+2],M=o[dt+3],h.bezierCurveTo(o[dt],o[dt+1],E,M,E,M),u.updateCurvePathMinMax(Q,H,st,o[dt],o[dt+1],E,M,E,M,ht),dt+=4;break;case a.OPS.closePath:h.closePath();break}ot&&u.updateScalingPathMinMax(Q,ht),u.setCurrentPoint(E,M)}closePath(){this.ctx.closePath()}stroke(n=!0){const o=this.ctx,s=this.current.strokeColor;o.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(o.save(),o.strokeStyle=s.getPattern(o,this,(0,p.getCurrentTransformInverse)(o),X.PathType.STROKE),this.rescaleAndStroke(!1),o.restore()):this.rescaleAndStroke(!0)),n&&this.consumePath(this.current.getClippedPathBoundingBox()),o.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(n=!0){const o=this.ctx,s=this.current.fillColor,h=this.current.patternFill;let u=!1;h&&(o.save(),o.fillStyle=s.getPattern(o,this,(0,p.getCurrentTransformInverse)(o),X.PathType.FILL),u=!0);const E=this.current.getClippedPathBoundingBox();this.contentVisible&&E!==null&&(this.pendingEOFill?(o.fill("evenodd"),this.pendingEOFill=!1):o.fill()),u&&o.restore(),n&&this.consumePath(E)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=q}eoClip(){this.pendingClip=it}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const n=this.pendingTextPaths,o=this.ctx;if(n===void 0){o.beginPath();return}o.save(),o.beginPath();for(const s of n)o.setTransform(...s.transform),o.translate(s.x,s.y),s.addToPath(o,s.fontSize);o.restore(),o.clip(),o.beginPath(),delete this.pendingTextPaths}setCharSpacing(n){this.current.charSpacing=n}setWordSpacing(n){this.current.wordSpacing=n}setHScale(n){this.current.textHScale=n/100}setLeading(n){this.current.leading=-n}setFont(n,o){var Q;const s=this.commonObjs.get(n),h=this.current;if(!s)throw new Error(`Can't find font for ${n}`);if(h.fontMatrix=s.fontMatrix||a.FONT_IDENTITY_MATRIX,(h.fontMatrix[0]===0||h.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+n),o<0?(o=-o,h.fontDirection=-1):h.fontDirection=1,this.current.font=s,this.current.fontSize=o,s.isType3Font)return;const u=s.loadedName||"sans-serif",E=((Q=s.systemFontInfo)==null?void 0:Q.css)||`"${u}", ${s.fallbackName}`;let M="normal";s.black?M="900":s.bold&&(M="bold");const H=s.italic?"italic":"normal";let st=o;o<ft?st=ft:o>D&&(st=D),this.current.fontSizeScale=o/st,this.ctx.font=`${H} ${M} ${st}px ${E}`}setTextRenderingMode(n){this.current.textRenderingMode=n}setTextRise(n){this.current.textRise=n}moveText(n,o){this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=o}setLeadingMoveText(n,o){this.setLeading(-o),this.moveText(n,o)}setTextMatrix(n,o,s,h,u,E){this.current.textMatrix=[n,o,s,h,u,E],this.current.textMatrixScale=Math.hypot(n,o),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(n,o,s,h){const u=this.ctx,E=this.current,M=E.font,H=E.textRenderingMode,st=E.fontSize/E.fontSizeScale,Q=H&a.TextRenderingMode.FILL_STROKE_MASK,ot=!!(H&a.TextRenderingMode.ADD_TO_PATH_FLAG),ht=E.patternFill&&!M.missingFile;let gt;(M.disableFontFace||ot||ht)&&(gt=M.getPathGenerator(this.commonObjs,n)),M.disableFontFace||ht?(u.save(),u.translate(o,s),u.beginPath(),gt(u,st),h&&u.setTransform(...h),(Q===a.TextRenderingMode.FILL||Q===a.TextRenderingMode.FILL_STROKE)&&u.fill(),(Q===a.TextRenderingMode.STROKE||Q===a.TextRenderingMode.FILL_STROKE)&&u.stroke(),u.restore()):((Q===a.TextRenderingMode.FILL||Q===a.TextRenderingMode.FILL_STROKE)&&u.fillText(n,o,s),(Q===a.TextRenderingMode.STROKE||Q===a.TextRenderingMode.FILL_STROKE)&&u.strokeText(n,o,s)),ot&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,p.getCurrentTransform)(u),x:o,y:s,fontSize:st,addToPath:gt})}get isFontSubpixelAAEnabled(){const{context:n}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);n.scale(1.5,1),n.fillText("I",0,10);const o=n.getImageData(0,0,10,10).data;let s=!1;for(let h=3;h<o.length;h+=4)if(o[h]>0&&o[h]<255){s=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(n){const o=this.current,s=o.font;if(s.isType3Font)return this.showType3Text(n);const h=o.fontSize;if(h===0)return;const u=this.ctx,E=o.fontSizeScale,M=o.charSpacing,H=o.wordSpacing,st=o.fontDirection,Q=o.textHScale*st,ot=n.length,ht=s.vertical,gt=ht?1:-1,dt=s.defaultVMetrics,Pt=h*o.fontMatrix[0],It=o.textRenderingMode===a.TextRenderingMode.FILL&&!s.disableFontFace&&!o.patternFill;u.save(),u.transform(...o.textMatrix),u.translate(o.x,o.y+o.textRise),st>0?u.scale(Q,-1):u.scale(Q,1);let Et;if(o.patternFill){u.save();const pt=o.fillColor.getPattern(u,this,(0,p.getCurrentTransformInverse)(u),X.PathType.FILL);Et=(0,p.getCurrentTransform)(u),u.restore(),u.fillStyle=pt}let Lt=o.lineWidth;const bt=o.textMatrixScale;if(bt===0||Lt===0){const pt=o.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(pt===a.TextRenderingMode.STROKE||pt===a.TextRenderingMode.FILL_STROKE)&&(Lt=this.getSinglePixelWidth())}else Lt/=bt;if(E!==1&&(u.scale(E,E),Lt/=E),u.lineWidth=Lt,s.isInvalidPDFjsFont){const pt=[];let Tt=0;for(const Ct of n)pt.push(Ct.unicode),Tt+=Ct.width;u.fillText(pt.join(""),0,0),o.x+=Tt*Pt*Q,u.restore(),this.compose();return}let nt=0,tt;for(tt=0;tt<ot;++tt){const pt=n[tt];if(typeof pt=="number"){nt+=gt*pt*h/1e3;continue}let Tt=!1;const Ct=(pt.isSpace?H:0)+M,Ht=pt.fontChar,$t=pt.accent;let Wt,Gt,zt=pt.width;if(ht){const Yt=pt.vmetric||dt,ut=-(pt.vmetric?Yt[1]:zt*.5)*Pt,et=Yt[2]*Pt;zt=Yt?-Yt[0]:zt,Wt=ut/E,Gt=(nt+et)/E}else Wt=nt/E,Gt=0;if(s.remeasure&&zt>0){const Yt=u.measureText(Ht).width*1e3/h*E;if(zt<Yt&&this.isFontSubpixelAAEnabled){const ut=zt/Yt;Tt=!0,u.save(),u.scale(ut,1),Wt/=ut}else zt!==Yt&&(Wt+=(zt-Yt)/2e3*h/E)}if(this.contentVisible&&(pt.isInFont||s.missingFile)){if(It&&!$t)u.fillText(Ht,Wt,Gt);else if(this.paintChar(Ht,Wt,Gt,Et),$t){const Yt=Wt+h*$t.offset.x/E,ut=Gt-h*$t.offset.y/E;this.paintChar($t.fontChar,Yt,ut,Et)}}const Ut=ht?zt*Pt-Ct*st:zt*Pt+Ct*st;nt+=Ut,Tt&&u.restore()}ht?o.y-=nt:o.x+=nt*Q,u.restore(),this.compose()}showType3Text(n){const o=this.ctx,s=this.current,h=s.font,u=s.fontSize,E=s.fontDirection,M=h.vertical?1:-1,H=s.charSpacing,st=s.wordSpacing,Q=s.textHScale*E,ot=s.fontMatrix||a.FONT_IDENTITY_MATRIX,ht=n.length,gt=s.textRenderingMode===a.TextRenderingMode.INVISIBLE;let dt,Pt,It,Et;if(!(gt||u===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,o.save(),o.transform(...s.textMatrix),o.translate(s.x,s.y),o.scale(Q,E),dt=0;dt<ht;++dt){if(Pt=n[dt],typeof Pt=="number"){Et=M*Pt*u/1e3,this.ctx.translate(Et,0),s.x+=Et*Q;continue}const Lt=(Pt.isSpace?st:0)+H,bt=h.charProcOperatorList[Pt.operatorListId];if(!bt){(0,a.warn)(`Type3 character "${Pt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Pt,this.save(),o.scale(u,u),o.transform(...ot),this.executeOperatorList(bt),this.restore()),It=a.Util.applyTransform([Pt.width,0],ot)[0]*u+Lt,o.translate(It,0),s.x+=It*Q}o.restore(),this.processingType3=null}}setCharWidth(n,o){}setCharWidthAndBounds(n,o,s,h,u,E){this.ctx.rect(s,h,u-s,E-h),this.ctx.clip(),this.endPath()}getColorN_Pattern(n){let o;if(n[0]==="TilingPattern"){const s=n[1],h=this.baseTransform||(0,p.getCurrentTransform)(this.ctx),u={createCanvasGraphics:E=>new xt(E,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};o=new X.TilingPattern(n,s,this.ctx,u,h)}else o=this._getPattern(n[1],n[2]);return o}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(n,o,s){const h=a.Util.makeHexColor(n,o,s);this.ctx.strokeStyle=h,this.current.strokeColor=h}setFillRGBColor(n,o,s){const h=a.Util.makeHexColor(n,o,s);this.ctx.fillStyle=h,this.current.fillColor=h,this.current.patternFill=!1}_getPattern(n,o=null){let s;return this.cachedPatterns.has(n)?s=this.cachedPatterns.get(n):(s=(0,X.getShadingPattern)(this.getObject(n)),this.cachedPatterns.set(n,s)),o&&(s.matrix=o),s}shadingFill(n){if(!this.contentVisible)return;const o=this.ctx;this.save();const s=this._getPattern(n);o.fillStyle=s.getPattern(o,this,(0,p.getCurrentTransformInverse)(o),X.PathType.SHADING);const h=(0,p.getCurrentTransformInverse)(o);if(h){const{width:u,height:E}=o.canvas,[M,H,st,Q]=a.Util.getAxialAlignedBoundingBox([0,0,u,E],h);this.ctx.fillRect(M,H,st-M,Q-H)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(n,o){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(n)&&n.length===6&&this.transform(...n),this.baseTransform=(0,p.getCurrentTransform)(this.ctx),o)){const s=o[2]-o[0],h=o[3]-o[1];this.ctx.rect(o[0],o[1],s,h),this.current.updateRectMinMax((0,p.getCurrentTransform)(this.ctx),o),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(n){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const o=this.ctx;n.isolated||(0,a.info)("TODO: Support non-isolated groups."),n.knockout&&(0,a.warn)("Knockout groups not supported.");const s=(0,p.getCurrentTransform)(o);if(n.matrix&&o.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let h=a.Util.getAxialAlignedBoundingBox(n.bbox,(0,p.getCurrentTransform)(o));const u=[0,0,o.canvas.width,o.canvas.height];h=a.Util.intersect(h,u)||[0,0,0,0];const E=Math.floor(h[0]),M=Math.floor(h[1]);let H=Math.max(Math.ceil(h[2])-E,1),st=Math.max(Math.ceil(h[3])-M,1),Q=1,ot=1;H>R&&(Q=H/R,H=R),st>R&&(ot=st/R,st=R),this.current.startNewPathAndClipBox([0,0,H,st]);let ht="groupAt"+this.groupLevel;n.smask&&(ht+="_smask_"+this.smaskCounter++%2);const gt=this.cachedCanvases.getCanvas(ht,H,st),dt=gt.context;dt.scale(1/Q,1/ot),dt.translate(-E,-M),dt.transform(...s),n.smask?this.smaskStack.push({canvas:gt.canvas,context:dt,offsetX:E,offsetY:M,scaleX:Q,scaleY:ot,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}):(o.setTransform(1,0,0,1,0,0),o.translate(E,M),o.scale(Q,ot),o.save()),l(o,dt),this.ctx=dt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++}endGroup(n){if(!this.contentVisible)return;this.groupLevel--;const o=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,n.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const h=(0,p.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...h);const u=a.Util.getAxialAlignedBoundingBox([0,0,o.canvas.width,o.canvas.height],h);this.ctx.drawImage(o.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(n,o,s,h,u){if(Y(this,V,Ze).call(this),d(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(o)&&o.length===4){const E=o[2]-o[0],M=o[3]-o[1];if(u&&this.annotationCanvasMap){s=s.slice(),s[4]-=o[0],s[5]-=o[1],o=o.slice(),o[0]=o[1]=0,o[2]=E,o[3]=M;const[H,st]=a.Util.singularValueDecompose2dScale((0,p.getCurrentTransform)(this.ctx)),{viewportScale:Q}=this,ot=Math.ceil(E*this.outputScaleX*Q),ht=Math.ceil(M*this.outputScaleY*Q);this.annotationCanvas=this.canvasFactory.create(ot,ht);const{canvas:gt,context:dt}=this.annotationCanvas;this.annotationCanvasMap.set(n,gt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=dt,this.ctx.save(),this.ctx.setTransform(H,0,0,-st,0,M*st),d(this.ctx)}else d(this.ctx),this.ctx.rect(o[0],o[1],E,M),this.ctx.clip(),this.endPath()}this.current=new T(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...h)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Y(this,mt,tn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(n){if(!this.contentVisible)return;const o=n.count;n=this.getObject(n.data,n),n.count=o;const s=this.ctx,h=this.processingType3;if(h&&(h.compiled===void 0&&(h.compiled=A(n)),h.compiled)){h.compiled(s);return}const u=this._createMaskCanvas(n),E=u.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(E,u.offsetX,u.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(n,o,s=0,h=0,u,E){if(!this.contentVisible)return;n=this.getObject(n.data,n);const M=this.ctx;M.save();const H=(0,p.getCurrentTransform)(M);M.transform(o,s,h,u,0,0);const st=this._createMaskCanvas(n);M.setTransform(1,0,0,1,st.offsetX-H[4],st.offsetY-H[5]);for(let Q=0,ot=E.length;Q<ot;Q+=2){const ht=a.Util.transform(H,[o,s,h,u,E[Q],E[Q+1]]),[gt,dt]=a.Util.applyTransform([0,0],ht);M.drawImage(st.canvas,gt,dt)}M.restore(),this.compose()}paintImageMaskXObjectGroup(n){if(!this.contentVisible)return;const o=this.ctx,s=this.current.fillColor,h=this.current.patternFill;for(const u of n){const{data:E,width:M,height:H,transform:st}=u,Q=this.cachedCanvases.getCanvas("maskCanvas",M,H),ot=Q.context;ot.save();const ht=this.getObject(E,u);y(ot,ht),ot.globalCompositeOperation="source-in",ot.fillStyle=h?s.getPattern(ot,this,(0,p.getCurrentTransformInverse)(o),X.PathType.FILL):s,ot.fillRect(0,0,M,H),ot.restore(),o.save(),o.transform(...st),o.scale(1,-1),f(o,Q.canvas,0,0,M,H,0,-1,1,1),o.restore()}this.compose()}paintImageXObject(n){if(!this.contentVisible)return;const o=this.getObject(n);if(!o){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(o)}paintImageXObjectRepeat(n,o,s,h){if(!this.contentVisible)return;const u=this.getObject(n);if(!u){(0,a.warn)("Dependent image isn't ready yet");return}const E=u.width,M=u.height,H=[];for(let st=0,Q=h.length;st<Q;st+=2)H.push({transform:[o,0,0,s,h[st],h[st+1]],x:0,y:0,w:E,h:M});this.paintInlineImageXObjectGroup(u,H)}applyTransferMapsToCanvas(n){return this.current.transferMaps!=="none"&&(n.filter=this.current.transferMaps,n.drawImage(n.canvas,0,0),n.filter="none"),n.canvas}applyTransferMapsToBitmap(n){if(this.current.transferMaps==="none")return n.bitmap;const{bitmap:o,width:s,height:h}=n,u=this.cachedCanvases.getCanvas("inlineImage",s,h),E=u.context;return E.filter=this.current.transferMaps,E.drawImage(o,0,0),E.filter="none",u.canvas}paintInlineImageXObject(n){if(!this.contentVisible)return;const o=n.width,s=n.height,h=this.ctx;if(this.save(),!a.isNodeJS){const{filter:M}=h;M!=="none"&&M!==""&&(h.filter="none")}h.scale(1/o,-1/s);let u;if(n.bitmap)u=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)u=n;else{const H=this.cachedCanvases.getCanvas("inlineImage",o,s).context;x(H,n),u=this.applyTransferMapsToCanvas(H)}const E=this._scaleImage(u,(0,p.getCurrentTransformInverse)(h));h.imageSmoothingEnabled=W((0,p.getCurrentTransform)(h),n.interpolate),f(h,E.img,0,0,E.paintWidth,E.paintHeight,0,-s,o,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(n,o){if(!this.contentVisible)return;const s=this.ctx;let h;if(n.bitmap)h=n.bitmap;else{const u=n.width,E=n.height,H=this.cachedCanvases.getCanvas("inlineImage",u,E).context;x(H,n),h=this.applyTransferMapsToCanvas(H)}for(const u of o)s.save(),s.transform(...u.transform),s.scale(1,-1),f(s,h,u.x,u.y,u.w,u.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(n){}markPointProps(n,o){}beginMarkedContent(n){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(n,o){n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(o)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(n){const o=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;this.pendingClip&&(o||(this.pendingClip===it?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const n=(0,p.getCurrentTransform)(this.ctx);if(n[1]===0&&n[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(n[0]),Math.abs(n[3]));else{const o=Math.abs(n[0]*n[3]-n[2]*n[1]),s=Math.hypot(n[0],n[2]),h=Math.hypot(n[1],n[3]);this._cachedGetSinglePixelWidth=Math.max(s,h)/o}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:n}=this.current,{a:o,b:s,c:h,d:u}=this.ctx.getTransform();let E,M;if(s===0&&h===0){const H=Math.abs(o),st=Math.abs(u);if(H===st)if(n===0)E=M=1/H;else{const Q=H*n;E=M=Q<1?1/Q:1}else if(n===0)E=1/H,M=1/st;else{const Q=H*n,ot=st*n;E=Q<1?1/Q:1,M=ot<1?1/ot:1}}else{const H=Math.abs(o*u-s*h),st=Math.hypot(o,s),Q=Math.hypot(h,u);if(n===0)E=Q/H,M=st/H;else{const ot=n*H;E=Q>ot?Q/ot:1,M=st>ot?st/ot:1}}this._cachedScaleForStroking[0]=E,this._cachedScaleForStroking[1]=M}return this._cachedScaleForStroking}rescaleAndStroke(n){const{ctx:o}=this,{lineWidth:s}=this.current,[h,u]=this.getScaleForStroking();if(o.lineWidth=s||1,h===1&&u===1){o.stroke();return}const E=o.getLineDash();if(n&&o.save(),o.scale(h,u),E.length>0){const M=Math.max(h,u);o.setLineDash(E.map(H=>H/M)),o.lineDashOffset/=M}o.stroke(),n&&o.restore()}isContentVisible(){for(let n=this.markedContentStack.length-1;n>=0;n--)if(!this.markedContentStack[n].visible)return!1;return!0}};V=new WeakSet,Ze=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},mt=new WeakSet,tn=function(){if(this.pageColors){const n=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(n!=="none"){const o=this.ctx.filter;this.ctx.filter=n,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=o}}};let at=xt;i.CanvasGraphics=at;for(const P in a.OPS)at.prototype[P]!==void 0&&(at.prototype[a.OPS[P]]=at.prototype[P])},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=C;var a=N(1),p=N(6);const X={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=X;function G(A,T){if(!T)return;const x=T[2]-T[0],y=T[3]-T[1],l=new Path2D;l.rect(T[0],T[1],x,y),A.clip(l)}class ft{constructor(){this.constructor===ft&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class D extends ft{constructor(T){super(),this._type=T[1],this._bbox=T[2],this._colorStops=T[3],this._p0=T[4],this._p1=T[5],this._r0=T[6],this._r1=T[7],this.matrix=null}_createGradient(T){let x;this._type==="axial"?x=T.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(x=T.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const y of this._colorStops)x.addColorStop(y[0],y[1]);return x}getPattern(T,x,y,l){let d;if(l===X.STROKE||l===X.FILL){const F=x.current.getClippedPathBoundingBox(l,(0,p.getCurrentTransform)(T))||[0,0,0,0],b=Math.ceil(F[2]-F[0])||1,c=Math.ceil(F[3]-F[1])||1,k=x.cachedCanvases.getCanvas("pattern",b,c,!0),g=k.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-F[0],-F[1]),y=a.Util.transform(y,[1,0,0,1,F[0],F[1]]),g.transform(...x.baseTransform),this.matrix&&g.transform(...this.matrix),G(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),d=T.createPattern(k.canvas,"no-repeat");const W=new DOMMatrix(y);d.setTransform(W)}else G(T,this._bbox),d=this._createGradient(T);return d}}function R(A,T,x,y,l,d,F,b){const c=T.coords,k=T.colors,g=A.data,W=A.width*4;let $;c[x+1]>c[y+1]&&($=x,x=y,y=$,$=d,d=F,F=$),c[y+1]>c[l+1]&&($=y,y=l,l=$,$=F,F=b,b=$),c[x+1]>c[y+1]&&($=x,x=y,y=$,$=d,d=F,F=$);const w=(c[x]+T.offsetX)*T.scaleX,q=(c[x+1]+T.offsetY)*T.scaleY,it=(c[y]+T.offsetX)*T.scaleX,at=(c[y+1]+T.offsetY)*T.scaleY,V=(c[l]+T.offsetX)*T.scaleX,ct=(c[l+1]+T.offsetY)*T.scaleY;if(q>=ct)return;const mt=k[d],St=k[d+1],xt=k[d+2],P=k[F],n=k[F+1],o=k[F+2],s=k[b],h=k[b+1],u=k[b+2],E=Math.round(q),M=Math.round(ct);let H,st,Q,ot,ht,gt,dt,Pt;for(let It=E;It<=M;It++){if(It<at){const tt=It<q?0:(q-It)/(q-at);H=w-(w-it)*tt,st=mt-(mt-P)*tt,Q=St-(St-n)*tt,ot=xt-(xt-o)*tt}else{let tt;It>ct?tt=1:at===ct?tt=0:tt=(at-It)/(at-ct),H=it-(it-V)*tt,st=P-(P-s)*tt,Q=n-(n-h)*tt,ot=o-(o-u)*tt}let Et;It<q?Et=0:It>ct?Et=1:Et=(q-It)/(q-ct),ht=w-(w-V)*Et,gt=mt-(mt-s)*Et,dt=St-(St-h)*Et,Pt=xt-(xt-u)*Et;const Lt=Math.round(Math.min(H,ht)),bt=Math.round(Math.max(H,ht));let nt=W*It+Lt*4;for(let tt=Lt;tt<=bt;tt++)Et=(H-tt)/(H-ht),Et<0?Et=0:Et>1&&(Et=1),g[nt++]=st-(st-gt)*Et|0,g[nt++]=Q-(Q-dt)*Et|0,g[nt++]=ot-(ot-Pt)*Et|0,g[nt++]=255}}function m(A,T,x){const y=T.coords,l=T.colors;let d,F;switch(T.type){case"lattice":const b=T.verticesPerRow,c=Math.floor(y.length/b)-1,k=b-1;for(d=0;d<c;d++){let g=d*b;for(let W=0;W<k;W++,g++)R(A,x,y[g],y[g+1],y[g+b],l[g],l[g+1],l[g+b]),R(A,x,y[g+b+1],y[g+1],y[g+b],l[g+b+1],l[g+1],l[g+b])}break;case"triangles":for(d=0,F=y.length;d<F;d+=3)R(A,x,y[d],y[d+1],y[d+2],l[d],l[d+1],l[d+2]);break;default:throw new Error("illegal figure")}}class I extends ft{constructor(T){super(),this._coords=T[2],this._colors=T[3],this._figures=T[4],this._bounds=T[5],this._bbox=T[7],this._background=T[8],this.matrix=null}_createMeshCanvas(T,x,y){const b=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),k=Math.ceil(this._bounds[2])-b,g=Math.ceil(this._bounds[3])-c,W=Math.min(Math.ceil(Math.abs(k*T[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(g*T[1]*1.1)),3e3),w=k/W,q=g/$,it={coords:this._coords,colors:this._colors,offsetX:-b,offsetY:-c,scaleX:1/w,scaleY:1/q},at=W+2*2,V=$+2*2,ct=y.getCanvas("mesh",at,V,!1),mt=ct.context,St=mt.createImageData(W,$);if(x){const P=St.data;for(let n=0,o=P.length;n<o;n+=4)P[n]=x[0],P[n+1]=x[1],P[n+2]=x[2],P[n+3]=255}for(const P of this._figures)m(St,P,it);return mt.putImageData(St,2,2),{canvas:ct.canvas,offsetX:b-2*w,offsetY:c-2*q,scaleX:w,scaleY:q}}getPattern(T,x,y,l){G(T,this._bbox);let d;if(l===X.SHADING)d=a.Util.singularValueDecompose2dScale((0,p.getCurrentTransform)(T));else if(d=a.Util.singularValueDecompose2dScale(x.baseTransform),this.matrix){const b=a.Util.singularValueDecompose2dScale(this.matrix);d=[d[0]*b[0],d[1]*b[1]]}const F=this._createMeshCanvas(d,l===X.SHADING?null:this._background,x.cachedCanvases);return l!==X.SHADING&&(T.setTransform(...x.baseTransform),this.matrix&&T.transform(...this.matrix)),T.translate(F.offsetX,F.offsetY),T.scale(F.scaleX,F.scaleY),T.createPattern(F.canvas,"no-repeat")}}class O extends ft{getPattern(){return"hotpink"}}function C(A){switch(A[0]){case"RadialAxial":return new D(A);case"Mesh":return new I(A);case"Dummy":return new O}throw new Error(`Unknown IR type: ${A[0]}`)}const S={COLORED:1,UNCOLORED:2},f=class f{constructor(T,x,y,l,d){this.operatorList=T[2],this.matrix=T[3]||[1,0,0,1,0,0],this.bbox=T[4],this.xstep=T[5],this.ystep=T[6],this.paintType=T[7],this.tilingType=T[8],this.color=x,this.ctx=y,this.canvasGraphicsFactory=l,this.baseTransform=d}createPatternCanvas(T){const x=this.operatorList,y=this.bbox,l=this.xstep,d=this.ystep,F=this.paintType,b=this.tilingType,c=this.color,k=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+b);const g=y[0],W=y[1],$=y[2],w=y[3],q=a.Util.singularValueDecompose2dScale(this.matrix),it=a.Util.singularValueDecompose2dScale(this.baseTransform),at=[q[0]*it[0],q[1]*it[1]],V=this.getSizeAndScale(l,this.ctx.canvas.width,at[0]),ct=this.getSizeAndScale(d,this.ctx.canvas.height,at[1]),mt=T.cachedCanvases.getCanvas("pattern",V.size,ct.size,!0),St=mt.context,xt=k.createCanvasGraphics(St);xt.groupLevel=T.groupLevel,this.setFillAndStrokeStyleToContext(xt,F,c);let P=g,n=W,o=$,s=w;return g<0&&(P=0,o+=Math.abs(g)),W<0&&(n=0,s+=Math.abs(W)),St.translate(-(V.scale*P),-(ct.scale*n)),xt.transform(V.scale,0,0,ct.scale,0,0),St.save(),this.clipBbox(xt,P,n,o,s),xt.baseTransform=(0,p.getCurrentTransform)(xt.ctx),xt.executeOperatorList(x),xt.endDrawing(),{canvas:mt.canvas,scaleX:V.scale,scaleY:ct.scale,offsetX:P,offsetY:n}}getSizeAndScale(T,x,y){T=Math.abs(T);const l=Math.max(f.MAX_PATTERN_SIZE,x);let d=Math.ceil(T*y);return d>=l?d=l:y=d/T,{scale:y,size:d}}clipBbox(T,x,y,l,d){const F=l-x,b=d-y;T.ctx.rect(x,y,F,b),T.current.updateRectMinMax((0,p.getCurrentTransform)(T.ctx),[x,y,l,d]),T.clip(),T.endPath()}setFillAndStrokeStyleToContext(T,x,y){const l=T.ctx,d=T.current;switch(x){case S.COLORED:const F=this.ctx;l.fillStyle=F.fillStyle,l.strokeStyle=F.strokeStyle,d.fillColor=F.fillStyle,d.strokeColor=F.strokeStyle;break;case S.UNCOLORED:const b=a.Util.makeHexColor(y[0],y[1],y[2]);l.fillStyle=b,l.strokeStyle=b,d.fillColor=b,d.strokeColor=b;break;default:throw new a.FormatError(`Unsupported paint type: ${x}`)}}getPattern(T,x,y,l){let d=y;l!==X.SHADING&&(d=a.Util.transform(d,x.baseTransform),this.matrix&&(d=a.Util.transform(d,this.matrix)));const F=this.createPatternCanvas(x);let b=new DOMMatrix(d);b=b.translate(F.offsetX,F.offsetY),b=b.scale(1/F.scaleX,1/F.scaleY);const c=T.createPattern(F.canvas,"repeat");return c.setTransform(b),c}};ne(f,"MAX_PATTERN_SIZE",3e3);let v=f;i.TilingPattern=v},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.convertBlackAndWhiteToRGBA=X,i.convertToRGBA=p,i.grayToRGBA=ft;var a=N(1);function p(D){switch(D.kind){case a.ImageKind.GRAYSCALE_1BPP:return X(D);case a.ImageKind.RGB_24BPP:return G(D)}return null}function X({src:D,srcPos:R=0,dest:m,width:I,height:O,nonBlackColor:C=4294967295,inverseDecode:S=!1}){const v=a.FeatureTest.isLittleEndian?4278190080:255,[f,A]=S?[C,v]:[v,C],T=I>>3,x=I&7,y=D.length;m=new Uint32Array(m.buffer);let l=0;for(let d=0;d<O;d++){for(const b=R+T;R<b;R++){const c=R<y?D[R]:255;m[l++]=c&128?A:f,m[l++]=c&64?A:f,m[l++]=c&32?A:f,m[l++]=c&16?A:f,m[l++]=c&8?A:f,m[l++]=c&4?A:f,m[l++]=c&2?A:f,m[l++]=c&1?A:f}if(x===0)continue;const F=R<y?D[R++]:255;for(let b=0;b<x;b++)m[l++]=F&1<<7-b?A:f}return{srcPos:R,destPos:l}}function G({src:D,srcPos:R=0,dest:m,destPos:I=0,width:O,height:C}){let S=0;const v=D.length>>2,f=new Uint32Array(D.buffer,R,v);if(a.FeatureTest.isLittleEndian){for(;S<v-2;S+=3,I+=4){const A=f[S],T=f[S+1],x=f[S+2];m[I]=A|4278190080,m[I+1]=A>>>24|T<<8|4278190080,m[I+2]=T>>>16|x<<16|4278190080,m[I+3]=x>>>8|4278190080}for(let A=S*4,T=D.length;A<T;A+=3)m[I++]=D[A]|D[A+1]<<8|D[A+2]<<16|4278190080}else{for(;S<v-2;S+=3,I+=4){const A=f[S],T=f[S+1],x=f[S+2];m[I]=A|255,m[I+1]=A<<24|T>>>8|255,m[I+2]=T<<16|x>>>16|255,m[I+3]=x<<8|255}for(let A=S*4,T=D.length;A<T;A+=3)m[I++]=D[A]<<24|D[A+1]<<16|D[A+2]<<8|255}return{srcPos:R,destPos:I}}function ft(D,R){if(a.FeatureTest.isLittleEndian)for(let m=0,I=D.length;m<I;m++)R[m]=D[m]*65793|4278190080;else for(let m=0,I=D.length;m<I;m++)R[m]=D[m]*16843008|255}},(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const N=Object.create(null);i.GlobalWorkerOptions=N,N.workerPort=null,N.workerSrc=""},(L,i,N)=>{var D,kn,m,Mn,O,Re;Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0;var a=N(1);const p={UNKNOWN:0,DATA:1,ERROR:2},X={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function G(S){switch(S instanceof Error||typeof S=="object"&&S!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),S.name){case"AbortException":return new a.AbortException(S.message);case"MissingPDFException":return new a.MissingPDFException(S.message);case"PasswordException":return new a.PasswordException(S.message,S.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(S.message,S.status);case"UnknownErrorException":return new a.UnknownErrorException(S.message,S.details);default:return new a.UnknownErrorException(S.message,S.toString())}}class ft{constructor(v,f,A){U(this,D);U(this,m);U(this,O);this.sourceName=v,this.targetName=f,this.comObj=A,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=T=>{const x=T.data;if(x.targetName!==this.sourceName)return;if(x.stream){Y(this,m,Mn).call(this,x);return}if(x.callback){const l=x.callbackId,d=this.callbackCapabilities[l];if(!d)throw new Error(`Cannot resolve callback ${l}`);if(delete this.callbackCapabilities[l],x.callback===p.DATA)d.resolve(x.data);else if(x.callback===p.ERROR)d.reject(G(x.reason));else throw new Error("Unexpected callback case");return}const y=this.actionHandler[x.action];if(!y)throw new Error(`Unknown action from worker: ${x.action}`);if(x.callbackId){const l=this.sourceName,d=x.sourceName;new Promise(function(F){F(y(x.data))}).then(function(F){A.postMessage({sourceName:l,targetName:d,callback:p.DATA,callbackId:x.callbackId,data:F})},function(F){A.postMessage({sourceName:l,targetName:d,callback:p.ERROR,callbackId:x.callbackId,reason:G(F)})});return}if(x.streamId){Y(this,D,kn).call(this,x);return}y(x.data)},A.addEventListener("message",this._onComObjOnMessage)}on(v,f){const A=this.actionHandler;if(A[v])throw new Error(`There is already an actionName called "${v}"`);A[v]=f}send(v,f,A){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:f},A)}sendWithPromise(v,f,A){const T=this.callbackId++,x=new a.PromiseCapability;this.callbackCapabilities[T]=x;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:T,data:f},A)}catch(y){x.reject(y)}return x.promise}sendWithStream(v,f,A,T){const x=this.streamId++,y=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:F=>{const b=new a.PromiseCapability;return this.streamControllers[x]={controller:F,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:y,targetName:l,action:v,streamId:x,data:f,desiredSize:F.desiredSize},T),b.promise},pull:F=>{const b=new a.PromiseCapability;return this.streamControllers[x].pullCall=b,d.postMessage({sourceName:y,targetName:l,stream:X.PULL,streamId:x,desiredSize:F.desiredSize}),b.promise},cancel:F=>{(0,a.assert)(F instanceof Error,"cancel must have a valid reason");const b=new a.PromiseCapability;return this.streamControllers[x].cancelCall=b,this.streamControllers[x].isClosed=!0,d.postMessage({sourceName:y,targetName:l,stream:X.CANCEL,streamId:x,reason:G(F)}),b.promise}},A)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}D=new WeakSet,kn=function(v){const f=v.streamId,A=this.sourceName,T=v.sourceName,x=this.comObj,y=this,l=this.actionHandler[v.action],d={enqueue(F,b=1,c){if(this.isCancelled)return;const k=this.desiredSize;this.desiredSize-=b,k>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),x.postMessage({sourceName:A,targetName:T,stream:X.ENQUEUE,streamId:f,chunk:F},c)},close(){this.isCancelled||(this.isCancelled=!0,x.postMessage({sourceName:A,targetName:T,stream:X.CLOSE,streamId:f}),delete y.streamSinks[f])},error(F){(0,a.assert)(F instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,x.postMessage({sourceName:A,targetName:T,stream:X.ERROR,streamId:f,reason:G(F)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[f]=d,new Promise(function(F){F(l(v.data,d))}).then(function(){x.postMessage({sourceName:A,targetName:T,stream:X.START_COMPLETE,streamId:f,success:!0})},function(F){x.postMessage({sourceName:A,targetName:T,stream:X.START_COMPLETE,streamId:f,reason:G(F)})})},m=new WeakSet,Mn=function(v){const f=v.streamId,A=this.sourceName,T=v.sourceName,x=this.comObj,y=this.streamControllers[f],l=this.streamSinks[f];switch(v.stream){case X.START_COMPLETE:v.success?y.startCall.resolve():y.startCall.reject(G(v.reason));break;case X.PULL_COMPLETE:v.success?y.pullCall.resolve():y.pullCall.reject(G(v.reason));break;case X.PULL:if(!l){x.postMessage({sourceName:A,targetName:T,stream:X.PULL_COMPLETE,streamId:f,success:!0});break}l.desiredSize<=0&&v.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=v.desiredSize,new Promise(function(d){var F;d((F=l.onPull)==null?void 0:F.call(l))}).then(function(){x.postMessage({sourceName:A,targetName:T,stream:X.PULL_COMPLETE,streamId:f,success:!0})},function(d){x.postMessage({sourceName:A,targetName:T,stream:X.PULL_COMPLETE,streamId:f,reason:G(d)})});break;case X.ENQUEUE:if((0,a.assert)(y,"enqueue should have stream controller"),y.isClosed)break;y.controller.enqueue(v.chunk);break;case X.CLOSE:if((0,a.assert)(y,"close should have stream controller"),y.isClosed)break;y.isClosed=!0,y.controller.close(),Y(this,O,Re).call(this,y,f);break;case X.ERROR:(0,a.assert)(y,"error should have stream controller"),y.controller.error(G(v.reason)),Y(this,O,Re).call(this,y,f);break;case X.CANCEL_COMPLETE:v.success?y.cancelCall.resolve():y.cancelCall.reject(G(v.reason)),Y(this,O,Re).call(this,y,f);break;case X.CANCEL:if(!l)break;new Promise(function(d){var F;d((F=l.onCancel)==null?void 0:F.call(l,G(v.reason)))}).then(function(){x.postMessage({sourceName:A,targetName:T,stream:X.CANCEL_COMPLETE,streamId:f,success:!0})},function(d){x.postMessage({sourceName:A,targetName:T,stream:X.CANCEL_COMPLETE,streamId:f,reason:G(d)})}),l.sinkCapability.reject(G(v.reason)),l.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}},O=new WeakSet,Re=async function(v,f){var A,T,x;await Promise.allSettled([(A=v.startCall)==null?void 0:A.promise,(T=v.pullCall)==null?void 0:T.promise,(x=v.cancelCall)==null?void 0:x.promise]),delete this.streamControllers[f]},i.MessageHandler=ft},(L,i,N)=>{var X,G;Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var a=N(1);class p{constructor({parsedData:D,rawData:R}){U(this,X,void 0);U(this,G,void 0);rt(this,X,D),rt(this,G,R)}getRaw(){return t(this,G)}get(D){return t(this,X).get(D)??null}getAll(){return(0,a.objectFromMap)(t(this,X))}has(D){return t(this,X).has(D)}}X=new WeakMap,G=new WeakMap,i.Metadata=p},(L,i,N)=>{var D,R,m,I,O,C,en;Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var a=N(1),p=N(8);const X=Symbol("INTERNAL");class G{constructor(f,A){U(this,D,!0);this.name=f,this.intent=A}get visible(){return t(this,D)}_setVisible(f,A){f!==X&&(0,a.unreachable)("Internal method `_setVisible` called."),rt(this,D,A)}}D=new WeakMap;class ft{constructor(f){U(this,C);U(this,R,null);U(this,m,new Map);U(this,I,null);U(this,O,null);if(this.name=null,this.creator=null,f!==null){this.name=f.name,this.creator=f.creator,rt(this,O,f.order);for(const A of f.groups)t(this,m).set(A.id,new G(A.name,A.intent));if(f.baseState==="OFF")for(const A of t(this,m).values())A._setVisible(X,!1);for(const A of f.on)t(this,m).get(A)._setVisible(X,!0);for(const A of f.off)t(this,m).get(A)._setVisible(X,!1);rt(this,I,this.getHash())}}isVisible(f){if(t(this,m).size===0)return!0;if(!f)return(0,a.warn)("Optional content group not defined."),!0;if(f.type==="OCG")return t(this,m).has(f.id)?t(this,m).get(f.id).visible:((0,a.warn)(`Optional content group not found: ${f.id}`),!0);if(f.type==="OCMD"){if(f.expression)return Y(this,C,en).call(this,f.expression);if(!f.policy||f.policy==="AnyOn"){for(const A of f.ids){if(!t(this,m).has(A))return(0,a.warn)(`Optional content group not found: ${A}`),!0;if(t(this,m).get(A).visible)return!0}return!1}else if(f.policy==="AllOn"){for(const A of f.ids){if(!t(this,m).has(A))return(0,a.warn)(`Optional content group not found: ${A}`),!0;if(!t(this,m).get(A).visible)return!1}return!0}else if(f.policy==="AnyOff"){for(const A of f.ids){if(!t(this,m).has(A))return(0,a.warn)(`Optional content group not found: ${A}`),!0;if(!t(this,m).get(A).visible)return!0}return!1}else if(f.policy==="AllOff"){for(const A of f.ids){if(!t(this,m).has(A))return(0,a.warn)(`Optional content group not found: ${A}`),!0;if(t(this,m).get(A).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${f.policy}.`),!0}return(0,a.warn)(`Unknown group type ${f.type}.`),!0}setVisibility(f,A=!0){if(!t(this,m).has(f)){(0,a.warn)(`Optional content group not found: ${f}`);return}t(this,m).get(f)._setVisible(X,!!A),rt(this,R,null)}get hasInitialVisibility(){return t(this,I)===null||this.getHash()===t(this,I)}getOrder(){return t(this,m).size?t(this,O)?t(this,O).slice():[...t(this,m).keys()]:null}getGroups(){return t(this,m).size>0?(0,a.objectFromMap)(t(this,m)):null}getGroup(f){return t(this,m).get(f)||null}getHash(){if(t(this,R)!==null)return t(this,R);const f=new p.MurmurHash3_64;for(const[A,T]of t(this,m))f.update(`${A}:${T.visible}`);return rt(this,R,f.hexdigest())}}R=new WeakMap,m=new WeakMap,I=new WeakMap,O=new WeakMap,C=new WeakSet,en=function(f){const A=f.length;if(A<2)return!0;const T=f[0];for(let x=1;x<A;x++){const y=f[x];let l;if(Array.isArray(y))l=Y(this,C,en).call(this,y);else if(t(this,m).has(y))l=t(this,m).get(y).visible;else return(0,a.warn)(`Optional content group not found: ${y}`),!0;switch(T){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return T==="And"},i.OptionalContentConfig=ft},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0;var a=N(1),p=N(6);class X{constructor({length:R,initialData:m,progressiveDone:I=!1,contentDispositionFilename:O=null,disableRange:C=!1,disableStream:S=!1},v){if((0,a.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=I,this._contentDispositionFilename=O,(m==null?void 0:m.length)>0){const f=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!S,this._isRangeSupported=!C,this._contentLength=R,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((f,A)=>{this._onReceiveData({begin:f,chunk:A})}),this._pdfDataRangeTransport.addProgressListener((f,A)=>{this._onProgress({loaded:f,total:A})}),this._pdfDataRangeTransport.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:R,chunk:m}){const I=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;if(R===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const O=this._rangeReaders.some(function(C){return C._begin!==R?!1:(C._enqueue(I),!0)});(0,a.assert)(O,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var R;return((R=this._fullRequestReader)==null?void 0:R._loaded)??0}_onProgress(R){var m,I,O,C;R.total===void 0?(I=(m=this._rangeReaders[0])==null?void 0:m.onProgress)==null||I.call(m,{loaded:R.loaded}):(C=(O=this._fullRequestReader)==null?void 0:O.onProgress)==null||C.call(O,{loaded:R.loaded,total:R.total})}_onProgressiveDone(){var R;(R=this._fullRequestReader)==null||R.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(R){const m=this._rangeReaders.indexOf(R);m>=0&&this._rangeReaders.splice(m,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const R=this._queuedChunks;return this._queuedChunks=null,new G(this,R,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(R,m){if(m<=this._progressiveDataLength)return null;const I=new ft(this,R,m);return this._pdfDataRangeTransport.requestDataRange(R,m),this._rangeReaders.push(I),I}cancelAllRequests(R){var m;(m=this._fullRequestReader)==null||m.cancel(R);for(const I of this._rangeReaders.slice(0))I.cancel(R);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=X;class G{constructor(R,m,I=!1,O=null){this._stream=R,this._done=I||!1,this._filename=(0,p.isPdfFile)(O)?O:null,this._queuedChunks=m||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),R._fullRequestReader=this,this.onProgress=null}_enqueue(R){this._done||(this._requests.length>0?this._requests.shift().resolve({value:R,done:!1}):this._queuedChunks.push(R),this._loaded+=R.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const R=new a.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ft{constructor(R,m,I){this._stream=R,this._begin=m,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(R){if(!this._done){if(this._requests.length===0)this._queuedChunk=R;else{this._requests.shift().resolve({value:R,done:!1});for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const R=new a.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0;var a=N(1),p=N(20);function X(I,O,C){return{method:"GET",headers:I,signal:C.signal,mode:"cors",credentials:O?"include":"same-origin",redirect:"follow"}}function G(I){const O=new Headers;for(const C in I){const S=I[C];S!==void 0&&O.append(C,S)}return O}function ft(I){return I instanceof Uint8Array?I.buffer:I instanceof ArrayBuffer?I:((0,a.warn)(`getArrayBuffer - unexpected data format: ${I}`),new Uint8Array(I).buffer)}class D{constructor(O){this.source=O,this.isHttp=/^https?:/i.test(O.url),this.httpHeaders=this.isHttp&&O.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var O;return((O=this._fullRequestReader)==null?void 0:O._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new R(this),this._fullRequestReader}getRangeReader(O,C){if(C<=this._progressiveDataLength)return null;const S=new m(this,O,C);return this._rangeRequestReaders.push(S),S}cancelAllRequests(O){var C;(C=this._fullRequestReader)==null||C.cancel(O);for(const S of this._rangeRequestReaders.slice(0))S.cancel(O)}}i.PDFFetchStream=D;class R{constructor(O){this._stream=O,this._reader=null,this._loaded=0,this._filename=null;const C=O.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=new a.PromiseCapability,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=G(this._stream.httpHeaders);const S=C.url;fetch(S,X(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,p.validateResponseStatus)(v.status))throw(0,p.createResponseStatusError)(v.status,S);this._reader=v.body.getReader(),this._headersCapability.resolve();const f=x=>v.headers.get(x),{allowRangeRequests:A,suggestedLength:T}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=T||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(f),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var S;await this._headersCapability.promise;const{value:O,done:C}=await this._reader.read();return C?{value:O,done:C}:(this._loaded+=O.byteLength,(S=this.onProgress)==null||S.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ft(O),done:!1})}cancel(O){var C;(C=this._reader)==null||C.cancel(O),this._abortController.abort()}}class m{constructor(O,C,S){this._stream=O,this._reader=null,this._loaded=0;const v=O.source;this._withCredentials=v.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!v.disableStream,this._abortController=new AbortController,this._headers=G(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${S-1}`);const f=v.url;fetch(f,X(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,p.validateResponseStatus)(A.status))throw(0,p.createResponseStatusError)(A.status,f);this._readCapability.resolve(),this._reader=A.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var S;await this._readCapability.promise;const{value:O,done:C}=await this._reader.read();return C?{value:O,done:C}:(this._loaded+=O.byteLength,(S=this.onProgress)==null||S.call(this,{loaded:this._loaded}),{value:ft(O),done:!1})}cancel(O){var C;(C=this._reader)==null||C.cancel(O),this._abortController.abort()}}},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=D,i.extractFilenameFromHeader=ft,i.validateRangeRequestCapabilities=G,i.validateResponseStatus=R;var a=N(1),p=N(21),X=N(6);function G({getResponseHeader:m,isHttp:I,rangeChunkSize:O,disableRange:C}){const S={allowRangeRequests:!1,suggestedLength:void 0},v=parseInt(m("Content-Length"),10);return!Number.isInteger(v)||(S.suggestedLength=v,v<=2*O)||C||!I||m("Accept-Ranges")!=="bytes"||(m("Content-Encoding")||"identity")!=="identity"||(S.allowRangeRequests=!0),S}function ft(m){const I=m("Content-Disposition");if(I){let O=(0,p.getFilenameFromContentDispositionHeader)(I);if(O.includes("%"))try{O=decodeURIComponent(O)}catch{}if((0,X.isPdfFile)(O))return O}return null}function D(m,I){return m===404||m===0&&I.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+I+'".'):new a.UnexpectedResponseException(`Unexpected server response (${m}) while retrieving PDF "${I}".`,m)}function R(m){return m===200||m===206}},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=p;var a=N(1);function p(X){let G=!0,ft=D("filename\\*","i").exec(X);if(ft){ft=ft[1];let v=O(ft);return v=unescape(v),v=C(v),v=S(v),m(v)}if(ft=I(X),ft){const v=S(ft);return m(v)}if(ft=D("filename","i").exec(X),ft){ft=ft[1];let v=O(ft);return v=S(v),m(v)}function D(v,f){return new RegExp("(?:^|;)\\s*"+v+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function R(v,f){if(v){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const A=new TextDecoder(v,{fatal:!0}),T=(0,a.stringToBytes)(f);f=A.decode(T),G=!1}catch{}}return f}function m(v){return G&&/[\x80-\xff]/.test(v)&&(v=R("utf-8",v),G&&(v=R("iso-8859-1",v))),v}function I(v){const f=[];let A;const T=D("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(A=T.exec(v))!==null;){let[,y,l,d]=A;if(y=parseInt(y,10),y in f){if(y===0)break;continue}f[y]=[l,d]}const x=[];for(let y=0;y<f.length&&y in f;++y){let[l,d]=f[y];d=O(d),l&&(d=unescape(d),y===0&&(d=C(d))),x.push(d)}return x.join("")}function O(v){if(v.startsWith('"')){const f=v.slice(1).split('\\"');for(let A=0;A<f.length;++A){const T=f[A].indexOf('"');T!==-1&&(f[A]=f[A].slice(0,T),f.length=A+1),f[A]=f[A].replaceAll(/\\(.)/g,"$1")}v=f.join('"')}return v}function C(v){const f=v.indexOf("'");if(f===-1)return v;const A=v.slice(0,f),x=v.slice(f+1).replace(/^[^']*'/,"");return R(A,x)}function S(v){return!v.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(v)?v:v.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,A,T,x){if(T==="q"||T==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,l){return String.fromCharCode(parseInt(l,16))}),R(A,x);try{x=atob(x)}catch{}return R(A,x)})}return""}},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0;var a=N(1),p=N(20);const X=200,G=206;function ft(O){const C=O.response;return typeof C!="string"?C:(0,a.stringToBytes)(C).buffer}class D{constructor(C,S={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&S.httpHeaders||Object.create(null),this.withCredentials=S.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,S,v){const f={begin:C,end:S};for(const A in v)f[A]=v[A];return this.request(f)}requestFull(C){return this.request(C)}request(C){const S=new XMLHttpRequest,v=this.currXhrId++,f=this.pendingRequests[v]={xhr:S};S.open("GET",this.url),S.withCredentials=this.withCredentials;for(const A in this.httpHeaders){const T=this.httpHeaders[A];T!==void 0&&S.setRequestHeader(A,T)}return this.isHttp&&"begin"in C&&"end"in C?(S.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),f.expectedStatus=G):f.expectedStatus=X,S.responseType="arraybuffer",C.onError&&(S.onerror=function(A){C.onError(S.status)}),S.onreadystatechange=this.onStateChange.bind(this,v),S.onprogress=this.onProgress.bind(this,v),f.onHeadersReceived=C.onHeadersReceived,f.onDone=C.onDone,f.onError=C.onError,f.onProgress=C.onProgress,S.send(null),v}onProgress(C,S){var f;const v=this.pendingRequests[C];v&&((f=v.onProgress)==null||f.call(v,S))}onStateChange(C,S){var y,l,d;const v=this.pendingRequests[C];if(!v)return;const f=v.xhr;if(f.readyState>=2&&v.onHeadersReceived&&(v.onHeadersReceived(),delete v.onHeadersReceived),f.readyState!==4||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],f.status===0&&this.isHttp){(y=v.onError)==null||y.call(v,f.status);return}const A=f.status||X;if(!(A===X&&v.expectedStatus===G)&&A!==v.expectedStatus){(l=v.onError)==null||l.call(v,f.status);return}const x=ft(f);if(A===G){const F=f.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(F);v.onDone({begin:parseInt(b[1],10),chunk:x})}else x?v.onDone({begin:0,chunk:x}):(d=v.onError)==null||d.call(v,f.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const S=this.pendingRequests[C].xhr;delete this.pendingRequests[C],S.abort()}}class R{constructor(C){this._source=C,this._manager=new D(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const S=this._rangeRequestReaders.indexOf(C);S>=0&&this._rangeRequestReaders.splice(S,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader}getRangeReader(C,S){const v=new I(this._manager,C,S);return v.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(v),v}cancelAllRequests(C){var S;(S=this._fullRequestReader)==null||S.cancel(C);for(const v of this._rangeRequestReaders.slice(0))v.cancel(C)}}i.PDFNetworkStream=R;class m{constructor(C,S){this._manager=C;const v={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=S.url,this._fullRequestId=C.requestFull(v),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=S.disableRange||!1,this._contentLength=S.length,this._rangeChunkSize=S.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,S=this._manager.getRequestXhr(C),v=T=>S.getResponseHeader(T),{allowRangeRequests:f,suggestedLength:A}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});f&&(this._isRangeSupported=!0),this._contentLength=A||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(v),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,p.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const S of this._requests)S.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var S;(S=this.onProgress)==null||S.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new a.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(C,S,v){this._manager=C;const f={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(S,v,f),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;(C=this.onClosed)==null||C.call(this,this)}_onDone(C){const S=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:S,done:!1}):this._queuedChunk=S,this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,p.createResponseStatusError)(C,this._url);for(const S of this._requests)S.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var S;this.isStreamingSupported||(S=this.onProgress)==null||S.call(this,{loaded:C.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const S=this._queuedChunk;return this._queuedChunk=null,{value:S,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new a.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0;var a=N(1),p=N(20);const X=/^file:\/\/\/[a-zA-Z]:\//;function G(v){const f=require$$5,A=f.parse(v);return A.protocol==="file:"||A.host?A:/^[a-z]:[/\\]/i.test(v)?f.parse(`file:///${v}`):(A.host||(A.protocol="file:"),A)}class ft{constructor(f){this.source=f,this.url=G(f.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new C(this):new I(this),this._fullRequestReader}getRangeReader(f,A){if(A<=this._progressiveDataLength)return null;const T=this.isFsUrl?new S(this,f,A):new O(this,f,A);return this._rangeRequestReaders.push(T),T}cancelAllRequests(f){var A;(A=this._fullRequestReader)==null||A.cancel(f);for(const T of this._rangeRequestReaders.slice(0))T.cancel(f)}}i.PDFNodeStream=ft;class D{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const A=f.source;this._contentLength=A.length,this._loaded=0,this._filename=null,this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var T;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=f.length,(T=this.onProgress)==null||T.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",A=>{this._error(A)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class R{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const A=f.source;this._isStreamingSupported=!A.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var T;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=f.length,(T=this.onProgress)==null||T.call(this,{loaded:this._loaded}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",A=>{this._error(A)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function m(v,f){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:f}}class I extends D{constructor(f){super(f);const A=T=>{if(T.statusCode===404){const d=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(T);const x=d=>this._readableStream.headers[d.toLowerCase()],{allowRangeRequests:y,suggestedLength:l}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=l||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(x)};if(this._request=null,this._url.protocol==="http:"){const T=require$$5;this._request=T.request(m(this._url,f.httpHeaders),A)}else{const T=require$$5;this._request=T.request(m(this._url,f.httpHeaders),A)}this._request.on("error",T=>{this._storedError=T,this._headersCapability.reject(T)}),this._request.end()}}class O extends R{constructor(f,A,T){super(f),this._httpHeaders={};for(const y in f.httpHeaders){const l=f.httpHeaders[y];l!==void 0&&(this._httpHeaders[y]=l)}this._httpHeaders.Range=`bytes=${A}-${T-1}`;const x=y=>{if(y.statusCode===404){const l=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(y)};if(this._request=null,this._url.protocol==="http:"){const y=require$$5;this._request=y.request(m(this._url,this._httpHeaders),x)}else{const y=require$$5;this._request=y.request(m(this._url,this._httpHeaders),x)}this._request.on("error",y=>{this._storedError=y}),this._request.end()}}class C extends D{constructor(f){super(f);let A=decodeURIComponent(this._url.path);X.test(this._url.href)&&(A=A.replace(/^\//,""));const T=require$$5;T.lstat(A,(x,y)=>{if(x){x.code==="ENOENT"&&(x=new a.MissingPDFException(`Missing PDF "${A}".`)),this._storedError=x,this._headersCapability.reject(x);return}this._contentLength=y.size,this._setReadableStream(T.createReadStream(A)),this._headersCapability.resolve()})}}class S extends R{constructor(f,A,T){super(f);let x=decodeURIComponent(this._url.path);X.test(this._url.href)&&(x=x.replace(/^\//,""));const y=require$$5;this._setReadableStream(y.createReadStream(x,{start:A,end:T-1}))}}},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var a=N(6),p=N(1);const X={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},G="http://www.w3.org/XML/1998/namespace",ft="http://www.w3.org/1999/xlink",D=["butt","round","square"],R=["miter","round","bevel"],m=function(y,l="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([y],{type:l}));const F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let b=`data:${l};base64,`;for(let c=0,k=y.length;c<k;c+=3){const g=y[c]&255,W=y[c+1]&255,$=y[c+2]&255,w=g>>2,q=(g&3)<<4|W>>4,it=c+1<k?(W&15)<<2|$>>6:64,at=c+2<k?$&63:64;b+=F[w]+F[q]+F[it]+F[at]}return b},I=function(){const y=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,d=new Int32Array(256);for(let $=0;$<256;$++){let w=$;for(let q=0;q<8;q++)w=w&1?3988292384^w>>1&2147483647:w>>1&2147483647;d[$]=w}function F($,w,q){let it=-1;for(let at=w;at<q;at++){const V=(it^$[at])&255,ct=d[V];it=it>>>8^ct}return it^-1}function b($,w,q,it){let at=it;const V=w.length;q[at]=V>>24&255,q[at+1]=V>>16&255,q[at+2]=V>>8&255,q[at+3]=V&255,at+=4,q[at]=$.charCodeAt(0)&255,q[at+1]=$.charCodeAt(1)&255,q[at+2]=$.charCodeAt(2)&255,q[at+3]=$.charCodeAt(3)&255,at+=4,q.set(w,at),at+=w.length;const ct=F(q,it+4,at);q[at]=ct>>24&255,q[at+1]=ct>>16&255,q[at+2]=ct>>8&255,q[at+3]=ct&255}function c($,w,q){let it=1,at=0;for(let V=w;V<q;++V)it=(it+($[V]&255))%65521,at=(at+it)%65521;return at<<16|it}function k($){if(!p.isNodeJS)return g($);try{const w=parseInt(process.versions.node)>=8?$:Buffer.from($),q=require$$5.deflateSync(w,{level:9});return q instanceof Uint8Array?q:new Uint8Array(q)}catch(w){(0,p.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+w)}return g($)}function g($){let w=$.length;const q=65535,it=Math.ceil(w/q),at=new Uint8Array(2+w+it*5+4);let V=0;at[V++]=120,at[V++]=156;let ct=0;for(;w>q;)at[V++]=0,at[V++]=255,at[V++]=255,at[V++]=0,at[V++]=0,at.set($.subarray(ct,ct+q),V),V+=q,ct+=q,w-=q;at[V++]=1,at[V++]=w&255,at[V++]=w>>8&255,at[V++]=~w&65535&255,at[V++]=(~w&65535)>>8&255,at.set($.subarray(ct),V),V+=$.length-ct;const mt=c($,0,$.length);return at[V++]=mt>>24&255,at[V++]=mt>>16&255,at[V++]=mt>>8&255,at[V++]=mt&255,at}function W($,w,q,it){const at=$.width,V=$.height;let ct,mt,St;const xt=$.data;switch(w){case p.ImageKind.GRAYSCALE_1BPP:mt=0,ct=1,St=at+7>>3;break;case p.ImageKind.RGB_24BPP:mt=2,ct=8,St=at*3;break;case p.ImageKind.RGBA_32BPP:mt=6,ct=8,St=at*4;break;default:throw new Error("invalid format")}const P=new Uint8Array((1+St)*V);let n=0,o=0;for(let H=0;H<V;++H)P[n++]=0,P.set(xt.subarray(o,o+St),n),o+=St,n+=St;if(w===p.ImageKind.GRAYSCALE_1BPP&&it){n=0;for(let H=0;H<V;H++){n++;for(let st=0;st<St;st++)P[n++]^=255}}const s=new Uint8Array([at>>24&255,at>>16&255,at>>8&255,at&255,V>>24&255,V>>16&255,V>>8&255,V&255,ct,mt,0,0,0]),h=k(P),u=y.length+l*3+s.length+h.length,E=new Uint8Array(u);let M=0;return E.set(y,M),M+=y.length,b("IHDR",s,E,M),M+=l+s.length,b("IDATA",h,E,M),M+=l+h.length,b("IEND",new Uint8Array(0),E,M),m(E,"image/png",q)}return function(w,q,it){const at=w.kind===void 0?p.ImageKind.GRAYSCALE_1BPP:w.kind;return W(w,at,q,it)}}();class O{constructor(){this.fontSizeScale=1,this.fontWeight=X.fontWeight,this.fontSize=0,this.textMatrix=p.IDENTITY_MATRIX,this.fontMatrix=p.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=p.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=X.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(l,d){this.x=l,this.y=d}}function C(y){let l=[];const d=[];for(const F of y){if(F.fn==="save"){l.push({fnId:92,fn:"group",items:[]}),d.push(l),l=l.at(-1).items;continue}F.fn==="restore"?l=d.pop():l.push(F)}return l}function S(y){if(Number.isInteger(y))return y.toString();const l=y.toFixed(10);let d=l.length-1;if(l[d]!=="0")return l;do d--;while(l[d]==="0");return l.substring(0,l[d]==="."?d:d+1)}function v(y){if(y[4]===0&&y[5]===0){if(y[1]===0&&y[2]===0)return y[0]===1&&y[3]===1?"":`scale(${S(y[0])} ${S(y[3])})`;if(y[0]===y[3]&&y[1]===-y[2]){const l=Math.acos(y[0])*180/Math.PI;return`rotate(${S(l)})`}}else if(y[0]===1&&y[1]===0&&y[2]===0&&y[3]===1)return`translate(${S(y[4])} ${S(y[5])})`;return`matrix(${S(y[0])} ${S(y[1])} ${S(y[2])} ${S(y[3])} ${S(y[4])} ${S(y[5])})`}let f=0,A=0,T=0;class x{constructor(l,d,F=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new O,this.transformMatrix=p.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=l,this.objs=d,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!F,this._operatorIdMapping=[];for(const b in p.OPS)this._operatorIdMapping[p.OPS[b]]=b}getObject(l,d=null){return typeof l=="string"?l.startsWith("g_")?this.commonObjs.get(l):this.objs.get(l):d}save(){this.transformStack.push(this.transformMatrix);const l=this.current;this.extraStack.push(l),this.current=l.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(l){this.save(),this.executeOpTree(l),this.restore()}loadDependencies(l){const d=l.fnArray,F=l.argsArray;for(let b=0,c=d.length;b<c;b++)if(d[b]===p.OPS.dependency)for(const k of F[b]){const g=k.startsWith("g_")?this.commonObjs:this.objs,W=new Promise($=>{g.get(k,$)});this.current.dependencies.push(W)}return Promise.all(this.current.dependencies)}transform(l,d,F,b,c,k){const g=[l,d,F,b,c,k];this.transformMatrix=p.Util.transform(this.transformMatrix,g),this.tgrp=null}getSVG(l,d){this.viewport=d;const F=this._initialize(d);return this.loadDependencies(l).then(()=>(this.transformMatrix=p.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(l)),F))}convertOpList(l){const d=this._operatorIdMapping,F=l.argsArray,b=l.fnArray,c=[];for(let k=0,g=b.length;k<g;k++){const W=b[k];c.push({fnId:W,fn:d[W],args:F[k]})}return C(c)}executeOpTree(l){for(const d of l){const F=d.fn,b=d.fnId,c=d.args;switch(b|0){case p.OPS.beginText:this.beginText();break;case p.OPS.dependency:break;case p.OPS.setLeading:this.setLeading(c);break;case p.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case p.OPS.setFont:this.setFont(c);break;case p.OPS.showText:this.showText(c[0]);break;case p.OPS.showSpacedText:this.showText(c[0]);break;case p.OPS.endText:this.endText();break;case p.OPS.moveText:this.moveText(c[0],c[1]);break;case p.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case p.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case p.OPS.setHScale:this.setHScale(c[0]);break;case p.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case p.OPS.setTextRise:this.setTextRise(c[0]);break;case p.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case p.OPS.setLineWidth:this.setLineWidth(c[0]);break;case p.OPS.setLineJoin:this.setLineJoin(c[0]);break;case p.OPS.setLineCap:this.setLineCap(c[0]);break;case p.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case p.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case p.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case p.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case p.OPS.setFillColorN:this.setFillColorN(c);break;case p.OPS.shadingFill:this.shadingFill(c[0]);break;case p.OPS.setDash:this.setDash(c[0],c[1]);break;case p.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case p.OPS.setFlatness:this.setFlatness(c[0]);break;case p.OPS.setGState:this.setGState(c[0]);break;case p.OPS.fill:this.fill();break;case p.OPS.eoFill:this.eoFill();break;case p.OPS.stroke:this.stroke();break;case p.OPS.fillStroke:this.fillStroke();break;case p.OPS.eoFillStroke:this.eoFillStroke();break;case p.OPS.clip:this.clip("nonzero");break;case p.OPS.eoClip:this.clip("evenodd");break;case p.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case p.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case p.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case p.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case p.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case p.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case p.OPS.closePath:this.closePath();break;case p.OPS.closeStroke:this.closeStroke();break;case p.OPS.closeFillStroke:this.closeFillStroke();break;case p.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case p.OPS.nextLine:this.nextLine();break;case p.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case p.OPS.constructPath:this.constructPath(c[0],c[1]);break;case p.OPS.endPath:this.endPath();break;case 92:this.group(d.items);break;default:(0,p.warn)(`Unimplemented operator ${F}`);break}}}setWordSpacing(l){this.current.wordSpacing=l}setCharSpacing(l){this.current.charSpacing=l}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(l,d,F,b,c,k){const g=this.current;g.textMatrix=g.lineMatrix=[l,d,F,b,c,k],g.textMatrixScale=Math.hypot(l,d),g.x=g.lineX=0,g.y=g.lineY=0,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${S(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",S(-g.y)),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtElement.append(g.tspan)}beginText(){const l=this.current;l.x=l.lineX=0,l.y=l.lineY=0,l.textMatrix=p.IDENTITY_MATRIX,l.lineMatrix=p.IDENTITY_MATRIX,l.textMatrixScale=1,l.tspan=this.svgFactory.createElement("svg:tspan"),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtgrp=this.svgFactory.createElement("svg:g"),l.xcoords=[],l.ycoords=[]}moveText(l,d){const F=this.current;F.x=F.lineX+=l,F.y=F.lineY+=d,F.xcoords=[],F.ycoords=[],F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size",`${S(F.fontSize)}px`),F.tspan.setAttributeNS(null,"y",S(-F.y))}showText(l){const d=this.current,F=d.font,b=d.fontSize;if(b===0)return;const c=d.fontSizeScale,k=d.charSpacing,g=d.wordSpacing,W=d.fontDirection,$=d.textHScale*W,w=F.vertical,q=w?1:-1,it=F.defaultVMetrics,at=b*d.fontMatrix[0];let V=0;for(const St of l){if(St===null){V+=W*g;continue}else if(typeof St=="number"){V+=q*St*b/1e3;continue}const xt=(St.isSpace?g:0)+k,P=St.fontChar;let n,o,s=St.width;if(w){let u;const E=St.vmetric||it;u=St.vmetric?E[1]:s*.5,u=-u*at;const M=E[2]*at;s=E?-E[0]:s,n=u/c,o=(V+M)/c}else n=V/c,o=0;(St.isInFont||F.missingFile)&&(d.xcoords.push(d.x+n),w&&d.ycoords.push(-d.y+o),d.tspan.textContent+=P);const h=w?s*at-xt*W:s*at+xt*W;V+=h}d.tspan.setAttributeNS(null,"x",d.xcoords.map(S).join(" ")),w?d.tspan.setAttributeNS(null,"y",d.ycoords.map(S).join(" ")):d.tspan.setAttributeNS(null,"y",S(-d.y)),w?d.y-=V:d.x+=V*$,d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${S(d.fontSize)}px`),d.fontStyle!==X.fontStyle&&d.tspan.setAttributeNS(null,"font-style",d.fontStyle),d.fontWeight!==X.fontWeight&&d.tspan.setAttributeNS(null,"font-weight",d.fontWeight);const ct=d.textRenderingMode&p.TextRenderingMode.FILL_STROKE_MASK;if(ct===p.TextRenderingMode.FILL||ct===p.TextRenderingMode.FILL_STROKE?(d.fillColor!==X.fillColor&&d.tspan.setAttributeNS(null,"fill",d.fillColor),d.fillAlpha<1&&d.tspan.setAttributeNS(null,"fill-opacity",d.fillAlpha)):d.textRenderingMode===p.TextRenderingMode.ADD_TO_PATH?d.tspan.setAttributeNS(null,"fill","transparent"):d.tspan.setAttributeNS(null,"fill","none"),ct===p.TextRenderingMode.STROKE||ct===p.TextRenderingMode.FILL_STROKE){const St=1/(d.textMatrixScale||1);this._setStrokeAttributes(d.tspan,St)}let mt=d.textMatrix;d.textRise!==0&&(mt=mt.slice(),mt[5]+=d.textRise),d.txtElement.setAttributeNS(null,"transform",`${v(mt)} scale(${S($)}, -1)`),d.txtElement.setAttributeNS(G,"xml:space","preserve"),d.txtElement.append(d.tspan),d.txtgrp.append(d.txtElement),this._ensureTransformGroup().append(d.txtElement)}setLeadingMoveText(l,d){this.setLeading(-d),this.moveText(l,d)}addFontStyle(l){if(!l.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const d=m(l.data,l.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${l.loadedName}"; src: url(${d}); }
`}setFont(l){const d=this.current,F=this.commonObjs.get(l[0]);let b=l[1];d.font=F,this.embedFonts&&!F.missingFile&&!this.embeddedFonts[F.loadedName]&&(this.addFontStyle(F),this.embeddedFonts[F.loadedName]=F),d.fontMatrix=F.fontMatrix||p.FONT_IDENTITY_MATRIX;let c="normal";F.black?c="900":F.bold&&(c="bold");const k=F.italic?"italic":"normal";b<0?(b=-b,d.fontDirection=-1):d.fontDirection=1,d.fontSize=b,d.fontFamily=F.loadedName,d.fontWeight=c,d.fontStyle=k,d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"y",S(-d.y)),d.xcoords=[],d.ycoords=[]}endText(){var d;const l=this.current;l.textRenderingMode&p.TextRenderingMode.ADD_TO_PATH_FLAG&&((d=l.txtElement)!=null&&d.hasChildNodes())&&(l.element=l.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(l){l>0&&(this.current.lineWidth=l)}setLineCap(l){this.current.lineCap=D[l]}setLineJoin(l){this.current.lineJoin=R[l]}setMiterLimit(l){this.current.miterLimit=l}setStrokeAlpha(l){this.current.strokeAlpha=l}setStrokeRGBColor(l,d,F){this.current.strokeColor=p.Util.makeHexColor(l,d,F)}setFillAlpha(l){this.current.fillAlpha=l}setFillRGBColor(l,d,F){this.current.fillColor=p.Util.makeHexColor(l,d,F),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(l){this.current.strokeColor=this._makeColorN_Pattern(l)}setFillColorN(l){this.current.fillColor=this._makeColorN_Pattern(l)}shadingFill(l){const{width:d,height:F}=this.viewport,b=p.Util.inverseTransform(this.transformMatrix),[c,k,g,W]=p.Util.getAxialAlignedBoundingBox([0,0,d,F],b),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",c),$.setAttributeNS(null,"y",k),$.setAttributeNS(null,"width",g-c),$.setAttributeNS(null,"height",W-k),$.setAttributeNS(null,"fill",this._makeShadingPattern(l)),this.current.fillAlpha<1&&$.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($)}_makeColorN_Pattern(l){return l[0]==="TilingPattern"?this._makeTilingPattern(l):this._makeShadingPattern(l)}_makeTilingPattern(l){const d=l[1],F=l[2],b=l[3]||p.IDENTITY_MATRIX,[c,k,g,W]=l[4],$=l[5],w=l[6],q=l[7],it=`shading${T++}`,[at,V,ct,mt]=p.Util.normalizeRect([...p.Util.applyTransform([c,k],b),...p.Util.applyTransform([g,W],b)]),[St,xt]=p.Util.singularValueDecompose2dScale(b),P=$*St,n=w*xt,o=this.svgFactory.createElement("svg:pattern");o.setAttributeNS(null,"id",it),o.setAttributeNS(null,"patternUnits","userSpaceOnUse"),o.setAttributeNS(null,"width",P),o.setAttributeNS(null,"height",n),o.setAttributeNS(null,"x",`${at}`),o.setAttributeNS(null,"y",`${V}`);const s=this.svg,h=this.transformMatrix,u=this.current.fillColor,E=this.current.strokeColor,M=this.svgFactory.create(ct-at,mt-V);if(this.svg=M,this.transformMatrix=b,q===2){const H=p.Util.makeHexColor(...d);this.current.fillColor=H,this.current.strokeColor=H}return this.executeOpTree(this.convertOpList(F)),this.svg=s,this.transformMatrix=h,this.current.fillColor=u,this.current.strokeColor=E,o.append(M.childNodes[0]),this.defs.append(o),`url(#${it})`}_makeShadingPattern(l){switch(typeof l=="string"&&(l=this.objs.get(l)),l[0]){case"RadialAxial":const d=`shading${T++}`,F=l[3];let b;switch(l[1]){case"axial":const c=l[4],k=l[5];b=this.svgFactory.createElement("svg:linearGradient"),b.setAttributeNS(null,"id",d),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"x1",c[0]),b.setAttributeNS(null,"y1",c[1]),b.setAttributeNS(null,"x2",k[0]),b.setAttributeNS(null,"y2",k[1]);break;case"radial":const g=l[4],W=l[5],$=l[6],w=l[7];b=this.svgFactory.createElement("svg:radialGradient"),b.setAttributeNS(null,"id",d),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"cx",W[0]),b.setAttributeNS(null,"cy",W[1]),b.setAttributeNS(null,"r",w),b.setAttributeNS(null,"fx",g[0]),b.setAttributeNS(null,"fy",g[1]),b.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${l[1]}`)}for(const c of F){const k=this.svgFactory.createElement("svg:stop");k.setAttributeNS(null,"offset",c[0]),k.setAttributeNS(null,"stop-color",c[1]),b.append(k)}return this.defs.append(b),`url(#${d})`;case"Mesh":return(0,p.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${l[0]}`)}}setDash(l,d){this.current.dashArray=l,this.current.dashPhase=d}constructPath(l,d){const F=this.current;let b=F.x,c=F.y,k=[],g=0;for(const W of l)switch(W|0){case p.OPS.rectangle:b=d[g++],c=d[g++];const $=d[g++],w=d[g++],q=b+$,it=c+w;k.push("M",S(b),S(c),"L",S(q),S(c),"L",S(q),S(it),"L",S(b),S(it),"Z");break;case p.OPS.moveTo:b=d[g++],c=d[g++],k.push("M",S(b),S(c));break;case p.OPS.lineTo:b=d[g++],c=d[g++],k.push("L",S(b),S(c));break;case p.OPS.curveTo:b=d[g+4],c=d[g+5],k.push("C",S(d[g]),S(d[g+1]),S(d[g+2]),S(d[g+3]),S(b),S(c)),g+=6;break;case p.OPS.curveTo2:k.push("C",S(b),S(c),S(d[g]),S(d[g+1]),S(d[g+2]),S(d[g+3])),b=d[g+2],c=d[g+3],g+=4;break;case p.OPS.curveTo3:b=d[g+2],c=d[g+3],k.push("C",S(d[g]),S(d[g+1]),S(b),S(c),S(b),S(c)),g+=4;break;case p.OPS.closePath:k.push("Z");break}k=k.join(" "),F.path&&l.length>0&&l[0]!==p.OPS.rectangle&&l[0]!==p.OPS.moveTo?k=F.path.getAttributeNS(null,"d")+k:(F.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(F.path)),F.path.setAttributeNS(null,"d",k),F.path.setAttributeNS(null,"fill","none"),F.element=F.path,F.setCurrentPoint(b,c)}endPath(){const l=this.current;if(l.path=null,!this.pendingClip)return;if(!l.element){this.pendingClip=null;return}const d=`clippath${f++}`,F=this.svgFactory.createElement("svg:clipPath");F.setAttributeNS(null,"id",d),F.setAttributeNS(null,"transform",v(this.transformMatrix));const b=l.element.cloneNode(!0);if(this.pendingClip==="evenodd"?b.setAttributeNS(null,"clip-rule","evenodd"):b.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,F.append(b),this.defs.append(F),l.activeClipUrl){l.clipGroup=null;for(const c of this.extraStack)c.clipGroup=null;F.setAttributeNS(null,"clip-path",l.activeClipUrl)}l.activeClipUrl=`url(#${d})`,this.tgrp=null}clip(l){this.pendingClip=l}closePath(){const l=this.current;if(l.path){const d=`${l.path.getAttributeNS(null,"d")}Z`;l.path.setAttributeNS(null,"d",d)}}setLeading(l){this.current.leading=-l}setTextRise(l){this.current.textRise=l}setTextRenderingMode(l){this.current.textRenderingMode=l}setHScale(l){this.current.textHScale=l/100}setRenderingIntent(l){}setFlatness(l){}setGState(l){for(const[d,F]of l)switch(d){case"LW":this.setLineWidth(F);break;case"LC":this.setLineCap(F);break;case"LJ":this.setLineJoin(F);break;case"ML":this.setMiterLimit(F);break;case"D":this.setDash(F[0],F[1]);break;case"RI":this.setRenderingIntent(F);break;case"FL":this.setFlatness(F);break;case"Font":this.setFont(F);break;case"CA":this.setStrokeAlpha(F);break;case"ca":this.setFillAlpha(F);break;default:(0,p.warn)(`Unimplemented graphic state operator ${d}`);break}}fill(){const l=this.current;l.element&&(l.element.setAttributeNS(null,"fill",l.fillColor),l.element.setAttributeNS(null,"fill-opacity",l.fillAlpha),this.endPath())}stroke(){const l=this.current;l.element&&(this._setStrokeAttributes(l.element),l.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(l,d=1){const F=this.current;let b=F.dashArray;d!==1&&b.length>0&&(b=b.map(function(c){return d*c})),l.setAttributeNS(null,"stroke",F.strokeColor),l.setAttributeNS(null,"stroke-opacity",F.strokeAlpha),l.setAttributeNS(null,"stroke-miterlimit",S(F.miterLimit)),l.setAttributeNS(null,"stroke-linecap",F.lineCap),l.setAttributeNS(null,"stroke-linejoin",F.lineJoin),l.setAttributeNS(null,"stroke-width",S(d*F.lineWidth)+"px"),l.setAttributeNS(null,"stroke-dasharray",b.map(S).join(" ")),l.setAttributeNS(null,"stroke-dashoffset",S(d*F.dashPhase)+"px")}eoFill(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width","1px"),l.setAttributeNS(null,"height","1px"),l.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(l)}paintImageXObject(l){const d=this.getObject(l);if(!d){(0,p.warn)(`Dependent image with object ID ${l} is not ready yet`);return}this.paintInlineImageXObject(d)}paintInlineImageXObject(l,d){const F=l.width,b=l.height,c=I(l,this.forceDataSchema,!!d),k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",S(F)),k.setAttributeNS(null,"height",S(b)),this.current.element=k,this.clip("nonzero");const g=this.svgFactory.createElement("svg:image");g.setAttributeNS(ft,"xlink:href",c),g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y",S(-b)),g.setAttributeNS(null,"width",S(F)+"px"),g.setAttributeNS(null,"height",S(b)+"px"),g.setAttributeNS(null,"transform",`scale(${S(1/F)} ${S(-1/b)})`),d?d.append(g):this._ensureTransformGroup().append(g)}paintImageMaskXObject(l){const d=this.getObject(l.data,l);if(d.bitmap){(0,p.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const F=this.current,b=d.width,c=d.height,k=F.fillColor;F.maskId=`mask${A++}`;const g=this.svgFactory.createElement("svg:mask");g.setAttributeNS(null,"id",F.maskId);const W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y","0"),W.setAttributeNS(null,"width",S(b)),W.setAttributeNS(null,"height",S(c)),W.setAttributeNS(null,"fill",k),W.setAttributeNS(null,"mask",`url(#${F.maskId})`),this.defs.append(g),this._ensureTransformGroup().append(W),this.paintInlineImageXObject(d,g)}paintFormXObjectBegin(l,d){if(Array.isArray(l)&&l.length===6&&this.transform(l[0],l[1],l[2],l[3],l[4],l[5]),d){const F=d[2]-d[0],b=d[3]-d[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",d[0]),c.setAttributeNS(null,"y",d[1]),c.setAttributeNS(null,"width",S(F)),c.setAttributeNS(null,"height",S(b)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(l){const d=this.svgFactory.create(l.width,l.height),F=this.svgFactory.createElement("svg:defs");d.append(F),this.defs=F;const b=this.svgFactory.createElement("svg:g");return b.setAttributeNS(null,"transform",v(l.transform)),d.append(b),this.svg=b,d}_ensureClipGroup(){if(!this.current.clipGroup){const l=this.svgFactory.createElement("svg:g");l.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(l),this.current.clipGroup=l}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}i.SVGGraphics=x},(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0;class N{static textContent(p){const X=[],G={items:X,styles:Object.create(null)};function ft(D){var I;if(!D)return;let R=null;const m=D.name;if(m==="#text")R=D.value;else if(N.shouldBuildText(m))(I=D==null?void 0:D.attributes)!=null&&I.textContent?R=D.attributes.textContent:D.value&&(R=D.value);else return;if(R!==null&&X.push({str:R}),!!D.children)for(const O of D.children)ft(O)}return ft(p),G}static shouldBuildText(p){return!(p==="textarea"||p==="input"||p==="option"||p==="select")}}i.XfaText=N},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=v,i.updateTextLayer=f;var a=N(1),p=N(6);const X=1e5,G=30,ft=.8,D=new Map;function R(A,T){let x;if(T&&a.FeatureTest.isOffscreenCanvasSupported)x=new OffscreenCanvas(A,A).getContext("2d",{alpha:!1});else{const y=document.createElement("canvas");y.width=y.height=A,x=y.getContext("2d",{alpha:!1})}return x}function m(A,T){const x=D.get(A);if(x)return x;const y=R(G,T);y.font=`${G}px ${A}`;const l=y.measureText("");let d=l.fontBoundingBoxAscent,F=Math.abs(l.fontBoundingBoxDescent);if(d){const c=d/(d+F);return D.set(A,c),y.canvas.width=y.canvas.height=0,c}y.strokeStyle="red",y.clearRect(0,0,G,G),y.strokeText("g",0,0);let b=y.getImageData(0,0,G,G).data;F=0;for(let c=b.length-1-3;c>=0;c-=4)if(b[c]>0){F=Math.ceil(c/4/G);break}y.clearRect(0,0,G,G),y.strokeText("A",0,G),b=y.getImageData(0,0,G,G).data,d=0;for(let c=0,k=b.length;c<k;c+=4)if(b[c]>0){d=G-Math.floor(c/4/G);break}if(y.canvas.width=y.canvas.height=0,d){const c=d/(d+F);return D.set(A,c),c}return D.set(A,ft),ft}function I(A,T,x){const y=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:T.str!=="",hasEOL:T.hasEOL,fontSize:0};A._textDivs.push(y);const d=a.Util.transform(A._transform,T.transform);let F=Math.atan2(d[1],d[0]);const b=x[T.fontName];b.vertical&&(F+=Math.PI/2);const c=Math.hypot(d[2],d[3]),k=c*m(b.fontFamily,A._isOffscreenCanvasSupported);let g,W;F===0?(g=d[4],W=d[5]-k):(g=d[4]+k*Math.sin(F),W=d[5]-k*Math.cos(F));const $="calc(var(--scale-factor)*",w=y.style;A._container===A._rootContainer?(w.left=`${(100*g/A._pageWidth).toFixed(2)}%`,w.top=`${(100*W/A._pageHeight).toFixed(2)}%`):(w.left=`${$}${g.toFixed(2)}px)`,w.top=`${$}${W.toFixed(2)}px)`),w.fontSize=`${$}${c.toFixed(2)}px)`,w.fontFamily=b.fontFamily,l.fontSize=c,y.setAttribute("role","presentation"),y.textContent=T.str,y.dir=T.dir,A._fontInspectorEnabled&&(y.dataset.fontName=T.fontName),F!==0&&(l.angle=F*(180/Math.PI));let q=!1;if(T.str.length>1)q=!0;else if(T.str!==" "&&T.transform[0]!==T.transform[3]){const it=Math.abs(T.transform[0]),at=Math.abs(T.transform[3]);it!==at&&Math.max(it,at)/Math.min(it,at)>1.5&&(q=!0)}q&&(l.canvasWidth=b.vertical?T.height:T.width),A._textDivProperties.set(y,l),A._isReadableStream&&A._layoutText(y)}function O(A){const{div:T,scale:x,properties:y,ctx:l,prevFontSize:d,prevFontFamily:F}=A,{style:b}=T;let c="";if(y.canvasWidth!==0&&y.hasText){const{fontFamily:k}=b,{canvasWidth:g,fontSize:W}=y;(d!==W||F!==k)&&(l.font=`${W*x}px ${k}`,A.prevFontSize=W,A.prevFontFamily=k);const{width:$}=l.measureText(T.textContent);$>0&&(c=`scaleX(${g*x/$})`)}y.angle!==0&&(c=`rotate(${y.angle}deg) ${c}`),c.length>0&&(b.transform=c)}function C(A){if(A._canceled)return;const T=A._textDivs,x=A._capability;if(T.length>X){x.resolve();return}if(!A._isReadableStream)for(const l of T)A._layoutText(l);x.resolve()}class S{constructor({textContentSource:T,container:x,viewport:y,textDivs:l,textDivProperties:d,textContentItemsStr:F,isOffscreenCanvasSupported:b}){var $;this._textContentSource=T,this._isReadableStream=T instanceof ReadableStream,this._container=this._rootContainer=x,this._textDivs=l||[],this._textContentItemsStr=F||[],this._isOffscreenCanvasSupported=b,this._fontInspectorEnabled=!!(($=globalThis.FontInspector)!=null&&$.enabled),this._reader=null,this._textDivProperties=d||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:R(0,b)};const{pageWidth:c,pageHeight:k,pageX:g,pageY:W}=y.rawDims;this._transform=[1,0,0,-1,-g,W+k],this._pageWidth=c,this._pageHeight=k,(0,p.setLayerDimensions)(x,y),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(T,x){for(const y of T){if(y.str===void 0){if(y.type==="beginMarkedContentProps"||y.type==="beginMarkedContent"){const l=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),y.id!==null&&this._container.setAttribute("id",`${y.id}`),l.append(this._container)}else y.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(y.str),I(this,y,x)}}_layoutText(T){const x=this._layoutTextParams.properties=this._textDivProperties.get(T);if(this._layoutTextParams.div=T,O(this._layoutTextParams),x.hasText&&this._container.append(T),x.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),this._container.append(y)}}_render(){const T=new a.PromiseCapability;let x=Object.create(null);if(this._isReadableStream){const y=()=>{this._reader.read().then(({value:l,done:d})=>{if(d){T.resolve();return}Object.assign(x,l.styles),this._processItems(l.items,x),y()},T.reject)};this._reader=this._textContentSource.getReader(),y()}else if(this._textContentSource){const{items:y,styles:l}=this._textContentSource;this._processItems(y,l),T.resolve()}else throw new Error('No "textContentSource" parameter specified.');T.promise.then(()=>{x=null,C(this)},this._capability.reject)}}i.TextLayerRenderTask=S;function v(A){!A.textContentSource&&(A.textContent||A.textContentStream)&&((0,p.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),A.textContentSource=A.textContent||A.textContentStream);const{container:T,viewport:x}=A,y=getComputedStyle(T),l=y.getPropertyValue("visibility"),d=parseFloat(y.getPropertyValue("--scale-factor"));l==="visible"&&(!d||Math.abs(d-x.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const F=new S(A);return F._render(),F}function f({container:A,viewport:T,textDivs:x,textDivProperties:y,isOffscreenCanvasSupported:l,mustRotate:d=!0,mustRescale:F=!0}){if(d&&(0,p.setLayerDimensions)(A,{rotation:T.rotation}),F){const b=R(0,l),k={prevFontSize:null,prevFontFamily:null,div:null,scale:T.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b};for(const g of x)k.properties=y.get(g),k.div=g,O(k)}}},(L,i,N)=>{var m,I,O,C,S,v,f,A,T,x,y,nn,d,ke,b,sn,k,rn;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0;var a=N(1),p=N(4),X=N(28),G=N(33),ft=N(6),D=N(34);const W=class W{constructor({uiManager:w,pageIndex:q,div:it,accessibilityManager:at,annotationLayer:V,viewport:ct,l10n:mt}){U(this,y);U(this,d);U(this,b);U(this,k);U(this,m,void 0);U(this,I,!1);U(this,O,null);U(this,C,this.pointerup.bind(this));U(this,S,this.pointerdown.bind(this));U(this,v,new Map);U(this,f,!1);U(this,A,!1);U(this,T,!1);U(this,x,void 0);const St=[X.FreeTextEditor,G.InkEditor,D.StampEditor];if(!W._initialized){W._initialized=!0;for(const xt of St)xt.initialize(mt)}w.registerEditorTypes(St),rt(this,x,w),this.pageIndex=q,this.div=it,rt(this,m,at),rt(this,O,V),this.viewport=ct,t(this,x).addLayer(this)}get isEmpty(){return t(this,v).size===0}updateToolbar(w){t(this,x).updateToolbar(w)}updateMode(w=t(this,x).getMode()){Y(this,k,rn).call(this),w===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),w!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",w===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",w===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",w===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(w){if(!w&&t(this,x).getMode()!==a.AnnotationEditorType.INK)return;if(!w){for(const it of t(this,v).values())if(it.isEmpty()){it.setInBackground();return}}Y(this,d,ke).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(w){t(this,x).setEditingState(w)}addCommands(w){t(this,x).addCommands(w)}enable(){this.div.style.pointerEvents="auto";const w=new Set;for(const it of t(this,v).values())it.enableEditing(),it.annotationElementId&&w.add(it.annotationElementId);if(!t(this,O))return;const q=t(this,O).getEditableAnnotations();for(const it of q){if(it.hide(),t(this,x).isDeletedAnnotationElement(it.data.id)||w.has(it.data.id))continue;const at=this.deserialize(it);at&&(this.addOrRebuild(at),at.enableEditing())}}disable(){var q;rt(this,T,!0),this.div.style.pointerEvents="none";const w=new Set;for(const it of t(this,v).values()){if(it.disableEditing(),!it.annotationElementId||it.serialize()!==null){w.add(it.annotationElementId);continue}(q=this.getEditableAnnotation(it.annotationElementId))==null||q.show(),it.remove()}if(t(this,O)){const it=t(this,O).getEditableAnnotations();for(const at of it){const{id:V}=at.data;w.has(V)||t(this,x).isDeletedAnnotationElement(V)||at.show()}}Y(this,k,rn).call(this),this.isEmpty&&(this.div.hidden=!0),rt(this,T,!1)}getEditableAnnotation(w){var q;return((q=t(this,O))==null?void 0:q.getEditableAnnotation(w))||null}setActiveEditor(w){t(this,x).getActive()!==w&&t(this,x).setActiveEditor(w)}enableClick(){this.div.addEventListener("pointerdown",t(this,S)),this.div.addEventListener("pointerup",t(this,C))}disableClick(){this.div.removeEventListener("pointerdown",t(this,S)),this.div.removeEventListener("pointerup",t(this,C))}attach(w){t(this,v).set(w.id,w);const{annotationElementId:q}=w;q&&t(this,x).isDeletedAnnotationElement(q)&&t(this,x).removeDeletedAnnotationElement(w)}detach(w){var q;t(this,v).delete(w.id),(q=t(this,m))==null||q.removePointerInTextLayer(w.contentDiv),!t(this,T)&&w.annotationElementId&&t(this,x).addDeletedAnnotationElement(w)}remove(w){this.detach(w),t(this,x).removeEditor(w),w.div.contains(document.activeElement)&&setTimeout(()=>{t(this,x).focusMainContainer()},0),w.div.remove(),w.isAttachedToDOM=!1,t(this,A)||this.addInkEditorIfNeeded(!1)}changeParent(w){var q;w.parent!==this&&(w.annotationElementId&&(t(this,x).addDeletedAnnotationElement(w.annotationElementId),p.AnnotationEditor.deleteAnnotationElement(w),w.annotationElementId=null),this.attach(w),(q=w.parent)==null||q.detach(w),w.setParent(this),w.div&&w.isAttachedToDOM&&(w.div.remove(),this.div.append(w.div)))}add(w){if(this.changeParent(w),t(this,x).addEditor(w),this.attach(w),!w.isAttachedToDOM){const q=w.render();this.div.append(q),w.isAttachedToDOM=!0}w.fixAndSetPosition(),w.onceAdded(),t(this,x).addToAnnotationStorage(w)}moveEditorInDOM(w){var it;if(!w.isAttachedToDOM)return;const{activeElement:q}=document;w.div.contains(q)&&(w._focusEventsAllowed=!1,setTimeout(()=>{w.div.contains(document.activeElement)?w._focusEventsAllowed=!0:(w.div.addEventListener("focusin",()=>{w._focusEventsAllowed=!0},{once:!0}),q.focus())},0)),w._structTreeParentId=(it=t(this,m))==null?void 0:it.moveElementInDOM(this.div,w.div,w.contentDiv,!0)}addOrRebuild(w){w.needsToBeRebuilt()?w.rebuild():this.add(w)}addUndoableEditor(w){const q=()=>w._uiManager.rebuild(w),it=()=>{w.remove()};this.addCommands({cmd:q,undo:it,mustExec:!1})}getNextId(){return t(this,x).getId()}pasteEditor(w,q){t(this,x).updateToolbar(w),t(this,x).updateMode(w);const{offsetX:it,offsetY:at}=Y(this,b,sn).call(this),V=this.getNextId(),ct=Y(this,y,nn).call(this,{parent:this,id:V,x:it,y:at,uiManager:t(this,x),isCentered:!0,...q});ct&&this.add(ct)}deserialize(w){switch(w.annotationType??w.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return X.FreeTextEditor.deserialize(w,this,t(this,x));case a.AnnotationEditorType.INK:return G.InkEditor.deserialize(w,this,t(this,x));case a.AnnotationEditorType.STAMP:return D.StampEditor.deserialize(w,this,t(this,x))}return null}addNewEditor(){Y(this,d,ke).call(this,Y(this,b,sn).call(this),!0)}setSelected(w){t(this,x).setSelected(w)}toggleSelected(w){t(this,x).toggleSelected(w)}isSelected(w){return t(this,x).isSelected(w)}unselect(w){t(this,x).unselect(w)}pointerup(w){const{isMac:q}=a.FeatureTest.platform;if(!(w.button!==0||w.ctrlKey&&q)&&w.target===this.div&&t(this,f)){if(rt(this,f,!1),!t(this,I)){rt(this,I,!0);return}if(t(this,x).getMode()===a.AnnotationEditorType.STAMP){t(this,x).unselectAll();return}Y(this,d,ke).call(this,w,!1)}}pointerdown(w){if(t(this,f)){rt(this,f,!1);return}const{isMac:q}=a.FeatureTest.platform;if(w.button!==0||w.ctrlKey&&q||w.target!==this.div)return;rt(this,f,!0);const it=t(this,x).getActive();rt(this,I,!it||it.isEmpty())}findNewParent(w,q,it){const at=t(this,x).findParent(q,it);return at===null||at===this?!1:(at.changeParent(w),!0)}destroy(){var w,q;((w=t(this,x).getActive())==null?void 0:w.parent)===this&&(t(this,x).commitOrRemove(),t(this,x).setActiveEditor(null));for(const it of t(this,v).values())(q=t(this,m))==null||q.removePointerInTextLayer(it.contentDiv),it.setParent(null),it.isAttachedToDOM=!1,it.div.remove();this.div=null,t(this,v).clear(),t(this,x).removeLayer(this)}render({viewport:w}){this.viewport=w,(0,ft.setLayerDimensions)(this.div,w);for(const q of t(this,x).getEditors(this.pageIndex))this.add(q);this.updateMode()}update({viewport:w}){t(this,x).commitOrRemove(),this.viewport=w,(0,ft.setLayerDimensions)(this.div,{rotation:w.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:w,pageHeight:q}=this.viewport.rawDims;return[w,q]}};m=new WeakMap,I=new WeakMap,O=new WeakMap,C=new WeakMap,S=new WeakMap,v=new WeakMap,f=new WeakMap,A=new WeakMap,T=new WeakMap,x=new WeakMap,y=new WeakSet,nn=function(w){switch(t(this,x).getMode()){case a.AnnotationEditorType.FREETEXT:return new X.FreeTextEditor(w);case a.AnnotationEditorType.INK:return new G.InkEditor(w);case a.AnnotationEditorType.STAMP:return new D.StampEditor(w)}return null},d=new WeakSet,ke=function(w,q){const it=this.getNextId(),at=Y(this,y,nn).call(this,{parent:this,id:it,x:w.offsetX,y:w.offsetY,uiManager:t(this,x),isCentered:q});return at&&this.add(at),at},b=new WeakSet,sn=function(){const{x:w,y:q,width:it,height:at}=this.div.getBoundingClientRect(),V=Math.max(0,w),ct=Math.max(0,q),mt=Math.min(window.innerWidth,w+it),St=Math.min(window.innerHeight,q+at),xt=(V+mt)/2-w,P=(ct+St)/2-q,[n,o]=this.viewport.rotation%180===0?[xt,P]:[P,xt];return{offsetX:n,offsetY:o}},k=new WeakSet,rn=function(){rt(this,A,!0);for(const w of t(this,v).values())w.isEmpty()&&w.remove();rt(this,A,!1)},ne(W,"_initialized",!1);let R=W;i.AnnotationEditorLayer=R},(L,i,N)=>{var D,R,m,I,O,C,S,v,f,A,Fn,x,Dn,l,Ln,F,ve,c,an,g,In,$,on;Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0;var a=N(1),p=N(5),X=N(4),G=N(29);const q=class q extends X.AnnotationEditor{constructor(V){super({...V,name:"freeTextEditor"});U(this,A);U(this,x);U(this,l);U(this,F);U(this,c);U(this,g);U(this,$);U(this,D,this.editorDivBlur.bind(this));U(this,R,this.editorDivFocus.bind(this));U(this,m,this.editorDivInput.bind(this));U(this,I,this.editorDivKeydown.bind(this));U(this,O,void 0);U(this,C,"");U(this,S,`${this.id}-editor`);U(this,v,void 0);U(this,f,null);rt(this,O,V.color||q._defaultColor||X.AnnotationEditor._defaultLineColor),rt(this,v,V.fontSize||q._defaultFontSize)}static get _keyboardManager(){const V=q.prototype,ct=xt=>xt.isEmpty(),mt=p.AnnotationEditorUIManager.TRANSLATE_SMALL,St=p.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new p.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],V.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],V.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],V._translateEmpty,{args:[-mt,0],checker:ct}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],V._translateEmpty,{args:[-St,0],checker:ct}],[["ArrowRight","mac+ArrowRight"],V._translateEmpty,{args:[mt,0],checker:ct}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],V._translateEmpty,{args:[St,0],checker:ct}],[["ArrowUp","mac+ArrowUp"],V._translateEmpty,{args:[0,-mt],checker:ct}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],V._translateEmpty,{args:[0,-St],checker:ct}],[["ArrowDown","mac+ArrowDown"],V._translateEmpty,{args:[0,mt],checker:ct}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],V._translateEmpty,{args:[0,St],checker:ct}]]))}static initialize(V){X.AnnotationEditor.initialize(V,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams(V,ct){switch(V){case a.AnnotationEditorParamsType.FREETEXT_SIZE:q._defaultFontSize=ct;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:q._defaultColor=ct;break}}updateParams(V,ct){switch(V){case a.AnnotationEditorParamsType.FREETEXT_SIZE:Y(this,A,Fn).call(this,ct);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:Y(this,x,Dn).call(this,ct);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,q._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,q._defaultColor||X.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,v)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,O)]]}_translateEmpty(V,ct){this._uiManager.translateSelectedEditors(V,ct,!0)}getInitialTranslation(){const V=this.parentScale;return[-q._internalPadding*V,-(q._internalPadding+t(this,v))*V]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,I)),this.editorDiv.addEventListener("focus",t(this,R)),this.editorDiv.addEventListener("blur",t(this,D)),this.editorDiv.addEventListener("input",t(this,m)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,S)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,I)),this.editorDiv.removeEventListener("focus",t(this,R)),this.editorDiv.removeEventListener("blur",t(this,D)),this.editorDiv.removeEventListener("input",t(this,m)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(V){this._focusEventsAllowed&&(super.focusin(V),V.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var V;if(this.width){Y(this,$,on).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(V=this._initialOptions)!=null&&V.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const V=t(this,C),ct=rt(this,C,Y(this,l,Ln).call(this).trimEnd());if(V===ct)return;const mt=St=>{if(rt(this,C,St),!St){this.remove();return}Y(this,c,an).call(this),this._uiManager.rebuild(this),Y(this,F,ve).call(this)};this.addCommands({cmd:()=>{mt(ct)},undo:()=>{mt(V)},mustExec:!1}),Y(this,F,ve).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(V){this.enterInEditMode()}keydown(V){V.target===this.div&&V.key==="Enter"&&(this.enterInEditMode(),V.preventDefault())}editorDivKeydown(V){q._keyboardManager.exec(this,V)}editorDivFocus(V){this.isEditing=!0}editorDivBlur(V){this.isEditing=!1}editorDivInput(V){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let V,ct;this.width&&(V=this.x,ct=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,S)),this.enableEditing(),X.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(St=>{var xt;return(xt=this.editorDiv)==null?void 0:xt.setAttribute("aria-label",St)}),X.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(St=>{var xt;return(xt=this.editorDiv)==null?void 0:xt.setAttribute("default-content",St)}),this.editorDiv.contentEditable=!0;const{style:mt}=this.editorDiv;if(mt.fontSize=`calc(${t(this,v)}px * var(--scale-factor))`,mt.color=t(this,O),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,p.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[St,xt]=this.parentDimensions;if(this.annotationElementId){const{position:P}=t(this,f);let[n,o]=this.getInitialTranslation();[n,o]=this.pageTranslationToScreen(n,o);const[s,h]=this.pageDimensions,[u,E]=this.pageTranslation;let M,H;switch(this.rotation){case 0:M=V+(P[0]-u)/s,H=ct+this.height-(P[1]-E)/h;break;case 90:M=V+(P[0]-u)/s,H=ct-(P[1]-E)/h,[n,o]=[o,-n];break;case 180:M=V-this.width+(P[0]-u)/s,H=ct-(P[1]-E)/h,[n,o]=[-n,-o];break;case 270:M=V+(P[0]-u-this.height*h)/s,H=ct+(P[1]-E-this.width*s)/h,[n,o]=[-o,n];break}this.setAt(M*St,H*xt,n,o)}else this.setAt(V*St,ct*xt,this.width*St,this.height*xt);Y(this,c,an).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(V,ct,mt){let St=null;if(V instanceof G.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:P,fontColor:n},rect:o,rotation:s,id:h},textContent:u,textPosition:E,parent:{page:{pageNumber:M}}}=V;if(!u||u.length===0)return null;St=V={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(n),fontSize:P,value:u.join(`
`),position:E,pageIndex:M-1,rect:o,rotation:s,id:h,deleted:!1}}const xt=super.deserialize(V,ct,mt);return rt(xt,v,V.fontSize),rt(xt,O,a.Util.makeHexColor(...V.color)),rt(xt,C,V.value),xt.annotationElementId=V.id||null,rt(xt,f,St),xt}serialize(V=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ct=q._internalPadding*this.parentScale,mt=this.getRect(ct,ct),St=X.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,O)),xt={annotationType:a.AnnotationEditorType.FREETEXT,color:St,fontSize:t(this,v),value:t(this,C),pageIndex:this.pageIndex,rect:mt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return V?xt:this.annotationElementId&&!Y(this,g,In).call(this,xt)?null:(xt.id=this.annotationElementId,xt)}};D=new WeakMap,R=new WeakMap,m=new WeakMap,I=new WeakMap,O=new WeakMap,C=new WeakMap,S=new WeakMap,v=new WeakMap,f=new WeakMap,A=new WeakSet,Fn=function(V){const ct=St=>{this.editorDiv.style.fontSize=`calc(${St}px * var(--scale-factor))`,this.translate(0,-(St-t(this,v))*this.parentScale),rt(this,v,St),Y(this,F,ve).call(this)},mt=t(this,v);this.addCommands({cmd:()=>{ct(V)},undo:()=>{ct(mt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},x=new WeakSet,Dn=function(V){const ct=t(this,O);this.addCommands({cmd:()=>{rt(this,O,this.editorDiv.style.color=V)},undo:()=>{rt(this,O,this.editorDiv.style.color=ct)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,Ln=function(){const V=this.editorDiv.getElementsByTagName("div");if(V.length===0)return this.editorDiv.innerText;const ct=[];for(const mt of V)ct.push(mt.innerText.replace(/\r\n?|\n/,""));return ct.join(`
`)},F=new WeakSet,ve=function(){const[V,ct]=this.parentDimensions;let mt;if(this.isAttachedToDOM)mt=this.div.getBoundingClientRect();else{const{currentLayer:St,div:xt}=this,P=xt.style.display;xt.style.display="hidden",St.div.append(this.div),mt=xt.getBoundingClientRect(),xt.remove(),xt.style.display=P}this.rotation%180===this.parentRotation%180?(this.width=mt.width/V,this.height=mt.height/ct):(this.width=mt.height/V,this.height=mt.width/ct),this.fixAndSetPosition()},c=new WeakSet,an=function(){if(this.editorDiv.replaceChildren(),!!t(this,C))for(const V of t(this,C).split(`
`)){const ct=document.createElement("div");ct.append(V?document.createTextNode(V):document.createElement("br")),this.editorDiv.append(ct)}},g=new WeakSet,In=function(V){const{value:ct,fontSize:mt,color:St,rect:xt,pageIndex:P}=t(this,f);return V.value!==ct||V.fontSize!==mt||V.rect.some((n,o)=>Math.abs(n-xt[o])>=1)||V.color.some((n,o)=>n!==St[o])||V.pageIndex!==P},$=new WeakSet,on=function(V=!1){if(!this.annotationElementId)return;if(Y(this,F,ve).call(this),!V&&(this.width===0||this.height===0)){setTimeout(()=>Y(this,$,on).call(this,!0),0);return}const ct=q._internalPadding*this.parentScale;t(this,f).rect=this.getRect(ct,ct)},ne(q,"_freeTextDefaultContent",""),ne(q,"_internalPadding",0),ne(q,"_defaultColor",null),ne(q,"_defaultFontSize",10),ne(q,"_type","freetext");let ft=q;i.FreeTextEditor=ft},(L,i,N)=>{var o,h,he,E,On,H,st,Q,ot,ht,gt,dt,Pt,It,Et,Lt,bt,nt,tt,pt,Tt,Ct,Ht,Nn,Wt,Me,zt,ln,Yt,cn,et,K,At,vt,ee,te,Z,hn,Nt,Rt,jt,Bt,jn,yt,dn;Object.defineProperty(i,"__esModule",{value:!0}),i.StampAnnotationElement=i.InkAnnotationElement=i.FreeTextAnnotationElement=i.AnnotationLayer=void 0;var a=N(1),p=N(6),X=N(3),G=N(30),ft=N(31),D=N(32);const R=1e3,m=9,I=new WeakSet;function O(Ot){return{width:Ot[2]-Ot[0],height:Ot[3]-Ot[1]}}class C{static create(j){switch(j.data.annotationType){case a.AnnotationType.LINK:return new v(j);case a.AnnotationType.TEXT:return new f(j);case a.AnnotationType.WIDGET:switch(j.data.fieldType){case"Tx":return new T(j);case"Btn":return j.data.radioButton?new l(j):j.data.checkBox?new y(j):new d(j);case"Ch":return new F(j);case"Sig":return new x(j)}return new A(j);case a.AnnotationType.POPUP:return new b(j);case a.AnnotationType.FREETEXT:return new k(j);case a.AnnotationType.LINE:return new g(j);case a.AnnotationType.SQUARE:return new W(j);case a.AnnotationType.CIRCLE:return new $(j);case a.AnnotationType.POLYLINE:return new w(j);case a.AnnotationType.CARET:return new it(j);case a.AnnotationType.INK:return new at(j);case a.AnnotationType.POLYGON:return new q(j);case a.AnnotationType.HIGHLIGHT:return new V(j);case a.AnnotationType.UNDERLINE:return new ct(j);case a.AnnotationType.SQUIGGLY:return new mt(j);case a.AnnotationType.STRIKEOUT:return new St(j);case a.AnnotationType.STAMP:return new xt(j);case a.AnnotationType.FILEATTACHMENT:return new P(j);default:return new S(j)}}}const s=class s{constructor(j,{isRenderable:e=!1,ignoreBorder:_=!1,createQuadrilaterals:B=!1}={}){U(this,o,!1);this.isRenderable=e,this.data=j.data,this.layer=j.layer,this.linkService=j.linkService,this.downloadManager=j.downloadManager,this.imageResourcesPath=j.imageResourcesPath,this.renderForms=j.renderForms,this.svgFactory=j.svgFactory,this.annotationStorage=j.annotationStorage,this.enableScripting=j.enableScripting,this.hasJSActions=j.hasJSActions,this._fieldObjects=j.fieldObjects,this.parent=j.parent,e&&(this.container=this._createContainer(_)),B&&this._createQuadrilaterals()}static _hasPopupData({titleObj:j,contentsObj:e,richText:_}){return!!(j!=null&&j.str||e!=null&&e.str||_!=null&&_.str)}get hasPopupData(){return s._hasPopupData(this.data)}_createContainer(j){const{data:e,parent:{page:_,viewport:B}}=this,z=document.createElement("section");z.setAttribute("data-annotation-id",e.id),this instanceof A||(z.tabIndex=R),z.style.zIndex=this.parent.zIndex++,this.data.popupRef&&z.setAttribute("aria-haspopup","dialog"),e.noRotate&&z.classList.add("norotate");const{pageWidth:J,pageHeight:lt,pageX:_t,pageY:Mt}=B.rawDims;if(!e.rect||this instanceof b){const{rotation:Vt}=e;return!e.hasOwnCanvas&&Vt!==0&&this.setRotation(Vt,z),z}const{width:kt,height:Xt}=O(e.rect),Ft=a.Util.normalizeRect([e.rect[0],_.view[3]-e.rect[1]+_.view[1],e.rect[2],_.view[3]-e.rect[3]+_.view[1]]);if(!j&&e.borderStyle.width>0){z.style.borderWidth=`${e.borderStyle.width}px`;const Vt=e.borderStyle.horizontalCornerRadius,qt=e.borderStyle.verticalCornerRadius;if(Vt>0||qt>0){const Zt=`calc(${Vt}px * var(--scale-factor)) / calc(${qt}px * var(--scale-factor))`;z.style.borderRadius=Zt}else if(this instanceof l){const Zt=`calc(${kt}px * var(--scale-factor)) / calc(${Xt}px * var(--scale-factor))`;z.style.borderRadius=Zt}switch(e.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:z.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:z.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:z.style.borderBottomStyle="solid";break}const Jt=e.borderColor||null;Jt?(rt(this,o,!0),z.style.borderColor=a.Util.makeHexColor(Jt[0]|0,Jt[1]|0,Jt[2]|0)):z.style.borderWidth=0}z.style.left=`${100*(Ft[0]-_t)/J}%`,z.style.top=`${100*(Ft[1]-Mt)/lt}%`;const{rotation:Dt}=e;return e.hasOwnCanvas||Dt===0?(z.style.width=`${100*kt/J}%`,z.style.height=`${100*Xt/lt}%`):this.setRotation(Dt,z),z}setRotation(j,e=this.container){if(!this.data.rect)return;const{pageWidth:_,pageHeight:B}=this.parent.viewport.rawDims,{width:z,height:J}=O(this.data.rect);let lt,_t;j%180===0?(lt=100*z/_,_t=100*J/B):(lt=100*J/_,_t=100*z/B),e.style.width=`${lt}%`,e.style.height=`${_t}%`,e.setAttribute("data-main-rotation",(360-j)%360)}get _commonActions(){const j=(e,_,B)=>{const z=B.detail[e],J=z[0],lt=z.slice(1);B.target.style[_]=G.ColorConverters[`${J}_HTML`](lt),this.annotationStorage.setValue(this.data.id,{[_]:G.ColorConverters[`${J}_rgb`](lt)})};return(0,a.shadow)(this,"_commonActions",{display:e=>{const{display:_}=e.detail,B=_%2===1;this.container.style.visibility=B?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:B,noPrint:_===1||_===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:_}=e.detail;this.container.style.visibility=_?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:_,noView:_})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{j("bgColor","backgroundColor",e)},fillColor:e=>{j("fillColor","backgroundColor",e)},fgColor:e=>{j("fgColor","color",e)},textColor:e=>{j("textColor","color",e)},borderColor:e=>{j("borderColor","borderColor",e)},strokeColor:e=>{j("strokeColor","borderColor",e)},rotation:e=>{const _=e.detail.rotation;this.setRotation(_),this.annotationStorage.setValue(this.data.id,{rotation:_})}})}_dispatchEventFromSandbox(j,e){const _=this._commonActions;for(const B of Object.keys(e.detail)){const z=j[B]||_[B];z==null||z(e)}}_setDefaultPropertiesFromJS(j){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const _=this._commonActions;for(const[B,z]of Object.entries(e)){const J=_[B];if(J){const lt={detail:{[B]:z},target:j};J(lt),delete e[B]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:j}=this.data;if(!j)return;const[e,_,B,z]=this.data.rect;if(j.length===1){const[,{x:qt,y:Jt},{x:Zt,y:ie}]=j[0];if(B===qt&&z===Jt&&e===Zt&&_===ie)return}const{style:J}=this.container;let lt;if(t(this,o)){const{borderColor:qt,borderWidth:Jt}=J;J.borderWidth=0,lt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${qt}" stroke-width="${Jt}">`],this.container.classList.add("hasBorder")}const _t=B-e,Mt=z-_,{svgFactory:kt}=this,Xt=kt.createElement("svg");Xt.classList.add("quadrilateralsContainer"),Xt.setAttribute("width",0),Xt.setAttribute("height",0);const Ft=kt.createElement("defs");Xt.append(Ft);const Dt=kt.createElement("clipPath"),Vt=`clippath_${this.data.id}`;Dt.setAttribute("id",Vt),Dt.setAttribute("clipPathUnits","objectBoundingBox"),Ft.append(Dt);for(const[,{x:qt,y:Jt},{x:Zt,y:ie}]of j){const se=kt.createElement("rect"),re=(Zt-e)/_t,le=(z-Jt)/Mt,ce=(qt-Zt)/_t,yn=(Jt-ie)/Mt;se.setAttribute("x",re),se.setAttribute("y",le),se.setAttribute("width",ce),se.setAttribute("height",yn),Dt.append(se),lt==null||lt.push(`<rect vector-effect="non-scaling-stroke" x="${re}" y="${le}" width="${ce}" height="${yn}"/>`)}t(this,o)&&(lt.push("</g></svg>')"),J.backgroundImage=lt.join("")),this.container.append(Xt),this.container.style.clipPath=`url(#${Vt})`}_createPopup(){const{container:j,data:e}=this;j.setAttribute("aria-haspopup","dialog");const _=new b({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(_.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(j,e=null){const _=[];if(this._fieldObjects){const B=this._fieldObjects[j];if(B)for(const{page:z,id:J,exportValues:lt}of B){if(z===-1||J===e)continue;const _t=typeof lt=="string"?lt:null,Mt=document.querySelector(`[data-element-id="${J}"]`);if(Mt&&!I.has(Mt)){(0,a.warn)(`_getElementsByName - element not allowed: ${J}`);continue}_.push({id:J,exportValue:_t,domElement:Mt})}return _}for(const B of document.getElementsByName(j)){const{exportValue:z}=B,J=B.getAttribute("data-element-id");J!==e&&I.has(B)&&_.push({id:J,exportValue:z,domElement:B})}return _}show(){var j;this.container&&(this.container.hidden=!1),(j=this.popup)==null||j.maybeShow()}hide(){var j;this.container&&(this.container.hidden=!0),(j=this.popup)==null||j.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const j=this.getElementsToTriggerPopup();if(Array.isArray(j))for(const e of j)e.classList.add("highlightArea");else j.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:j,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var _;(_=this.linkService.eventBus)==null||_.dispatch("switchannotationeditormode",{source:this,mode:j,editId:e})})}};o=new WeakMap;let S=s;class v extends S{constructor(e,_=null){super(e,{isRenderable:!0,ignoreBorder:!!(_!=null&&_.ignoreBorder),createQuadrilaterals:!0});U(this,h);U(this,E);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:_}=this,B=document.createElement("a");B.setAttribute("data-element-id",e.id);let z=!1;return e.url?(_.addLinkAttributes(B,e.url,e.newWindow),z=!0):e.action?(this._bindNamedAction(B,e.action),z=!0):e.attachment?(this._bindAttachment(B,e.attachment),z=!0):e.setOCGState?(Y(this,E,On).call(this,B,e.setOCGState),z=!0):e.dest?(this._bindLink(B,e.dest),z=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(B,e),z=!0),e.resetForm?(this._bindResetFormAction(B,e.resetForm),z=!0):this.isTooltipOnly&&!z&&(this._bindLink(B,""),z=!0)),this.container.classList.add("linkAnnotation"),z&&this.container.append(B),this.container}_bindLink(e,_){e.href=this.linkService.getDestinationHash(_),e.onclick=()=>(_&&this.linkService.goToDestination(_),!1),(_||_==="")&&Y(this,h,he).call(this)}_bindNamedAction(e,_){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(_),!1),Y(this,h,he).call(this)}_bindAttachment(e,_){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>{var B;return(B=this.downloadManager)==null||B.openOrDownloadData(this.container,_.content,_.filename),!1},Y(this,h,he).call(this)}_bindJSAction(e,_){e.href=this.linkService.getAnchorUrl("");const B=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const z of Object.keys(_.actions)){const J=B.get(z);J&&(e[J]=()=>{var lt;return(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_.id,name:z}}),!1})}e.onclick||(e.onclick=()=>!1),Y(this,h,he).call(this)}_bindResetFormAction(e,_){const B=e.onclick;if(B||(e.href=this.linkService.getAnchorUrl("")),Y(this,h,he).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),B||(e.onclick=()=>!1);return}e.onclick=()=>{var Xt;B==null||B();const{fields:z,refs:J,include:lt}=_,_t=[];if(z.length!==0||J.length!==0){const Ft=new Set(J);for(const Dt of z){const Vt=this._fieldObjects[Dt]||[];for(const{id:qt}of Vt)Ft.add(qt)}for(const Dt of Object.values(this._fieldObjects))for(const Vt of Dt)Ft.has(Vt.id)===lt&&_t.push(Vt)}else for(const Ft of Object.values(this._fieldObjects))_t.push(...Ft);const Mt=this.annotationStorage,kt=[];for(const Ft of _t){const{id:Dt}=Ft;switch(kt.push(Dt),Ft.type){case"text":{const qt=Ft.defaultValue||"";Mt.setValue(Dt,{value:qt});break}case"checkbox":case"radiobutton":{const qt=Ft.defaultValue===Ft.exportValues;Mt.setValue(Dt,{value:qt});break}case"combobox":case"listbox":{const qt=Ft.defaultValue||"";Mt.setValue(Dt,{value:qt});break}default:continue}const Vt=document.querySelector(`[data-element-id="${Dt}"]`);if(Vt){if(!I.has(Vt)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${Dt}`);continue}}else continue;Vt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:kt,name:"ResetForm"}})),!1}}}h=new WeakSet,he=function(){this.container.setAttribute("data-internal-link","")},E=new WeakSet,On=function(e,_){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(_),!1),Y(this,h,he).call(this)};class f extends S{constructor(j){super(j,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const j=document.createElement("img");return j.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",j.alt="[{{type}} Annotation]",j.dataset.l10nId="text_annotation_type",j.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(j),this.container}}class A extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(j){var e;this.data.hasOwnCanvas&&(((e=j.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(j.previousSibling.hidden=!0),j.hidden=!1)}_getKeyModifier(j){const{isWin:e,isMac:_}=a.FeatureTest.platform;return e&&j.ctrlKey||_&&j.metaKey}_setEventListener(j,e,_,B,z){_.includes("mouse")?j.addEventListener(_,J=>{var lt;(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:z(J),shift:J.shiftKey,modifier:this._getKeyModifier(J)}})}):j.addEventListener(_,J=>{var lt;if(_==="blur"){if(!e.focused||!J.relatedTarget)return;e.focused=!1}else if(_==="focus"){if(e.focused)return;e.focused=!0}z&&((lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:z(J)}}))})}_setEventListeners(j,e,_,B){var z,J,lt;for(const[_t,Mt]of _)(Mt==="Action"||(z=this.data.actions)!=null&&z[Mt])&&((Mt==="Focus"||Mt==="Blur")&&(e||(e={focused:!1})),this._setEventListener(j,e,_t,Mt,B),Mt==="Focus"&&!((J=this.data.actions)!=null&&J.Blur)?this._setEventListener(j,e,"blur","Blur",null):Mt==="Blur"&&!((lt=this.data.actions)!=null&&lt.Focus)&&this._setEventListener(j,e,"focus","Focus",null))}_setBackgroundColor(j){const e=this.data.backgroundColor||null;j.style.backgroundColor=e===null?"transparent":a.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(j){const e=["left","center","right"],{fontColor:_}=this.data.defaultAppearanceData,B=this.data.defaultAppearanceData.fontSize||m,z=j.style;let J;const lt=2,_t=Mt=>Math.round(10*Mt)/10;if(this.data.multiLine){const Mt=Math.abs(this.data.rect[3]-this.data.rect[1]-lt),kt=Math.round(Mt/(a.LINE_FACTOR*B))||1,Xt=Mt/kt;J=Math.min(B,_t(Xt/a.LINE_FACTOR))}else{const Mt=Math.abs(this.data.rect[3]-this.data.rect[1]-lt);J=Math.min(B,_t(Mt/a.LINE_FACTOR))}z.fontSize=`calc(${J}px * var(--scale-factor))`,z.color=a.Util.makeHexColor(_[0],_[1],_[2]),this.data.textAlignment!==null&&(z.textAlign=e[this.data.textAlignment])}_setRequired(j,e){e?j.setAttribute("required",!0):j.removeAttribute("required"),j.setAttribute("aria-required",e)}}class T extends A{constructor(j){const e=j.renderForms||!j.data.hasAppearance&&!!j.data.fieldValue;super(j,{isRenderable:e})}setPropertyOnSiblings(j,e,_,B){const z=this.annotationStorage;for(const J of this._getElementsByName(j.name,j.id))J.domElement&&(J.domElement[e]=_),z.setValue(J.id,{[B]:_})}render(){var B,z;const j=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let _=null;if(this.renderForms){const J=j.getValue(e,{value:this.data.fieldValue});let lt=J.value||"";const _t=j.getValue(e,{charLimit:this.data.maxLen}).charLimit;_t&&lt.length>_t&&(lt=lt.slice(0,_t));let Mt=J.formattedValue||((B=this.data.textContent)==null?void 0:B.join(`
`))||null;Mt&&this.data.comb&&(Mt=Mt.replaceAll(/\s+/g,""));const kt={userValue:lt,formattedValue:Mt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(_=document.createElement("textarea"),_.textContent=Mt??lt,this.data.doNotScroll&&(_.style.overflowY="hidden")):(_=document.createElement("input"),_.type="text",_.setAttribute("value",Mt??lt),this.data.doNotScroll&&(_.style.overflowX="hidden")),this.data.hasOwnCanvas&&(_.hidden=!0),I.add(_),_.setAttribute("data-element-id",e),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=R,this._setRequired(_,this.data.required),_t&&(_.maxLength=_t),_.addEventListener("input",Ft=>{j.setValue(e,{value:Ft.target.value}),this.setPropertyOnSiblings(_,"value",Ft.target.value,"value"),kt.formattedValue=null}),_.addEventListener("resetform",Ft=>{const Dt=this.data.defaultFieldValue??"";_.value=kt.userValue=Dt,kt.formattedValue=null});let Xt=Ft=>{const{formattedValue:Dt}=kt;Dt!=null&&(Ft.target.value=Dt),Ft.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",Dt=>{if(kt.focused)return;const{target:Vt}=Dt;kt.userValue&&(Vt.value=kt.userValue),kt.lastCommittedValue=Vt.value,kt.commitKey=1,kt.focused=!0}),_.addEventListener("updatefromsandbox",Dt=>{this.showElementAndHideCanvas(Dt.target);const Vt={value(qt){kt.userValue=qt.detail.value??"",j.setValue(e,{value:kt.userValue.toString()}),qt.target.value=kt.userValue},formattedValue(qt){const{formattedValue:Jt}=qt.detail;kt.formattedValue=Jt,Jt!=null&&qt.target!==document.activeElement&&(qt.target.value=Jt),j.setValue(e,{formattedValue:Jt})},selRange(qt){qt.target.setSelectionRange(...qt.detail.selRange)},charLimit:qt=>{var se;const{charLimit:Jt}=qt.detail,{target:Zt}=qt;if(Jt===0){Zt.removeAttribute("maxLength");return}Zt.setAttribute("maxLength",Jt);let ie=kt.userValue;!ie||ie.length<=Jt||(ie=ie.slice(0,Jt),Zt.value=kt.userValue=ie,j.setValue(e,{value:ie}),(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:ie,willCommit:!0,commitKey:1,selStart:Zt.selectionStart,selEnd:Zt.selectionEnd}}))}};this._dispatchEventFromSandbox(Vt,Dt)}),_.addEventListener("keydown",Dt=>{var Jt;kt.commitKey=1;let Vt=-1;if(Dt.key==="Escape"?Vt=0:Dt.key==="Enter"&&!this.data.multiLine?Vt=2:Dt.key==="Tab"&&(kt.commitKey=3),Vt===-1)return;const{value:qt}=Dt.target;kt.lastCommittedValue!==qt&&(kt.lastCommittedValue=qt,kt.userValue=qt,(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:qt,willCommit:!0,commitKey:Vt,selStart:Dt.target.selectionStart,selEnd:Dt.target.selectionEnd}}))});const Ft=Xt;Xt=null,_.addEventListener("blur",Dt=>{var qt;if(!kt.focused||!Dt.relatedTarget)return;kt.focused=!1;const{value:Vt}=Dt.target;kt.userValue=Vt,kt.lastCommittedValue!==Vt&&((qt=this.linkService.eventBus)==null||qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Vt,willCommit:!0,commitKey:kt.commitKey,selStart:Dt.target.selectionStart,selEnd:Dt.target.selectionEnd}})),Ft(Dt)}),(z=this.data.actions)!=null&&z.Keystroke&&_.addEventListener("beforeinput",Dt=>{var le;kt.lastCommittedValue=null;const{data:Vt,target:qt}=Dt,{value:Jt,selectionStart:Zt,selectionEnd:ie}=qt;let se=Zt,re=ie;switch(Dt.inputType){case"deleteWordBackward":{const ce=Jt.substring(0,Zt).match(/\w*[^\w]*$/);ce&&(se-=ce[0].length);break}case"deleteWordForward":{const ce=Jt.substring(Zt).match(/^[^\w]*\w*/);ce&&(re+=ce[0].length);break}case"deleteContentBackward":Zt===ie&&(se-=1);break;case"deleteContentForward":Zt===ie&&(re+=1);break}Dt.preventDefault(),(le=this.linkService.eventBus)==null||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Jt,change:Vt||"",willCommit:!1,selStart:se,selEnd:re}})}),this._setEventListeners(_,kt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Dt=>Dt.target.value)}if(Xt&&_.addEventListener("blur",Xt),this.data.comb){const Dt=(this.data.rect[2]-this.data.rect[0])/_t;_.classList.add("comb"),_.style.letterSpacing=`calc(${Dt}px * var(--scale-factor) - 1ch)`}}else _=document.createElement("div"),_.textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell";return this._setTextStyle(_),this._setBackgroundColor(_),this._setDefaultPropertiesFromJS(_),this.container.append(_),this.container}}class x extends A{constructor(j){super(j,{isRenderable:!!j.data.hasOwnCanvas})}}class y extends A{constructor(j){super(j,{isRenderable:j.renderForms})}render(){const j=this.annotationStorage,e=this.data,_=e.id;let B=j.getValue(_,{value:e.exportValue===e.fieldValue}).value;typeof B=="string"&&(B=B!=="Off",j.setValue(_,{value:B})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const z=document.createElement("input");return I.add(z),z.setAttribute("data-element-id",_),z.disabled=e.readOnly,this._setRequired(z,this.data.required),z.type="checkbox",z.name=e.fieldName,B&&z.setAttribute("checked",!0),z.setAttribute("exportValue",e.exportValue),z.tabIndex=R,z.addEventListener("change",J=>{const{name:lt,checked:_t}=J.target;for(const Mt of this._getElementsByName(lt,_)){const kt=_t&&Mt.exportValue===e.exportValue;Mt.domElement&&(Mt.domElement.checked=kt),j.setValue(Mt.id,{value:kt})}j.setValue(_,{value:_t})}),z.addEventListener("resetform",J=>{const lt=e.defaultFieldValue||"Off";J.target.checked=lt===e.exportValue}),this.enableScripting&&this.hasJSActions&&(z.addEventListener("updatefromsandbox",J=>{const lt={value(_t){_t.target.checked=_t.detail.value!=="Off",j.setValue(_,{value:_t.target.checked})}};this._dispatchEventFromSandbox(lt,J)}),this._setEventListeners(z,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.checked)),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class l extends A{constructor(j){super(j,{isRenderable:j.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const j=this.annotationStorage,e=this.data,_=e.id;let B=j.getValue(_,{value:e.fieldValue===e.buttonValue}).value;typeof B=="string"&&(B=B!==e.buttonValue,j.setValue(_,{value:B}));const z=document.createElement("input");if(I.add(z),z.setAttribute("data-element-id",_),z.disabled=e.readOnly,this._setRequired(z,this.data.required),z.type="radio",z.name=e.fieldName,B&&z.setAttribute("checked",!0),z.tabIndex=R,z.addEventListener("change",J=>{const{name:lt,checked:_t}=J.target;for(const Mt of this._getElementsByName(lt,_))j.setValue(Mt.id,{value:!1});j.setValue(_,{value:_t})}),z.addEventListener("resetform",J=>{const lt=e.defaultFieldValue;J.target.checked=lt!=null&&lt===e.buttonValue}),this.enableScripting&&this.hasJSActions){const J=e.buttonValue;z.addEventListener("updatefromsandbox",lt=>{const _t={value:Mt=>{const kt=J===Mt.detail.value;for(const Xt of this._getElementsByName(Mt.target.name)){const Ft=kt&&Xt.id===_;Xt.domElement&&(Xt.domElement.checked=Ft),j.setValue(Xt.id,{value:Ft})}}};this._dispatchEventFromSandbox(_t,lt)}),this._setEventListeners(z,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],lt=>lt.target.checked)}return this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class d extends v{constructor(j){super(j,{ignoreBorder:j.data.hasAppearance})}render(){const j=super.render();j.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(j.title=this.data.alternativeText);const e=j.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",_=>{this._dispatchEventFromSandbox({},_)})),j}}class F extends A{constructor(j){super(j,{isRenderable:j.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const j=this.annotationStorage,e=this.data.id,_=j.getValue(e,{value:this.data.fieldValue}),B=document.createElement("select");I.add(B),B.setAttribute("data-element-id",e),B.disabled=this.data.readOnly,this._setRequired(B,this.data.required),B.name=this.data.fieldName,B.tabIndex=R;let z=this.data.combo&&this.data.options.length>0;this.data.combo||(B.size=this.data.options.length,this.data.multiSelect&&(B.multiple=!0)),B.addEventListener("resetform",kt=>{const Xt=this.data.defaultFieldValue;for(const Ft of B.options)Ft.selected=Ft.value===Xt});for(const kt of this.data.options){const Xt=document.createElement("option");Xt.textContent=kt.displayValue,Xt.value=kt.exportValue,_.value.includes(kt.exportValue)&&(Xt.setAttribute("selected",!0),z=!1),B.append(Xt)}let J=null;if(z){const kt=document.createElement("option");kt.value=" ",kt.setAttribute("hidden",!0),kt.setAttribute("selected",!0),B.prepend(kt),J=()=>{kt.remove(),B.removeEventListener("input",J),J=null},B.addEventListener("input",J)}const lt=kt=>{const Xt=kt?"value":"textContent",{options:Ft,multiple:Dt}=B;return Dt?Array.prototype.filter.call(Ft,Vt=>Vt.selected).map(Vt=>Vt[Xt]):Ft.selectedIndex===-1?null:Ft[Ft.selectedIndex][Xt]};let _t=lt(!1);const Mt=kt=>{const Xt=kt.target.options;return Array.prototype.map.call(Xt,Ft=>({displayValue:Ft.textContent,exportValue:Ft.value}))};return this.enableScripting&&this.hasJSActions?(B.addEventListener("updatefromsandbox",kt=>{const Xt={value(Ft){J==null||J();const Dt=Ft.detail.value,Vt=new Set(Array.isArray(Dt)?Dt:[Dt]);for(const qt of B.options)qt.selected=Vt.has(qt.value);j.setValue(e,{value:lt(!0)}),_t=lt(!1)},multipleSelection(Ft){B.multiple=!0},remove(Ft){const Dt=B.options,Vt=Ft.detail.remove;Dt[Vt].selected=!1,B.remove(Vt),Dt.length>0&&Array.prototype.findIndex.call(Dt,Jt=>Jt.selected)===-1&&(Dt[0].selected=!0),j.setValue(e,{value:lt(!0),items:Mt(Ft)}),_t=lt(!1)},clear(Ft){for(;B.length!==0;)B.remove(0);j.setValue(e,{value:null,items:[]}),_t=lt(!1)},insert(Ft){const{index:Dt,displayValue:Vt,exportValue:qt}=Ft.detail.insert,Jt=B.children[Dt],Zt=document.createElement("option");Zt.textContent=Vt,Zt.value=qt,Jt?Jt.before(Zt):B.append(Zt),j.setValue(e,{value:lt(!0),items:Mt(Ft)}),_t=lt(!1)},items(Ft){const{items:Dt}=Ft.detail;for(;B.length!==0;)B.remove(0);for(const Vt of Dt){const{displayValue:qt,exportValue:Jt}=Vt,Zt=document.createElement("option");Zt.textContent=qt,Zt.value=Jt,B.append(Zt)}B.options.length>0&&(B.options[0].selected=!0),j.setValue(e,{value:lt(!0),items:Mt(Ft)}),_t=lt(!1)},indices(Ft){const Dt=new Set(Ft.detail.indices);for(const Vt of Ft.target.options)Vt.selected=Dt.has(Vt.index);j.setValue(e,{value:lt(!0)}),_t=lt(!1)},editable(Ft){Ft.target.disabled=!Ft.detail.editable}};this._dispatchEventFromSandbox(Xt,kt)}),B.addEventListener("input",kt=>{var Ft;const Xt=lt(!0);j.setValue(e,{value:Xt}),kt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_t,changeEx:Xt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(B,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],kt=>kt.target.value)):B.addEventListener("input",function(kt){j.setValue(e,{value:lt(!0)})}),this.data.combo&&this._setTextStyle(B),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class b extends S{constructor(j){const{data:e,elements:_}=j;super(j,{isRenderable:S._hasPopupData(e)}),this.elements=_}render(){this.container.classList.add("popupAnnotation");const j=new c({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const _ of this.elements)_.popup=j,e.push(_.data.id),_.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(_=>`${a.AnnotationPrefix}${_}`).join(",")),this.container}}class c{constructor({container:j,color:e,elements:_,titleObj:B,modificationDate:z,contentsObj:J,richText:lt,parent:_t,rect:Mt,parentRect:kt,open:Xt}){U(this,Ht);U(this,Wt);U(this,zt);U(this,Yt);U(this,H,null);U(this,st,Y(this,Ht,Nn).bind(this));U(this,Q,Y(this,Yt,cn).bind(this));U(this,ot,Y(this,zt,ln).bind(this));U(this,ht,Y(this,Wt,Me).bind(this));U(this,gt,null);U(this,dt,null);U(this,Pt,null);U(this,It,null);U(this,Et,null);U(this,Lt,null);U(this,bt,!1);U(this,nt,null);U(this,tt,null);U(this,pt,null);U(this,Tt,null);U(this,Ct,!1);var Dt;rt(this,dt,j),rt(this,Tt,B),rt(this,Pt,J),rt(this,pt,lt),rt(this,Et,_t),rt(this,gt,e),rt(this,tt,Mt),rt(this,Lt,kt),rt(this,It,_);const Ft=p.PDFDateString.toDateObject(z);Ft&&rt(this,H,_t.l10n.get("annotation_date_string",{date:Ft.toLocaleDateString(),time:Ft.toLocaleTimeString()})),this.trigger=_.flatMap(Vt=>Vt.getElementsToTriggerPopup());for(const Vt of this.trigger)Vt.addEventListener("click",t(this,ht)),Vt.addEventListener("mouseenter",t(this,ot)),Vt.addEventListener("mouseleave",t(this,Q)),Vt.classList.add("popupTriggerArea");for(const Vt of _)(Dt=Vt.container)==null||Dt.addEventListener("keydown",t(this,st));t(this,dt).hidden=!0,Xt&&Y(this,Wt,Me).call(this)}render(){if(t(this,nt))return;const{page:{view:j},viewport:{rawDims:{pageWidth:e,pageHeight:_,pageX:B,pageY:z}}}=t(this,Et),J=rt(this,nt,document.createElement("div"));if(J.className="popup",t(this,gt)){const se=J.style.outlineColor=a.Util.makeHexColor(...t(this,gt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?J.style.backgroundColor=`color-mix(in srgb, ${se} 30%, white)`:J.style.backgroundColor=a.Util.makeHexColor(...t(this,gt).map(le=>Math.floor(.7*(255-le)+le)))}const lt=document.createElement("span");lt.className="header";const _t=document.createElement("h1");if(lt.append(_t),{dir:_t.dir,str:_t.textContent}=t(this,Tt),J.append(lt),t(this,H)){const se=document.createElement("span");se.classList.add("popupDate"),t(this,H).then(re=>{se.textContent=re}),lt.append(se)}const Mt=t(this,Pt),kt=t(this,pt);if(kt!=null&&kt.str&&(!(Mt!=null&&Mt.str)||Mt.str===kt.str))D.XfaLayer.render({xfaHtml:kt.html,intent:"richText",div:J}),J.lastChild.classList.add("richText","popupContent");else{const se=this._formatContents(Mt);J.append(se)}let Xt=!!t(this,Lt),Ft=Xt?t(this,Lt):t(this,tt);for(const se of t(this,It))if(!Ft||a.Util.intersect(se.data.rect,Ft)!==null){Ft=se.data.rect,Xt=!0;break}const Dt=a.Util.normalizeRect([Ft[0],j[3]-Ft[1]+j[1],Ft[2],j[3]-Ft[3]+j[1]]),qt=Xt?Ft[2]-Ft[0]+5:0,Jt=Dt[0]+qt,Zt=Dt[1],{style:ie}=t(this,dt);ie.left=`${100*(Jt-B)/e}%`,ie.top=`${100*(Zt-z)/_}%`,t(this,dt).append(J)}_formatContents({str:j,dir:e}){const _=document.createElement("p");_.classList.add("popupContent"),_.dir=e;const B=j.split(/(?:\r\n?|\n)/);for(let z=0,J=B.length;z<J;++z){const lt=B[z];_.append(document.createTextNode(lt)),z<J-1&&_.append(document.createElement("br"))}return _}forceHide(){rt(this,Ct,this.isVisible),t(this,Ct)&&(t(this,dt).hidden=!0)}maybeShow(){t(this,Ct)&&(rt(this,Ct,!1),t(this,dt).hidden=!1)}get isVisible(){return t(this,dt).hidden===!1}}H=new WeakMap,st=new WeakMap,Q=new WeakMap,ot=new WeakMap,ht=new WeakMap,gt=new WeakMap,dt=new WeakMap,Pt=new WeakMap,It=new WeakMap,Et=new WeakMap,Lt=new WeakMap,bt=new WeakMap,nt=new WeakMap,tt=new WeakMap,pt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,Ht=new WeakSet,Nn=function(j){j.altKey||j.shiftKey||j.ctrlKey||j.metaKey||(j.key==="Enter"||j.key==="Escape"&&t(this,bt))&&Y(this,Wt,Me).call(this)},Wt=new WeakSet,Me=function(){rt(this,bt,!t(this,bt)),t(this,bt)?(Y(this,zt,ln).call(this),t(this,dt).addEventListener("click",t(this,ht)),t(this,dt).addEventListener("keydown",t(this,st))):(Y(this,Yt,cn).call(this),t(this,dt).removeEventListener("click",t(this,ht)),t(this,dt).removeEventListener("keydown",t(this,st)))},zt=new WeakSet,ln=function(){t(this,nt)||this.render(),this.isVisible?t(this,bt)&&t(this,dt).classList.add("focused"):(t(this,dt).hidden=!1,t(this,dt).style.zIndex=parseInt(t(this,dt).style.zIndex)+1e3)},Yt=new WeakSet,cn=function(){t(this,dt).classList.remove("focused"),!(t(this,bt)||!this.isVisible)&&(t(this,dt).hidden=!0,t(this,dt).style.zIndex=parseInt(t(this,dt).style.zIndex)-1e3)};class k extends S{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0}),this.textContent=j.data.textContent,this.textPosition=j.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const j=document.createElement("div");j.classList.add("annotationTextContent"),j.setAttribute("role","comment");for(const e of this.textContent){const _=document.createElement("span");_.textContent=e,j.append(_)}this.container.append(j)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}i.FreeTextAnnotationElement=k;class g extends S{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});U(this,et,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:_,height:B}=O(e.rect),z=this.svgFactory.create(_,B,!0),J=rt(this,et,this.svgFactory.createElement("svg:line"));return J.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),J.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),J.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),J.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),J.setAttribute("stroke-width",e.borderStyle.width||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),z.append(J),this.container.append(z),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,et)}addHighlightArea(){this.container.classList.add("highlightArea")}}et=new WeakMap;class W extends S{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});U(this,K,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:_,height:B}=O(e.rect),z=this.svgFactory.create(_,B,!0),J=e.borderStyle.width,lt=rt(this,K,this.svgFactory.createElement("svg:rect"));return lt.setAttribute("x",J/2),lt.setAttribute("y",J/2),lt.setAttribute("width",_-J),lt.setAttribute("height",B-J),lt.setAttribute("stroke-width",J||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),z.append(lt),this.container.append(z),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,K)}addHighlightArea(){this.container.classList.add("highlightArea")}}K=new WeakMap;class $ extends S{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});U(this,At,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:_,height:B}=O(e.rect),z=this.svgFactory.create(_,B,!0),J=e.borderStyle.width,lt=rt(this,At,this.svgFactory.createElement("svg:ellipse"));return lt.setAttribute("cx",_/2),lt.setAttribute("cy",B/2),lt.setAttribute("rx",_/2-J/2),lt.setAttribute("ry",B/2-J/2),lt.setAttribute("stroke-width",J||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),z.append(lt),this.container.append(z),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,At)}addHighlightArea(){this.container.classList.add("highlightArea")}}At=new WeakMap;class w extends S{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});U(this,vt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:_,height:B}=O(e.rect),z=this.svgFactory.create(_,B,!0);let J=[];for(const _t of e.vertices){const Mt=_t.x-e.rect[0],kt=e.rect[3]-_t.y;J.push(Mt+","+kt)}J=J.join(" ");const lt=rt(this,vt,this.svgFactory.createElement(this.svgElementName));return lt.setAttribute("points",J),lt.setAttribute("stroke-width",e.borderStyle.width||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),z.append(lt),this.container.append(z),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,vt)}addHighlightArea(){this.container.classList.add("highlightArea")}}vt=new WeakMap;class q extends w{constructor(j){super(j),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class it extends S{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class at extends S{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});U(this,ee,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:_,height:B}=O(e.rect),z=this.svgFactory.create(_,B,!0);for(const J of e.inkLists){let lt=[];for(const Mt of J){const kt=Mt.x-e.rect[0],Xt=e.rect[3]-Mt.y;lt.push(`${kt},${Xt}`)}lt=lt.join(" ");const _t=this.svgFactory.createElement(this.svgElementName);t(this,ee).push(_t),_t.setAttribute("points",lt),_t.setAttribute("stroke-width",e.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),z.append(_t)}return this.container.append(z),this.container}getElementsToTriggerPopup(){return t(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap,i.InkAnnotationElement=at;class V extends S{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ct extends S{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class mt extends S{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class St extends S{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class xt extends S{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}i.StampAnnotationElement=xt;class P extends S{constructor(e){var z;super(e,{isRenderable:!0});U(this,Z);U(this,te,null);const{filename:_,content:B}=this.data.file;this.filename=(0,p.getFilenameFromUrl)(_,!0),this.content=B,(z=this.linkService.eventBus)==null||z.dispatch("fileattachmentannotation",{source:this,filename:_,content:B})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:_}=this;let B;_.hasAppearance||_.fillAlpha===0?B=document.createElement("div"):(B=document.createElement("img"),B.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(_.name)?"paperclip":"pushpin"}.svg`,_.fillAlpha&&_.fillAlpha<1&&(B.style=`filter: opacity(${Math.round(_.fillAlpha*100)}%);`)),B.addEventListener("dblclick",Y(this,Z,hn).bind(this)),rt(this,te,B);const{isMac:z}=a.FeatureTest.platform;return e.addEventListener("keydown",J=>{J.key==="Enter"&&(z?J.metaKey:J.ctrlKey)&&Y(this,Z,hn).call(this)}),!_.popupRef&&this.hasPopupData?this._createPopup():B.classList.add("popupTriggerArea"),e.append(B),e}getElementsToTriggerPopup(){return t(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,Z=new WeakSet,hn=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.container,this.content,this.filename)};class n{constructor({div:j,accessibilityManager:e,annotationCanvasMap:_,l10n:B,page:z,viewport:J}){U(this,Bt);U(this,yt);U(this,Nt,null);U(this,Rt,null);U(this,jt,new Map);this.div=j,rt(this,Nt,e),rt(this,Rt,_),this.l10n=B,this.page=z,this.viewport=J,this.zIndex=0,this.l10n||(this.l10n=ft.NullL10n)}async render(j){const{annotations:e}=j,_=this.div;(0,p.setLayerDimensions)(_,this.viewport);const B=new Map,z={data:null,layer:_,linkService:j.linkService,downloadManager:j.downloadManager,imageResourcesPath:j.imageResourcesPath||"",renderForms:j.renderForms!==!1,svgFactory:new p.DOMSVGFactory,annotationStorage:j.annotationStorage||new X.AnnotationStorage,enableScripting:j.enableScripting===!0,hasJSActions:j.hasJSActions,fieldObjects:j.fieldObjects,parent:this,elements:null};for(const J of e){if(J.noHTML)continue;const lt=J.annotationType===a.AnnotationType.POPUP;if(lt){const kt=B.get(J.id);if(!kt)continue;z.elements=kt}else{const{width:kt,height:Xt}=O(J.rect);if(kt<=0||Xt<=0)continue}z.data=J;const _t=C.create(z);if(!_t.isRenderable)continue;if(!lt&&J.popupRef){const kt=B.get(J.popupRef);kt?kt.push(_t):B.set(J.popupRef,[_t])}_t.annotationEditorType>0&&t(this,jt).set(_t.data.id,_t);const Mt=_t.render();J.hidden&&(Mt.style.visibility="hidden"),Y(this,Bt,jn).call(this,Mt,J.id)}Y(this,yt,dn).call(this),await this.l10n.translate(_)}update({viewport:j}){const e=this.div;this.viewport=j,(0,p.setLayerDimensions)(e,{rotation:j.rotation}),Y(this,yt,dn).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(t(this,jt).values())}getEditableAnnotation(j){return t(this,jt).get(j)}}Nt=new WeakMap,Rt=new WeakMap,jt=new WeakMap,Bt=new WeakSet,jn=function(j,e){var B;const _=j.firstChild||j;_.id=`${a.AnnotationPrefix}${e}`,this.div.append(j),(B=t(this,Nt))==null||B.moveElementInDOM(this.div,j,_,!1)},yt=new WeakSet,dn=function(){if(!t(this,Rt))return;const j=this.div;for(const[e,_]of t(this,Rt)){const B=j.querySelector(`[data-annotation-id="${e}"]`);if(!B)continue;const{firstChild:z}=B;z?z.nodeName==="CANVAS"?z.replaceWith(_):z.before(_):B.append(_)}t(this,Rt).clear()},i.AnnotationLayer=n},(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function N(X){return Math.floor(Math.max(0,Math.min(1,X))*255).toString(16).padStart(2,"0")}function a(X){return Math.max(0,Math.min(255,255*X))}class p{static CMYK_G([G,ft,D,R]){return["G",1-Math.min(1,.3*G+.59*D+.11*ft+R)]}static G_CMYK([G]){return["CMYK",0,0,0,1-G]}static G_RGB([G]){return["RGB",G,G,G]}static G_rgb([G]){return G=a(G),[G,G,G]}static G_HTML([G]){const ft=N(G);return`#${ft}${ft}${ft}`}static RGB_G([G,ft,D]){return["G",.3*G+.59*ft+.11*D]}static RGB_rgb(G){return G.map(a)}static RGB_HTML(G){return`#${G.map(N).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([G,ft,D,R]){return["RGB",1-Math.min(1,G+R),1-Math.min(1,D+R),1-Math.min(1,ft+R)]}static CMYK_rgb([G,ft,D,R]){return[a(1-Math.min(1,G+R)),a(1-Math.min(1,D+R)),a(1-Math.min(1,ft+R))]}static CMYK_HTML(G){const ft=this.CMYK_RGB(G).slice(1);return this.RGB_HTML(ft)}static RGB_CMYK([G,ft,D]){const R=1-G,m=1-ft,I=1-D,O=Math.min(R,m,I);return["CMYK",R,m,I,O]}}i.ColorConverters=p},(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NullL10n=void 0,i.getL10nFallback=a;const N={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};N.print_progress_percent="{{progress}}%";function a(G,ft){switch(G){case"find_match_count":G=`find_match_count[${ft.total===1?"one":"other"}]`;break;case"find_match_count_limit":G=`find_match_count_limit[${ft.limit===1?"one":"other"}]`;break}return N[G]||""}function p(G,ft){return ft?G.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(D,R)=>R in ft?ft[R]:"{{"+R+"}}"):G}const X={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(G,ft=null,D=a(G,ft)){return p(D,ft)},async translate(G){}};i.NullL10n=X},(L,i,N)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0;var a=N(25);class p{static setupStorage(G,ft,D,R,m){const I=R.getValue(ft,{value:null});switch(D.name){case"textarea":if(I.value!==null&&(G.textContent=I.value),m==="print")break;G.addEventListener("input",O=>{R.setValue(ft,{value:O.target.value})});break;case"input":if(D.attributes.type==="radio"||D.attributes.type==="checkbox"){if(I.value===D.attributes.xfaOn?G.setAttribute("checked",!0):I.value===D.attributes.xfaOff&&G.removeAttribute("checked"),m==="print")break;G.addEventListener("change",O=>{R.setValue(ft,{value:O.target.checked?O.target.getAttribute("xfaOn"):O.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&G.setAttribute("value",I.value),m==="print")break;G.addEventListener("input",O=>{R.setValue(ft,{value:O.target.value})})}break;case"select":if(I.value!==null){G.setAttribute("value",I.value);for(const O of D.children)O.attributes.value===I.value?O.attributes.selected=!0:O.attributes.hasOwnProperty("selected")&&delete O.attributes.selected}G.addEventListener("input",O=>{const C=O.target.options,S=C.selectedIndex===-1?"":C[C.selectedIndex].value;R.setValue(ft,{value:S})});break}}static setAttributes({html:G,element:ft,storage:D=null,intent:R,linkService:m}){const{attributes:I}=ft,O=G instanceof HTMLAnchorElement;I.type==="radio"&&(I.name=`${I.name}-${R}`);for(const[C,S]of Object.entries(I))if(S!=null)switch(C){case"class":S.length&&G.setAttribute(C,S.join(" "));break;case"dataId":break;case"id":G.setAttribute("data-element-id",S);break;case"style":Object.assign(G.style,S);break;case"textContent":G.textContent=S;break;default:(!O||C!=="href"&&C!=="newWindow")&&G.setAttribute(C,S)}O&&m.addLinkAttributes(G,I.href,I.newWindow),D&&I.dataId&&this.setupStorage(G,I.dataId,ft,D)}static render(G){var v;const ft=G.annotationStorage,D=G.linkService,R=G.xfaHtml,m=G.intent||"display",I=document.createElement(R.name);R.attributes&&this.setAttributes({html:I,element:R,intent:m,linkService:D});const O=[[R,-1,I]],C=G.div;if(C.append(I),G.viewport){const f=`matrix(${G.viewport.transform.join(",")})`;C.style.transform=f}m!=="richText"&&C.setAttribute("class","xfaLayer xfaFont");const S=[];for(;O.length>0;){const[f,A,T]=O.at(-1);if(A+1===f.children.length){O.pop();continue}const x=f.children[++O.at(-1)[1]];if(x===null)continue;const{name:y}=x;if(y==="#text"){const d=document.createTextNode(x.value);S.push(d),T.append(d);continue}const l=(v=x==null?void 0:x.attributes)!=null&&v.xmlns?document.createElementNS(x.attributes.xmlns,y):document.createElement(y);if(T.append(l),x.attributes&&this.setAttributes({html:l,element:x,storage:ft,intent:m,linkService:D}),x.children&&x.children.length>0)O.push([x,-1,l]);else if(x.value){const d=document.createTextNode(x.value);a.XfaText.shouldBuildText(y)&&S.push(d),l.append(d)}}for(const f of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:S}}static update(G){const ft=`matrix(${G.viewport.transform.join(",")})`;G.div.style.transform=ft,G.div.hidden=!1}}i.XfaLayer=p},(L,i,N)=>{var R,m,I,O,C,S,v,f,A,T,x,y,l,d,F,Bn,c,Un,g,Hn,$,Wn,q,un,at,Gn,ct,fn,St,Vn,P,$n,o,zn,h,Xn,E,qn,H,oe,Q,pn,ht,Fe,dt,De,It,pe,Lt,gn,nt,Le,pt,Yn,Ct,mn,$t,Kn,Gt,Jn,Ut,bn,ut,Ie,K,ge;Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0;var a=N(1),p=N(4),X=N(29),G=N(6),ft=N(5);const vt=class vt extends p.AnnotationEditor{constructor(Z){super({...Z,name:"inkEditor"});U(this,F);U(this,c);U(this,g);U(this,$);U(this,q);U(this,at);U(this,ct);U(this,St);U(this,P);U(this,o);U(this,h);U(this,E);U(this,H);U(this,Q);U(this,ht);U(this,dt);U(this,It);U(this,Lt);U(this,nt);U(this,Gt);U(this,Ut);U(this,ut);U(this,K);U(this,R,0);U(this,m,0);U(this,I,this.canvasPointermove.bind(this));U(this,O,this.canvasPointerleave.bind(this));U(this,C,this.canvasPointerup.bind(this));U(this,S,this.canvasPointerdown.bind(this));U(this,v,new Path2D);U(this,f,!1);U(this,A,!1);U(this,T,!1);U(this,x,null);U(this,y,0);U(this,l,0);U(this,d,null);this.color=Z.color||null,this.thickness=Z.thickness||null,this.opacity=Z.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Z){p.AnnotationEditor.initialize(Z,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Z,wt){switch(Z){case a.AnnotationEditorParamsType.INK_THICKNESS:vt._defaultThickness=wt;break;case a.AnnotationEditorParamsType.INK_COLOR:vt._defaultColor=wt;break;case a.AnnotationEditorParamsType.INK_OPACITY:vt._defaultOpacity=wt/100;break}}updateParams(Z,wt){switch(Z){case a.AnnotationEditorParamsType.INK_THICKNESS:Y(this,F,Bn).call(this,wt);break;case a.AnnotationEditorParamsType.INK_COLOR:Y(this,c,Un).call(this,wt);break;case a.AnnotationEditorParamsType.INK_OPACITY:Y(this,g,Hn).call(this,wt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,vt._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,vt._defaultColor||p.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(vt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||vt._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||vt._defaultColor||p.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??vt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Y(this,ht,Fe).call(this),Y(this,dt,De).call(this)),this.isAttachedToDOM||(this.parent.add(this),Y(this,It,pe).call(this)),Y(this,K,ge).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,x).disconnect(),rt(this,x,null),super.remove())}setParent(Z){!this.parent&&Z?this._uiManager.removeShouldRescale(this):this.parent&&Z===null&&this._uiManager.addShouldRescale(this),super.setParent(Z)}onScaleChanging(){const[Z,wt]=this.parentDimensions,Nt=this.width*Z,Rt=this.height*wt;this.setDimensions(Nt,Rt)}enableEditMode(){t(this,f)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,S)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,S)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,f)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),rt(this,f,!0),this.div.classList.add("disabled"),Y(this,K,ge).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Z){this._focusEventsAllowed&&(super.focusin(Z),this.enableEditMode())}canvasPointerdown(Z){Z.button!==0||!this.isInEditMode()||t(this,f)||(this.setInForeground(),Z.preventDefault(),Z.type!=="mouse"&&this.div.focus(),Y(this,at,Gn).call(this,Z.offsetX,Z.offsetY))}canvasPointermove(Z){Z.preventDefault(),Y(this,ct,fn).call(this,Z.offsetX,Z.offsetY)}canvasPointerup(Z){Z.preventDefault(),Y(this,Q,pn).call(this,Z)}canvasPointerleave(Z){Y(this,Q,pn).call(this,Z)}get isResizable(){return!this.isEmpty()&&t(this,f)}render(){if(this.div)return this.div;let Z,wt;this.width&&(Z=this.x,wt=this.y),super.render(),p.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Qt=>{var yt;return(yt=this.div)==null?void 0:yt.setAttribute("aria-label",Qt)});const[Nt,Rt,jt,Bt]=Y(this,$,Wn).call(this);if(this.setAt(Nt,Rt,0,0),this.setDims(jt,Bt),Y(this,ht,Fe).call(this),this.width){const[Qt,yt]=this.parentDimensions;this.setAspectRatio(this.width*Qt,this.height*yt),this.setAt(Z*Qt,wt*yt,this.width*Qt,this.height*yt),rt(this,T,!0),Y(this,It,pe).call(this),this.setDims(this.width*Qt,this.height*yt),Y(this,H,oe).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Y(this,dt,De).call(this),this.div}setDimensions(Z,wt){const Nt=Math.round(Z),Rt=Math.round(wt);if(t(this,y)===Nt&&t(this,l)===Rt)return;rt(this,y,Nt),rt(this,l,Rt),this.canvas.style.visibility="hidden";const[jt,Bt]=this.parentDimensions;this.width=Z/jt,this.height=wt/Bt,this.fixAndSetPosition(),t(this,f)&&Y(this,Lt,gn).call(this,Z,wt),Y(this,It,pe).call(this),Y(this,H,oe).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Z,wt,Nt){var z,J,lt;if(Z instanceof X.InkAnnotationElement)return null;const Rt=super.deserialize(Z,wt,Nt);Rt.thickness=Z.thickness,Rt.color=a.Util.makeHexColor(...Z.color),Rt.opacity=Z.opacity;const[jt,Bt]=Rt.pageDimensions,Qt=Rt.width*jt,yt=Rt.height*Bt,Kt=Rt.parentScale,Ot=Z.thickness/2;rt(Rt,f,!0),rt(Rt,y,Math.round(Qt)),rt(Rt,l,Math.round(yt));const{paths:j,rect:e,rotation:_}=Z;for(let{bezier:_t}of j){_t=Y(z=vt,$t,Kn).call(z,_t,e,_);const Mt=[];Rt.paths.push(Mt);let kt=Kt*(_t[0]-Ot),Xt=Kt*(_t[1]-Ot);for(let Dt=2,Vt=_t.length;Dt<Vt;Dt+=6){const qt=Kt*(_t[Dt]-Ot),Jt=Kt*(_t[Dt+1]-Ot),Zt=Kt*(_t[Dt+2]-Ot),ie=Kt*(_t[Dt+3]-Ot),se=Kt*(_t[Dt+4]-Ot),re=Kt*(_t[Dt+5]-Ot);Mt.push([[kt,Xt],[qt,Jt],[Zt,ie],[se,re]]),kt=se,Xt=re}const Ft=Y(this,pt,Yn).call(this,Mt);Rt.bezierPath2D.push(Ft)}const B=Y(J=Rt,Ut,bn).call(J);return rt(Rt,m,Math.max(p.AnnotationEditor.MIN_SIZE,B[2]-B[0])),rt(Rt,R,Math.max(p.AnnotationEditor.MIN_SIZE,B[3]-B[1])),Y(lt=Rt,Lt,gn).call(lt,Qt,yt),Rt}serialize(){if(this.isEmpty())return null;const Z=this.getRect(0,0),wt=p.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:wt,thickness:this.thickness,opacity:this.opacity,paths:Y(this,Gt,Jn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Z),pageIndex:this.pageIndex,rect:Z,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};R=new WeakMap,m=new WeakMap,I=new WeakMap,O=new WeakMap,C=new WeakMap,S=new WeakMap,v=new WeakMap,f=new WeakMap,A=new WeakMap,T=new WeakMap,x=new WeakMap,y=new WeakMap,l=new WeakMap,d=new WeakMap,F=new WeakSet,Bn=function(Z){const wt=this.thickness;this.addCommands({cmd:()=>{this.thickness=Z,Y(this,K,ge).call(this)},undo:()=>{this.thickness=wt,Y(this,K,ge).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},c=new WeakSet,Un=function(Z){const wt=this.color;this.addCommands({cmd:()=>{this.color=Z,Y(this,H,oe).call(this)},undo:()=>{this.color=wt,Y(this,H,oe).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,Hn=function(Z){Z/=100;const wt=this.opacity;this.addCommands({cmd:()=>{this.opacity=Z,Y(this,H,oe).call(this)},undo:()=>{this.opacity=wt,Y(this,H,oe).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$=new WeakSet,Wn=function(){const{parentRotation:Z,parentDimensions:[wt,Nt]}=this;switch(Z){case 90:return[0,Nt,Nt,wt];case 180:return[wt,Nt,wt,Nt];case 270:return[wt,0,Nt,wt];default:return[0,0,wt,Nt]}},q=new WeakSet,un=function(){const{ctx:Z,color:wt,opacity:Nt,thickness:Rt,parentScale:jt,scaleFactor:Bt}=this;Z.lineWidth=Rt*jt/Bt,Z.lineCap="round",Z.lineJoin="round",Z.miterLimit=10,Z.strokeStyle=`${wt}${(0,ft.opacityToHex)(Nt)}`},at=new WeakSet,Gn=function(Z,wt){this.canvas.addEventListener("contextmenu",G.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,O)),this.canvas.addEventListener("pointermove",t(this,I)),this.canvas.addEventListener("pointerup",t(this,C)),this.canvas.removeEventListener("pointerdown",t(this,S)),this.isEditing=!0,t(this,T)||(rt(this,T,!0),Y(this,It,pe).call(this),this.thickness||(this.thickness=vt._defaultThickness),this.color||(this.color=vt._defaultColor||p.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=vt._defaultOpacity)),this.currentPath.push([Z,wt]),rt(this,A,!1),Y(this,q,un).call(this),rt(this,d,()=>{Y(this,o,zn).call(this),t(this,d)&&window.requestAnimationFrame(t(this,d))}),window.requestAnimationFrame(t(this,d))},ct=new WeakSet,fn=function(Z,wt){const[Nt,Rt]=this.currentPath.at(-1);if(this.currentPath.length>1&&Z===Nt&&wt===Rt)return;const jt=this.currentPath;let Bt=t(this,v);if(jt.push([Z,wt]),rt(this,A,!0),jt.length<=2){Bt.moveTo(...jt[0]),Bt.lineTo(Z,wt);return}jt.length===3&&(rt(this,v,Bt=new Path2D),Bt.moveTo(...jt[0])),Y(this,h,Xn).call(this,Bt,...jt.at(-3),...jt.at(-2),Z,wt)},St=new WeakSet,Vn=function(){if(this.currentPath.length===0)return;const Z=this.currentPath.at(-1);t(this,v).lineTo(...Z)},P=new WeakSet,$n=function(Z,wt){rt(this,d,null),Z=Math.min(Math.max(Z,0),this.canvas.width),wt=Math.min(Math.max(wt,0),this.canvas.height),Y(this,ct,fn).call(this,Z,wt),Y(this,St,Vn).call(this);let Nt;if(this.currentPath.length!==1)Nt=Y(this,E,qn).call(this);else{const yt=[Z,wt];Nt=[[yt,yt.slice(),yt.slice(),yt]]}const Rt=t(this,v),jt=this.currentPath;this.currentPath=[],rt(this,v,new Path2D);const Bt=()=>{this.allRawPaths.push(jt),this.paths.push(Nt),this.bezierPath2D.push(Rt),this.rebuild()},Qt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Y(this,ht,Fe).call(this),Y(this,dt,De).call(this)),Y(this,K,ge).call(this))};this.addCommands({cmd:Bt,undo:Qt,mustExec:!0})},o=new WeakSet,zn=function(){if(!t(this,A))return;rt(this,A,!1);const Z=Math.ceil(this.thickness*this.parentScale),wt=this.currentPath.slice(-3),Nt=wt.map(Bt=>Bt[0]),Rt=wt.map(Bt=>Bt[1]);Math.min(...Nt)-Z,Math.max(...Nt)+Z,Math.min(...Rt)-Z,Math.max(...Rt)+Z;const{ctx:jt}=this;jt.save(),jt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Bt of this.bezierPath2D)jt.stroke(Bt);jt.stroke(t(this,v)),jt.restore()},h=new WeakSet,Xn=function(Z,wt,Nt,Rt,jt,Bt,Qt){const yt=(wt+Rt)/2,Kt=(Nt+jt)/2,Ot=(Rt+Bt)/2,j=(jt+Qt)/2;Z.bezierCurveTo(yt+2*(Rt-yt)/3,Kt+2*(jt-Kt)/3,Ot+2*(Rt-Ot)/3,j+2*(jt-j)/3,Ot,j)},E=new WeakSet,qn=function(){const Z=this.currentPath;if(Z.length<=2)return[[Z[0],Z[0],Z.at(-1),Z.at(-1)]];const wt=[];let Nt,[Rt,jt]=Z[0];for(Nt=1;Nt<Z.length-2;Nt++){const[e,_]=Z[Nt],[B,z]=Z[Nt+1],J=(e+B)/2,lt=(_+z)/2,_t=[Rt+2*(e-Rt)/3,jt+2*(_-jt)/3],Mt=[J+2*(e-J)/3,lt+2*(_-lt)/3];wt.push([[Rt,jt],_t,Mt,[J,lt]]),[Rt,jt]=[J,lt]}const[Bt,Qt]=Z[Nt],[yt,Kt]=Z[Nt+1],Ot=[Rt+2*(Bt-Rt)/3,jt+2*(Qt-jt)/3],j=[yt+2*(Bt-yt)/3,Kt+2*(Qt-Kt)/3];return wt.push([[Rt,jt],Ot,j,[yt,Kt]]),wt},H=new WeakSet,oe=function(){if(this.isEmpty()){Y(this,nt,Le).call(this);return}Y(this,q,un).call(this);const{canvas:Z,ctx:wt}=this;wt.setTransform(1,0,0,1,0,0),wt.clearRect(0,0,Z.width,Z.height),Y(this,nt,Le).call(this);for(const Nt of this.bezierPath2D)wt.stroke(Nt)},Q=new WeakSet,pn=function(Z){this.canvas.removeEventListener("pointerleave",t(this,O)),this.canvas.removeEventListener("pointermove",t(this,I)),this.canvas.removeEventListener("pointerup",t(this,C)),this.canvas.addEventListener("pointerdown",t(this,S)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",G.noContextMenu)},10),Y(this,P,$n).call(this,Z.offsetX,Z.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ht=new WeakSet,Fe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",p.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Z=>{var wt;return(wt=this.canvas)==null?void 0:wt.setAttribute("aria-label",Z)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},dt=new WeakSet,De=function(){rt(this,x,new ResizeObserver(Z=>{const wt=Z[0].contentRect;wt.width&&wt.height&&this.setDimensions(wt.width,wt.height)})),t(this,x).observe(this.div)},It=new WeakSet,pe=function(){if(!t(this,T))return;const[Z,wt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Z),this.canvas.height=Math.ceil(this.height*wt),Y(this,nt,Le).call(this)},Lt=new WeakSet,gn=function(Z,wt){const Nt=Y(this,ut,Ie).call(this),Rt=(Z-Nt)/t(this,m),jt=(wt-Nt)/t(this,R);this.scaleFactor=Math.min(Rt,jt)},nt=new WeakSet,Le=function(){const Z=Y(this,ut,Ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Z,this.translationY*this.scaleFactor+Z)},pt=new WeakSet,Yn=function(Z){const wt=new Path2D;for(let Nt=0,Rt=Z.length;Nt<Rt;Nt++){const[jt,Bt,Qt,yt]=Z[Nt];Nt===0&&wt.moveTo(...jt),wt.bezierCurveTo(Bt[0],Bt[1],Qt[0],Qt[1],yt[0],yt[1])}return wt},Ct=new WeakSet,mn=function(Z,wt,Nt){const[Rt,jt,Bt,Qt]=wt;switch(Nt){case 0:for(let yt=0,Kt=Z.length;yt<Kt;yt+=2)Z[yt]+=Rt,Z[yt+1]=Qt-Z[yt+1];break;case 90:for(let yt=0,Kt=Z.length;yt<Kt;yt+=2){const Ot=Z[yt];Z[yt]=Z[yt+1]+Rt,Z[yt+1]=Ot+jt}break;case 180:for(let yt=0,Kt=Z.length;yt<Kt;yt+=2)Z[yt]=Bt-Z[yt],Z[yt+1]+=jt;break;case 270:for(let yt=0,Kt=Z.length;yt<Kt;yt+=2){const Ot=Z[yt];Z[yt]=Bt-Z[yt+1],Z[yt+1]=Qt-Ot}break;default:throw new Error("Invalid rotation")}return Z},$t=new WeakSet,Kn=function(Z,wt,Nt){const[Rt,jt,Bt,Qt]=wt;switch(Nt){case 0:for(let yt=0,Kt=Z.length;yt<Kt;yt+=2)Z[yt]-=Rt,Z[yt+1]=Qt-Z[yt+1];break;case 90:for(let yt=0,Kt=Z.length;yt<Kt;yt+=2){const Ot=Z[yt];Z[yt]=Z[yt+1]-jt,Z[yt+1]=Ot-Rt}break;case 180:for(let yt=0,Kt=Z.length;yt<Kt;yt+=2)Z[yt]=Bt-Z[yt],Z[yt+1]-=jt;break;case 270:for(let yt=0,Kt=Z.length;yt<Kt;yt+=2){const Ot=Z[yt];Z[yt]=Qt-Z[yt+1],Z[yt+1]=Bt-Ot}break;default:throw new Error("Invalid rotation")}return Z},Gt=new WeakSet,Jn=function(Z,wt,Nt,Rt){var Kt,Ot;const jt=[],Bt=this.thickness/2,Qt=Z*wt+Bt,yt=Z*Nt+Bt;for(const j of this.paths){const e=[],_=[];for(let B=0,z=j.length;B<z;B++){const[J,lt,_t,Mt]=j[B],kt=Z*J[0]+Qt,Xt=Z*J[1]+yt,Ft=Z*lt[0]+Qt,Dt=Z*lt[1]+yt,Vt=Z*_t[0]+Qt,qt=Z*_t[1]+yt,Jt=Z*Mt[0]+Qt,Zt=Z*Mt[1]+yt;B===0&&(e.push(kt,Xt),_.push(kt,Xt)),e.push(Ft,Dt,Vt,qt,Jt,Zt),_.push(Ft,Dt),B===z-1&&_.push(Jt,Zt)}jt.push({bezier:Y(Kt=vt,Ct,mn).call(Kt,e,Rt,this.rotation),points:Y(Ot=vt,Ct,mn).call(Ot,_,Rt,this.rotation)})}return jt},Ut=new WeakSet,bn=function(){let Z=1/0,wt=-1/0,Nt=1/0,Rt=-1/0;for(const jt of this.paths)for(const[Bt,Qt,yt,Kt]of jt){const Ot=a.Util.bezierBoundingBox(...Bt,...Qt,...yt,...Kt);Z=Math.min(Z,Ot[0]),Nt=Math.min(Nt,Ot[1]),wt=Math.max(wt,Ot[2]),Rt=Math.max(Rt,Ot[3])}return[Z,Nt,wt,Rt]},ut=new WeakSet,Ie=function(){return t(this,f)?Math.ceil(this.thickness*this.parentScale):0},K=new WeakSet,ge=function(Z=!1){if(this.isEmpty())return;if(!t(this,f)){Y(this,H,oe).call(this);return}const wt=Y(this,Ut,bn).call(this),Nt=Y(this,ut,Ie).call(this);rt(this,m,Math.max(p.AnnotationEditor.MIN_SIZE,wt[2]-wt[0])),rt(this,R,Math.max(p.AnnotationEditor.MIN_SIZE,wt[3]-wt[1]));const Rt=Math.ceil(Nt+t(this,m)*this.scaleFactor),jt=Math.ceil(Nt+t(this,R)*this.scaleFactor),[Bt,Qt]=this.parentDimensions;this.width=Rt/Bt,this.height=jt/Qt,this.setAspectRatio(Rt,jt);const yt=this.translationX,Kt=this.translationY;this.translationX=-wt[0],this.translationY=-wt[1],Y(this,It,pe).call(this),Y(this,H,oe).call(this),rt(this,y,Rt),rt(this,l,jt),this.setDims(Rt,jt);const Ot=Z?Nt/this.scaleFactor/2:0;this.translate(yt-this.translationX-Ot,Kt-this.translationY-Ot)},U(vt,pt),U(vt,Ct),U(vt,$t),ne(vt,"_defaultColor",null),ne(vt,"_defaultOpacity",1),ne(vt,"_defaultThickness",1),ne(vt,"_type","ink");let D=vt;i.InkEditor=D},(L,i,N)=>{var D,R,m,I,O,C,S,v,f,A,T,Ee,y,Se,d,Oe,b,_n,k,Qn,W,Zn,w,An,it,Ne,V,ts;Object.defineProperty(i,"__esModule",{value:!0}),i.StampEditor=void 0;var a=N(1),p=N(4),X=N(6),G=N(29);const mt=class mt extends p.AnnotationEditor{constructor(P){super({...P,name:"stampEditor"});U(this,T);U(this,y);U(this,d);U(this,b);U(this,k);U(this,W);U(this,w);U(this,it);U(this,V);U(this,D,null);U(this,R,null);U(this,m,null);U(this,I,null);U(this,O,null);U(this,C,null);U(this,S,null);U(this,v,null);U(this,f,!1);U(this,A,!1);rt(this,I,P.bitmapUrl),rt(this,O,P.bitmapFile)}static initialize(P){p.AnnotationEditor.initialize(P)}static get supportedTypes(){const P=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",P.map(n=>`image/${n}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(P){return this.supportedTypes.includes(P)}static paste(P,n){n.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:P.getAsFile()})}remove(){var P,n;t(this,R)&&(rt(this,D,null),this._uiManager.imageManager.deleteId(t(this,R)),(P=t(this,C))==null||P.remove(),rt(this,C,null),(n=t(this,S))==null||n.disconnect(),rt(this,S,null)),super.remove()}rebuild(){if(!this.parent){t(this,R)&&Y(this,d,Oe).call(this);return}super.rebuild(),this.div!==null&&(t(this,R)&&Y(this,d,Oe).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,m)||t(this,D)||t(this,I)||t(this,O))}get isResizable(){return!0}render(){if(this.div)return this.div;let P,n;if(this.width&&(P=this.x,n=this.y),super.render(),this.div.hidden=!0,t(this,D)?Y(this,b,_n).call(this):Y(this,d,Oe).call(this),this.width){const[o,s]=this.parentDimensions;this.setAt(P*o,n*s,this.width*o,this.height*s)}return this.div}static deserialize(P,n,o){if(P instanceof G.StampAnnotationElement)return null;const s=super.deserialize(P,n,o),{rect:h,bitmapUrl:u,bitmapId:E,isSvg:M,accessibilityData:H}=P;E&&o.imageManager.isValidId(E)?rt(s,R,E):rt(s,I,u),rt(s,f,M);const[st,Q]=s.pageDimensions;return s.width=(h[2]-h[0])/st,s.height=(h[3]-h[1])/Q,H&&(s.altTextData=H),s}serialize(P=!1,n=null){if(this.isEmpty())return null;const o={annotationType:a.AnnotationEditorType.STAMP,bitmapId:t(this,R),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,f),structTreeParentId:this._structTreeParentId};if(P)return o.bitmapUrl=Y(this,it,Ne).call(this,!0),o.accessibilityData=this.altTextData,o;const{decorative:s,altText:h}=this.altTextData;if(!s&&h&&(o.accessibilityData={type:"Figure",alt:h}),n===null)return o;n.stamps||(n.stamps=new Map);const u=t(this,f)?(o.rect[2]-o.rect[0])*(o.rect[3]-o.rect[1]):null;if(!n.stamps.has(t(this,R)))n.stamps.set(t(this,R),{area:u,serialized:o}),o.bitmap=Y(this,it,Ne).call(this,!1);else if(t(this,f)){const E=n.stamps.get(t(this,R));u>E.area&&(E.area=u,E.serialized.bitmap.close(),E.serialized.bitmap=Y(this,it,Ne).call(this,!1))}return o}};D=new WeakMap,R=new WeakMap,m=new WeakMap,I=new WeakMap,O=new WeakMap,C=new WeakMap,S=new WeakMap,v=new WeakMap,f=new WeakMap,A=new WeakMap,T=new WeakSet,Ee=function(P,n=!1){if(!P){this.remove();return}rt(this,D,P.bitmap),n||(rt(this,R,P.id),rt(this,f,P.isSvg)),Y(this,b,_n).call(this)},y=new WeakSet,Se=function(){rt(this,m,null),this._uiManager.enableWaiting(!1),t(this,C)&&this.div.focus()},d=new WeakSet,Oe=function(){if(t(this,R)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,R)).then(n=>Y(this,T,Ee).call(this,n,!0)).finally(()=>Y(this,y,Se).call(this));return}if(t(this,I)){const n=t(this,I);rt(this,I,null),this._uiManager.enableWaiting(!0),rt(this,m,this._uiManager.imageManager.getFromUrl(n).then(o=>Y(this,T,Ee).call(this,o)).finally(()=>Y(this,y,Se).call(this)));return}if(t(this,O)){const n=t(this,O);rt(this,O,null),this._uiManager.enableWaiting(!0),rt(this,m,this._uiManager.imageManager.getFromFile(n).then(o=>Y(this,T,Ee).call(this,o)).finally(()=>Y(this,y,Se).call(this)));return}const P=document.createElement("input");P.type="file",P.accept=mt.supportedTypesStr,rt(this,m,new Promise(n=>{P.addEventListener("change",async()=>{if(!P.files||P.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(P.files[0]);Y(this,T,Ee).call(this,o)}n()}),P.addEventListener("cancel",()=>{this.remove(),n()})}).finally(()=>Y(this,y,Se).call(this))),P.click()},b=new WeakSet,_n=function(){const{div:P}=this;let{width:n,height:o}=t(this,D);const[s,h]=this.pageDimensions,u=.75;if(this.width)n=this.width*s,o=this.height*h;else if(n>u*s||o>u*h){const st=Math.min(u*s/n,u*h/o);n*=st,o*=st}const[E,M]=this.parentDimensions;this.setDims(n*E/s,o*M/h),this._uiManager.enableWaiting(!1);const H=rt(this,C,document.createElement("canvas"));P.append(H),P.hidden=!1,Y(this,w,An).call(this,n,o),Y(this,V,ts).call(this),t(this,A)||(this.parent.addUndoableEditor(this),rt(this,A,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},k=new WeakSet,Qn=function(P,n){var u;const[o,s]=this.parentDimensions;this.width=P/o,this.height=n/s,this.setDims(P,n),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,v)!==null&&clearTimeout(t(this,v)),rt(this,v,setTimeout(()=>{rt(this,v,null),Y(this,w,An).call(this,P,n)},200))},W=new WeakSet,Zn=function(P,n){const{width:o,height:s}=t(this,D);let h=o,u=s,E=t(this,D);for(;h>2*P||u>2*n;){const M=h,H=u;h>2*P&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const st=new OffscreenCanvas(h,u);st.getContext("2d").drawImage(E,0,0,M,H,0,0,h,u),E=st.transferToImageBitmap()}return E},w=new WeakSet,An=function(P,n){P=Math.ceil(P),n=Math.ceil(n);const o=t(this,C);if(!o||o.width===P&&o.height===n)return;o.width=P,o.height=n;const s=t(this,f)?t(this,D):Y(this,W,Zn).call(this,P,n),h=o.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(s,0,0,s.width,s.height,0,0,P,n)},it=new WeakSet,Ne=function(P){if(P){if(t(this,f)){const s=this._uiManager.imageManager.getSvgUrl(t(this,R));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=t(this,D),n.getContext("2d").drawImage(t(this,D),0,0),n.toDataURL()}if(t(this,f)){const[n,o]=this.pageDimensions,s=Math.round(this.width*n*X.PixelsPerInch.PDF_TO_CSS_UNITS),h=Math.round(this.height*o*X.PixelsPerInch.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(s,h);return u.getContext("2d").drawImage(t(this,D),0,0,t(this,D).width,t(this,D).height,0,0,s,h),u.transferToImageBitmap()}return structuredClone(t(this,D))},V=new WeakSet,ts=function(){rt(this,S,new ResizeObserver(P=>{const n=P[0].contentRect;n.width&&n.height&&Y(this,k,Qn).call(this,n.width,n.height)})),t(this,S).observe(this.div)},ne(mt,"_type","stamp");let ft=mt;i.StampEditor=ft}],__webpack_module_cache__={};function __w_pdfjs_require__(L){var i=__webpack_module_cache__[L];if(i!==void 0)return i.exports;var N=__webpack_module_cache__[L]={exports:{}};return __webpack_modules__[L](N,N.exports,__w_pdfjs_require__),N.exports}var __webpack_exports__={};return(()=>{var L=__webpack_exports__;Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"AbortException",{enumerable:!0,get:function(){return i.AbortException}}),Object.defineProperty(L,"AnnotationEditorLayer",{enumerable:!0,get:function(){return X.AnnotationEditorLayer}}),Object.defineProperty(L,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(L,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(L,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return G.AnnotationEditorUIManager}}),Object.defineProperty(L,"AnnotationLayer",{enumerable:!0,get:function(){return ft.AnnotationLayer}}),Object.defineProperty(L,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(L,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(L,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(L,"FeatureTest",{enumerable:!0,get:function(){return i.FeatureTest}}),Object.defineProperty(L,"GlobalWorkerOptions",{enumerable:!0,get:function(){return D.GlobalWorkerOptions}}),Object.defineProperty(L,"ImageKind",{enumerable:!0,get:function(){return i.ImageKind}}),Object.defineProperty(L,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(L,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(L,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(L,"PDFDataRangeTransport",{enumerable:!0,get:function(){return N.PDFDataRangeTransport}}),Object.defineProperty(L,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(L,"PDFWorker",{enumerable:!0,get:function(){return N.PDFWorker}}),Object.defineProperty(L,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(L,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(L,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(L,"PromiseCapability",{enumerable:!0,get:function(){return i.PromiseCapability}}),Object.defineProperty(L,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(L,"SVGGraphics",{enumerable:!0,get:function(){return N.SVGGraphics}}),Object.defineProperty(L,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(L,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(L,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(L,"XfaLayer",{enumerable:!0,get:function(){return R.XfaLayer}}),Object.defineProperty(L,"build",{enumerable:!0,get:function(){return N.build}}),Object.defineProperty(L,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(L,"getDocument",{enumerable:!0,get:function(){return N.getDocument}}),Object.defineProperty(L,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(L,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(L,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(L,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(L,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(L,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(L,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(L,"normalizeUnicode",{enumerable:!0,get:function(){return i.normalizeUnicode}}),Object.defineProperty(L,"renderTextLayer",{enumerable:!0,get:function(){return p.renderTextLayer}}),Object.defineProperty(L,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(L,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(L,"updateTextLayer",{enumerable:!0,get:function(){return p.updateTextLayer}}),Object.defineProperty(L,"version",{enumerable:!0,get:function(){return N.version}});var i=__w_pdfjs_require__(1),N=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),p=__w_pdfjs_require__(26),X=__w_pdfjs_require__(27),G=__w_pdfjs_require__(5),ft=__w_pdfjs_require__(29),D=__w_pdfjs_require__(14),R=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var __spreadArray=function(L,i,N){if(N||arguments.length===2)for(var a=0,p=i.length,X;a<p;a++)(X||!(a in i))&&(X||(X=Array.prototype.slice.call(i,0,a)),X[a]=i[a]);return L.concat(X||Array.prototype.slice.call(i))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(L,i){var N={};return allEvents.forEach(function(a){var p=L[a];p&&(i?N[a]=function(X){return p(X,i(a))}:N[a]=p)}),N}function makeCancellablePromise(L){var i=!1,N=new Promise(function(a,p){L.then(function(X){return!i&&a(X)}).catch(function(X){return!i&&p(X)})});return{promise:N,cancel:function(){i=!0}}}function r(L){var i,N,a="";if(typeof L=="string"||typeof L=="number")a+=L;else if(typeof L=="object")if(Array.isArray(L)){var p=L.length;for(i=0;i<p;i++)L[i]&&(N=r(L[i]))&&(a&&(a+=" "),a+=N)}else for(N in L)L[N]&&(a&&(a+=" "),a+=N);return a}function clsx(){for(var L,i,N=0,a="",p=arguments.length;N<p;N++)(L=arguments[N])&&(i=r(L))&&(a&&(a+=" "),a+=i);return a}var prefix="Invariant failed";function invariant(L,i){if(!L)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(L,i,N){for(N of L.keys())if(dequal(N,i))return N}function dequal(L,i){var N,a,p;if(L===i)return!0;if(L&&i&&(N=L.constructor)===i.constructor){if(N===Date)return L.getTime()===i.getTime();if(N===RegExp)return L.toString()===i.toString();if(N===Array){if((a=L.length)===i.length)for(;a--&&dequal(L[a],i[a]););return a===-1}if(N===Set){if(L.size!==i.size)return!1;for(a of L)if(p=a,p&&typeof p=="object"&&(p=find(i,p),!p)||!i.has(p))return!1;return!0}if(N===Map){if(L.size!==i.size)return!1;for(a of L)if(p=a[0],p&&typeof p=="object"&&(p=find(i,p),!p)||!dequal(a[1],i.get(p)))return!1;return!0}if(N===ArrayBuffer)L=new Uint8Array(L),i=new Uint8Array(i);else if(N===DataView){if((a=L.byteLength)===i.byteLength)for(;a--&&L.getInt8(a)===i.getInt8(a););return a===-1}if(ArrayBuffer.isView(L)){if((a=L.byteLength)===i.byteLength)for(;a--&&L[a]===i[a];);return a===-1}if(!N||typeof L=="object"){a=0;for(N in L)if(has.call(L,N)&&++a&&!has.call(i,N)||!(N in i)||!dequal(L[N],i[N]))return!1;return Object.keys(i).length===a}}return L!==L&&i!==i}const DocumentContext=reactExports.createContext(null);function Message({children:L,type:i}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${i}`,children:L})}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(i){this.pdfDocument=i}setViewer(i){this.pdfViewer=i}setExternalLinkRel(i){this.externalLinkRel=i}setExternalLinkTarget(i){this.externalLinkTarget=i}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(i){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=i}get rotation(){return 0}set rotation(i){}goToDestination(i){return new Promise(N=>{invariant(this.pdfDocument),invariant(i),typeof i=="string"?this.pdfDocument.getDestination(i).then(N):Array.isArray(i)?N(i):i.then(N)}).then(N=>{invariant(Array.isArray(N));const a=N[0];new Promise(p=>{invariant(this.pdfDocument),a instanceof Object?this.pdfDocument.getPageIndex(a).then(X=>{p(X)}).catch(()=>{invariant(!1)}):typeof a=="number"?p(a):invariant(!1)}).then(p=>{const X=p+1;invariant(this.pdfViewer),invariant(X>=1&&X<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:N,pageIndex:p,pageNumber:X})})})}navigateTo(i){this.goToDestination(i)}goToPage(i){const N=i-1;invariant(this.pdfViewer),invariant(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:N,pageNumber:i})}addLinkAttributes(i,N,a){i.href=N,i.rel=this.externalLinkRel||DEFAULT_LINK_REL,i.target=a?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(L){return typeof L<"u"}function isProvided(L){return isDefined(L)&&L!==null}function isString(L){return typeof L=="string"}function isArrayBuffer(L){return L instanceof ArrayBuffer}function isBlob(L){return invariant(isBrowser),L instanceof Blob}function isDataURI(L){return isString(L)&&/^data:/.test(L)}function dataURItoByteString(L){invariant(isDataURI(L));const[i="",N=""]=L.split(",");return i.split(";").indexOf("base64")!==-1?atob(N):unescape(N)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(L){L&&L.cancel&&L.cancel()}function makePageCallback(L,i){return Object.defineProperty(L,"width",{get(){return this.view[2]*i},configurable:!0}),Object.defineProperty(L,"height",{get(){return this.view[3]*i},configurable:!0}),Object.defineProperty(L,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(L,"originalHeight",{get(){return this.view[3]},configurable:!0}),L}function isCancelException(L){return L.name==="RenderingCancelledException"}function loadFromFile(L){return new Promise((i,N)=>{const a=new FileReader;a.onload=()=>{if(!a.result)return N(new Error("Error while reading a file."));i(a.result)},a.onerror=p=>{if(!p.target)return N(new Error("Error while reading a file."));const{error:X}=p.target;if(!X)return N(new Error("Error while reading a file."));switch(X.code){case X.NOT_FOUND_ERR:return N(new Error("Error while reading a file: File not found."));case X.SECURITY_ERR:return N(new Error("Error while reading a file: Security error."));case X.ABORT_ERR:return N(new Error("Error while reading a file: Aborted."));default:return N(new Error("Error while reading a file."))}},a.readAsArrayBuffer(L)})}function reducer(L,i){switch(i.type){case"RESOLVE":return{value:i.value,error:void 0};case"REJECT":return{value:!1,error:i.error};case"RESET":return{value:void 0,error:void 0};default:return L}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}var __awaiter=function(L,i,N,a){function p(X){return X instanceof N?X:new N(function(G){G(X)})}return new(N||(N=Promise))(function(X,G){function ft(m){try{R(a.next(m))}catch(I){G(I)}}function D(m){try{R(a.throw(m))}catch(I){G(I)}}function R(m){m.done?X(m.value):p(m.value).then(ft,D)}R((a=a.apply(L,i||[])).next())})},__rest$1=function(L,i){var N={};for(var a in L)Object.prototype.hasOwnProperty.call(L,a)&&i.indexOf(a)<0&&(N[a]=L[a]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,a=Object.getOwnPropertySymbols(L);p<a.length;p++)i.indexOf(a[p])<0&&Object.prototype.propertyIsEnumerable.call(L,a[p])&&(N[a[p]]=L[a[p]]);return N};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(L,i)=>{switch(i){case PasswordResponses.NEED_PASSWORD:{const N=prompt("Enter the password to open this PDF file.");L(N);break}case PasswordResponses.INCORRECT_PASSWORD:{const N=prompt("Invalid password. Please try again.");L(N);break}}};function isParameterObject(L){return typeof L=="object"&&L!==null&&("data"in L||"range"in L||"url"in L)}const Document=reactExports.forwardRef(function L(i,N){var{children:a,className:p,error:X="Failed to load PDF file.",externalLinkRel:G,externalLinkTarget:ft,file:D,inputRef:R,imageResourcesPath:m,loading:I="Loading PDF…",noData:O="No PDF file specified.",onItemClick:C,onLoadError:S,onLoadProgress:v,onLoadSuccess:f,onPassword:A=defaultOnPassword,onSourceError:T,onSourceSuccess:x,options:y,renderMode:l,rotate:d}=i,F=__rest$1(i,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[b,c]=useResolver(),{value:k,error:g}=b,[W,$]=useResolver(),{value:w,error:q}=W,it=reactExports.useRef(new LinkService),at=reactExports.useRef([]),V=reactExports.useRef(void 0),ct=reactExports.useRef(void 0);D&&D!==V.current&&isParameterObject(D)&&(warning$1(!dequal(D,V.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),V.current=D),y&&y!==ct.current&&(warning$1(!dequal(y,ct.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ct.current=y);const mt=reactExports.useRef({scrollPageIntoView:gt=>{const{dest:dt,pageNumber:Pt,pageIndex:It=Pt-1}=gt;if(C){C({dest:dt,pageIndex:It,pageNumber:Pt});return}const Et=at.current[It];if(Et){Et.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${Pt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(N,()=>({linkService:it,pages:at,viewer:mt}),[]);function St(){x&&x()}function xt(){g&&(warning$1(!1,g.toString()),T&&T(g))}function P(){c({type:"RESET"})}reactExports.useEffect(P,[D,c]);const n=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!D)return null;if(typeof D=="string")return isDataURI(D)?{data:dataURItoByteString(D)}:(displayCORSWarning(),{url:D});if(D instanceof PDFDataRangeTransport)return{range:D};if(isArrayBuffer(D))return{data:D};if(isBrowser&&isBlob(D))return{data:yield loadFromFile(D)};if(invariant(typeof D=="object"),invariant(isParameterObject(D)),"url"in D&&typeof D.url=="string"){if(isDataURI(D.url)){const{url:gt}=D,dt=__rest$1(D,["url"]),Pt=dataURItoByteString(gt);return Object.assign({data:Pt},dt)}displayCORSWarning()}return D}),[D]);reactExports.useEffect(()=>{const gt=makeCancellablePromise(n());return gt.promise.then(dt=>{c({type:"RESOLVE",value:dt})}).catch(dt=>{c({type:"REJECT",error:dt})}),()=>{cancelRunningTask(gt)}},[n,c]),reactExports.useEffect(()=>{if(!(typeof k>"u")){if(k===!1){xt();return}St()}},[k]);function o(){w&&(f&&f(w),at.current=new Array(w.numPages),it.current.setDocument(w))}function s(){q&&(warning$1(!1,q.toString()),S&&S(q))}function h(){$({type:"RESET"})}reactExports.useEffect(h,[$,k]);function u(){if(!k)return;const gt=Object.assign(Object.assign({},y),{isEvalSupported:!1}),dt=Object.assign(Object.assign({},k),gt),Pt=pdfjs.getDocument(dt);v&&(Pt.onProgress=v),A&&(Pt.onPassword=A);const It=Pt;return It.promise.then(Et=>{$({type:"RESOLVE",value:Et})}).catch(Et=>{It.destroyed||$({type:"REJECT",error:Et})}),()=>{It.destroy()}}reactExports.useEffect(u,[y,$,k]),reactExports.useEffect(()=>{if(!(typeof w>"u")){if(w===!1){s();return}o()}},[w]);function E(){it.current.setViewer(mt.current),it.current.setExternalLinkRel(G),it.current.setExternalLinkTarget(ft)}reactExports.useEffect(E,[G,ft]);function M(gt,dt){at.current[gt]=dt}function H(gt){delete at.current[gt]}const st=reactExports.useMemo(()=>({imageResourcesPath:m,linkService:it.current,onItemClick:C,pdf:w,registerPage:M,renderMode:l,rotate:d,unregisterPage:H}),[m,C,w,l,d]),Q=reactExports.useMemo(()=>makeEventProps(F,()=>w),[F,w]);function ot(){return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:st,children:a})}function ht(){return D?w==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof I=="function"?I():I}):w===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof X=="function"?X():X}):ot():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof O=="function"?O():O})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx("react-pdf__Document",p),ref:R,style:{"--scale-factor":"1"}},Q,{children:ht()}))});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var L=[],i=0;i<arguments.length;i++)L[i]=arguments[i];var N=L.filter(Boolean);if(N.length<=1){var a=N[0];return a||null}return function(X){N.forEach(function(G){typeof G=="function"?G(X):G&&(G.current=X)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(L){return L in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(L){return"children"in L}function isStructTreeNodeWithOnlyContentChild(L){return isStructTreeNode(L)?L.children.length===1&&0 in L.children&&"id"in L.children[0]:!1}function getRoleAttributes(L){const i={};if(isStructTreeNode(L)){const{role:N}=L,a=N.match(HEADING_PATTERN);if(a)i.role="heading",i["aria-level"]=Number(a[1]);else if(isPdfRole(N)){const p=PDF_ROLE_TO_HTML_ROLE[N];p&&(i.role=p)}}return i}function getBaseAttributes(L){const i={};if(isStructTreeNode(L)){if(L.alt!==void 0&&(i["aria-label"]=L.alt),L.lang!==void 0&&(i.lang=L.lang),isStructTreeNodeWithOnlyContentChild(L)){const[N]=L.children;if(N){const a=getBaseAttributes(N);return Object.assign(Object.assign({},i),a)}}}else"id"in L&&(i["aria-owns"]=L.id);return i}function getAttributes(L){return L?Object.assign(Object.assign({},getRoleAttributes(L)),getBaseAttributes(L)):null}function StructTreeItem({className:L,node:i}){const N=reactExports.useMemo(()=>getAttributes(i),[i]),a=reactExports.useMemo(()=>!isStructTreeNode(i)||isStructTreeNodeWithOnlyContentChild(i)?null:i.children.map((p,X)=>jsxRuntimeExports.jsx(StructTreeItem,{node:p},X)),[i]);return jsxRuntimeExports.jsx("span",Object.assign({className:L},N,{children:a}))}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const L=usePageContext();invariant(L);const{onGetStructTreeError:i,onGetStructTreeSuccess:N}=L,[a,p]=useResolver(),{value:X,error:G}=a,{customTextRenderer:ft,page:D}=L;function R(){X&&N&&N(X)}function m(){G&&(warning$1(!1,G.toString()),i&&i(G))}function I(){p({type:"RESET"})}reactExports.useEffect(I,[p,D]);function O(){if(ft||!D)return;const C=makeCancellablePromise(D.getStructTree()),S=C;return C.promise.then(v=>{p({type:"RESOLVE",value:v})}).catch(v=>{p({type:"REJECT",error:v})}),()=>cancelRunningTask(S)}return reactExports.useEffect(O,[ft,D,p]),reactExports.useEffect(()=>{if(X!==void 0){if(X===!1){m();return}R()}},[X]),X?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:X}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(L){const i=usePageContext();invariant(i);const N=Object.assign(Object.assign({},i),L),{_className:a,canvasBackground:p,devicePixelRatio:X=getDevicePixelRatio(),onRenderError:G,onRenderSuccess:ft,page:D,renderForms:R,renderTextLayer:m,rotate:I,scale:O}=N,{canvasRef:C}=L;invariant(D);const S=reactExports.useRef(null);function v(){D&&ft&&ft(makePageCallback(D,O))}function f(l){isCancelException(l)||(warning$1(!1,l.toString()),G&&G(l))}const A=reactExports.useMemo(()=>D.getViewport({scale:O*X,rotation:I}),[X,D,I,O]),T=reactExports.useMemo(()=>D.getViewport({scale:O,rotation:I}),[D,I,O]);function x(){if(!D)return;D.cleanup();const{current:l}=S;if(!l)return;l.width=A.width,l.height=A.height,l.style.width=`${Math.floor(T.width)}px`,l.style.height=`${Math.floor(T.height)}px`,l.style.visibility="hidden";const d={annotationMode:R?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:l.getContext("2d",{alpha:!1}),viewport:A};p&&(d.background=p);const F=D.render(d),b=F;return F.promise.then(()=>{l.style.visibility="",v()}).catch(f),()=>cancelRunningTask(b)}reactExports.useEffect(x,[p,S,X,D,R,A,T]);const y=reactExports.useCallback(()=>{const{current:l}=S;l&&(l.width=0,l.height=0)},[S]);return reactExports.useEffect(()=>y,[y]),jsxRuntimeExports.jsx("canvas",{className:`${a}__canvas`,dir:"ltr",ref:mergeRefs(C,S),style:{display:"block",userSelect:"none"},children:m?jsxRuntimeExports.jsx(StructTree,{}):null})}function PageSVG(){const L=usePageContext();invariant(L);const{_className:i,onRenderSuccess:N,onRenderError:a,page:p,rotate:X,scale:G}=L;invariant(p);const[ft,D]=useResolver(),{value:R,error:m}=ft;function I(){p&&N&&N(makePageCallback(p,G))}function O(){m&&(isCancelException(m)||(warning$1(!1,m.toString()),a&&a(m)))}const C=reactExports.useMemo(()=>p.getViewport({scale:G,rotation:X}),[p,X,G]);function S(){D({type:"RESET"})}reactExports.useEffect(S,[p,D,C]);function v(){if(!p)return;const x=makeCancellablePromise(p.getOperatorList());return x.promise.then(y=>{new pdfjs.SVGGraphics(p.commonObjs,p.objs).getSVG(y,C).then(d=>{if(!(d instanceof SVGElement))throw new Error("getSVG returned unexpected result.");D({type:"RESOLVE",value:d})}).catch(d=>{D({type:"REJECT",error:d})})}).catch(y=>{D({type:"REJECT",error:y})}),()=>cancelRunningTask(x)}reactExports.useEffect(v,[p,D,C]),reactExports.useEffect(()=>{if(R!==void 0){if(R===!1){O();return}I()}},[R]);function f(x){if(!x||!R)return;x.firstElementChild||x.appendChild(R);const{width:y,height:l}=C;R.setAttribute("width",`${y}`),R.setAttribute("height",`${l}`)}const{width:A,height:T}=C;return jsxRuntimeExports.jsx("div",{className:`${i}__svg`,ref:x=>f(x),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:A,height:T,userSelect:"none"}})}function isTextItem(L){return"str"in L}function TextLayer(){const L=usePageContext();invariant(L);const{customTextRenderer:i,onGetTextError:N,onGetTextSuccess:a,onRenderTextLayerError:p,onRenderTextLayerSuccess:X,page:G,pageIndex:ft,pageNumber:D,rotate:R,scale:m}=L;invariant(G);const[I,O]=useResolver(),{value:C,error:S}=I,v=reactExports.useRef(null),f=reactExports.useRef(void 0);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function A(){C&&a&&a(C)}function T(){S&&(warning$1(!1,S.toString()),N&&N(S))}function x(){O({type:"RESET"})}reactExports.useEffect(x,[G,O]);function y(){if(!G)return;const g=makeCancellablePromise(G.getTextContent()),W=g;return g.promise.then($=>{O({type:"RESOLVE",value:$})}).catch($=>{O({type:"REJECT",error:$})}),()=>cancelRunningTask(W)}reactExports.useEffect(y,[G,O]),reactExports.useEffect(()=>{if(C!==void 0){if(C===!1){T();return}A()}},[C]);const l=reactExports.useCallback(()=>{X&&X()},[X]),d=reactExports.useCallback(g=>{warning$1(!1,g.toString()),p&&p(g)},[p]);function F(){const g=f.current;g&&g.classList.add("active")}function b(){const g=f.current;g&&g.classList.remove("active")}const c=reactExports.useMemo(()=>G.getViewport({scale:m,rotation:R}),[G,R,m]);function k(){if(!G||!C)return;const{current:g}=v;if(!g)return;g.innerHTML="";const W=G.streamTextContent({includeMarkedContent:!0}),$={container:g,textContentSource:W,viewport:c},w=pdfjs.renderTextLayer($),q=w;return w.promise.then(()=>{const it=document.createElement("div");it.className="endOfContent",g.append(it),f.current=it;const at=g.querySelectorAll('[role="presentation"]');if(i){let V=0;C.items.forEach((ct,mt)=>{if(!isTextItem(ct))return;const St=at[V];if(!St)return;const xt=i(Object.assign({pageIndex:ft,pageNumber:D,itemIndex:mt},ct));St.innerHTML=xt,V+=ct.str&&ct.hasEOL?2:1})}l()}).catch(d),()=>cancelRunningTask(q)}return reactExports.useLayoutEffect(k,[i,d,l,G,ft,D,C,c]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:b,onMouseDown:F,ref:v})}function AnnotationLayer(){const L=useDocumentContext(),i=usePageContext();invariant(i);const N=Object.assign(Object.assign({},L),i),{imageResourcesPath:a,linkService:p,onGetAnnotationsError:X,onGetAnnotationsSuccess:G,onRenderAnnotationLayerError:ft,onRenderAnnotationLayerSuccess:D,page:R,pdf:m,renderForms:I,rotate:O,scale:C=1}=N;invariant(m),invariant(R),invariant(p);const[S,v]=useResolver(),{value:f,error:A}=S,T=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function x(){f&&G&&G(f)}function y(){A&&(warning$1(!1,A.toString()),X&&X(A))}function l(){v({type:"RESET"})}reactExports.useEffect(l,[v,R]);function d(){if(!R)return;const g=makeCancellablePromise(R.getAnnotations()),W=g;return g.promise.then($=>{v({type:"RESOLVE",value:$})}).catch($=>{v({type:"REJECT",error:$})}),()=>{cancelRunningTask(W)}}reactExports.useEffect(d,[v,R,I]),reactExports.useEffect(()=>{if(f!==void 0){if(f===!1){y();return}x()}},[f]);function F(){D&&D()}function b(g){warning$1(!1,`${g}`),ft&&ft(g)}const c=reactExports.useMemo(()=>R.getViewport({scale:C,rotation:O}),[R,O,C]);function k(){if(!m||!R||!p||!f)return;const{current:g}=T;if(!g)return;const W=c.clone({dontFlip:!0}),$={accessibilityManager:null,annotationCanvasMap:null,div:g,l10n:null,page:R,viewport:W},w={annotations:f,annotationStorage:m.annotationStorage,div:g,downloadManager:null,imageResourcesPath:a,linkService:p,page:R,renderForms:I,viewport:W};g.innerHTML="";try{new pdfjs.AnnotationLayer($).render(w),F()}catch(q){b(q)}return()=>{}}return reactExports.useEffect(k,[f,a,p,R,I,c]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:T})}var __rest=function(L,i){var N={};for(var a in L)Object.prototype.hasOwnProperty.call(L,a)&&i.indexOf(a)<0&&(N[a]=L[a]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,a=Object.getOwnPropertySymbols(L);p<a.length;p++)i.indexOf(a[p])<0&&Object.prototype.propertyIsEnumerable.call(L,a[p])&&(N[a[p]]=L[a[p]]);return N};const defaultScale=1;function Page(L){const i=useDocumentContext(),N=Object.assign(Object.assign({},i),L),{_className:a="react-pdf__Page",_enableRegisterUnregisterPage:p=!0,canvasBackground:X,canvasRef:G,children:ft,className:D,customRenderer:R,customTextRenderer:m,devicePixelRatio:I,error:O="Failed to load the page.",height:C,inputRef:S,loading:v="Loading page…",noData:f="No page specified.",onGetAnnotationsError:A,onGetAnnotationsSuccess:T,onGetStructTreeError:x,onGetStructTreeSuccess:y,onGetTextError:l,onGetTextSuccess:d,onLoadError:F,onLoadSuccess:b,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:k,onRenderError:g,onRenderSuccess:W,onRenderTextLayerError:$,onRenderTextLayerSuccess:w,pageIndex:q,pageNumber:it,pdf:at,registerPage:V,renderAnnotationLayer:ct=!0,renderForms:mt=!1,renderMode:St="canvas",renderTextLayer:xt=!0,rotate:P,scale:n=defaultScale,unregisterPage:o,width:s}=N,h=__rest(N,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[u,E]=useResolver(),{value:M,error:H}=u,st=reactExports.useRef(null);invariant(at);const Q=isProvided(it)?it-1:q??null,ot=it??(isProvided(q)?q+1:null),ht=P??(M?M.rotate:null),gt=reactExports.useMemo(()=>{if(!M)return null;let Gt=1;const zt=n??defaultScale;if(s||C){const Ut=M.getViewport({scale:1,rotation:ht});s?Gt=s/Ut.width:C&&(Gt=C/Ut.height)}return zt*Gt},[C,M,ht,n,s]);function dt(){return()=>{isProvided(Q)&&p&&o&&o(Q)}}reactExports.useEffect(dt,[p,at,Q,o]);function Pt(){if(b){if(!M||!gt)return;b(makePageCallback(M,gt))}if(p&&V){if(!isProvided(Q)||!st.current)return;V(Q,st.current)}}function It(){H&&(warning$1(!1,H.toString()),F&&F(H))}function Et(){E({type:"RESET"})}reactExports.useEffect(Et,[E,at,Q]);function Lt(){if(!at||!ot)return;const Gt=makeCancellablePromise(at.getPage(ot)),zt=Gt;return Gt.promise.then(Ut=>{E({type:"RESOLVE",value:Ut})}).catch(Ut=>{E({type:"REJECT",error:Ut})}),()=>cancelRunningTask(zt)}reactExports.useEffect(Lt,[E,at,Q,ot,V]),reactExports.useEffect(()=>{if(M!==void 0){if(M===!1){It();return}Pt()}},[M,gt]);const bt=reactExports.useMemo(()=>M&&isProvided(Q)&&ot&&isProvided(ht)&&isProvided(gt)?{_className:a,canvasBackground:X,customTextRenderer:m,devicePixelRatio:I,onGetAnnotationsError:A,onGetAnnotationsSuccess:T,onGetStructTreeError:x,onGetStructTreeSuccess:y,onGetTextError:l,onGetTextSuccess:d,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:k,onRenderError:g,onRenderSuccess:W,onRenderTextLayerError:$,onRenderTextLayerSuccess:w,page:M,pageIndex:Q,pageNumber:ot,renderForms:mt,renderTextLayer:xt,rotate:ht,scale:gt}:null,[a,X,m,I,A,T,x,y,l,d,c,k,g,W,$,w,M,Q,ot,mt,xt,ht,gt]),nt=reactExports.useMemo(()=>makeEventProps(h,()=>M&&(gt?makePageCallback(M,gt):void 0)),[h,M,gt]),tt=`${Q}@${gt}/${ht}`,pt=`${Q}/${ht}`;function Tt(){switch(St){case"custom":return invariant(R),jsxRuntimeExports.jsx(R,{},`${tt}_custom`);case"none":return null;case"svg":return jsxRuntimeExports.jsx(PageSVG,{},`${pt}_svg`);case"canvas":default:return jsxRuntimeExports.jsx(PageCanvas,{canvasRef:G},`${tt}_canvas`)}}function Ct(){return xt?jsxRuntimeExports.jsx(TextLayer,{},`${tt}_text`):null}function Ht(){return ct?jsxRuntimeExports.jsx(AnnotationLayer,{},`${tt}_annotations`):null}function $t(){return jsxRuntimeExports.jsxs(PageContext.Provider,{value:bt,children:[Tt(),Ct(),Ht(),ft]})}function Wt(){return ot?at===null||M===void 0||M===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof v=="function"?v():v}):at===!1||M===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof O=="function"?O():O}):$t():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof f=="function"?f():f})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx(a,D),"data-page-number":ot,ref:mergeRefs(S,st),style:{"--scale-factor":`${gt}`,backgroundColor:X||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},nt,{children:Wt()}))}displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-DKQKFyKK.js",import.meta.url).toString();const RESUME_URL="/xu-zhusheng.pdf";function Resume(){const[L,i]=reactExports.useState(),N=a=>{i(a.numPages)};return jsxRuntimeExports.jsxs("div",{id:"resume",children:[jsxRuntimeExports.jsx(Button,{text:"Download Resume",href:RESUME_URL,download:!0}),jsxRuntimeExports.jsx(Document,{file:RESUME_URL,onLoadSuccess:N,children:Array(L).fill().map((a,p)=>jsxRuntimeExports.jsx(Page,{className:"page",pageNumber:p+1},p))}),jsxRuntimeExports.jsx(Button,{text:"Download Resume",href:RESUME_URL,download:!0})]})}export{Resume as default};
